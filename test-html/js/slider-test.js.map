{"version":3,"sources":["webpack:///slider-test.js","webpack:///webpack/bootstrap 0da249d398ab392d2e0f?7457*****","webpack:///./src/_test/slider-test.ts","webpack:///./src/util/provide.ts?5c82*****","webpack:///external \"$\"?57aa*****","webpack:///./src/collections/Sliders.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","0","Sliders_1","$","tipConfig","$loadingGif","$presetSelector","$regionSelector","$versionSelector","tipSegmentLayerMinZoom","slidersConfig","label","yearOptions","column","presetConfig","presets","value","append","sliders","TipSliders","chg","console","log","window","1","provide","namespace","parts","split","nameSpace","i","length","newObject","util","Object","defineProperty","default","2","22","provide_1","nm","TipPresets","conf","this","domId","replace","toLowerCase","theSum","_i","_a","pr","_Slider","sliderConfig","_dropdownSelection","_weight","name","_locked","_min","_max","labelLow","labelHigh","labelVal","slider","chk","atMin","atMax","sel","itm","selectedParamDefault","selectedParam","html","prototype","addToDom","$container","selectionBox","increment","delta","remainder","Number","toFixed","val","setValAndDropDown","newVal","min","max","weight","locked","get","set","prop","enumerable","configurable","attr","sliderConfigs","divId","presetSelector","regionSelector","versionSelector","chgCallback","_this","resetting","reservedPercent","addClass","_changedCallback","_$presetSelector","_$regionSelector","_$versionSelector","_sliderList","_sliderLookup","sld","push","_presetArray","_presetLookup","preset","idx","_lockedList","_inRangeList","_atMinList","_atMaxList","lockedCount","notLockedCount","_splitSliderArray","change","setPresetValues","_runChangedCallback","trigger","_addEventListeners","paramWeightsRegionVersion","thePreset","presetValues","theSlider","_handleRemainder","remain","skipDomId","canChangeArray","inc","newRemainder","setValues","keyValList","k","hasOwnProperty","getSum","total","getParams","paramWeights","___this","find","$this","sldr","newValue","parseFloat","oldValue","diff","sum","loop1","domEl","checked","notLockedSliders","region","mmVersion","Sliders"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMMW,EACA,SAASP,EAAQD,EAASH,GAE/B,YE5CD,IAAAY,GAAAZ,EAAA,IACAa,EAAAb,EAAA,EAoBaG,GAAAW,WACTC,YAAaF,EAAE,gBACfG,gBAAiBH,EAAE,oBACnBI,gBAAiBJ,EAAE,oBACnBK,iBAAkBL,EAAE,qBACpBM,uBAAwB,GACxBC,gBAEYC,MAAO,OACPC,cACKD,MAAO,IAAKE,OAAQ,eAIzBF,MAAO,cACPC,cACKD,MAAO,IAAKE,OAAQ,aACpBF,MAAO,KAAME,OAAQ,cACrBF,MAAO,KAAME,OAAQ,cACrBF,MAAO,KAAME,OAAQ,gBAI1BF,MAAO,SACPC,cACKD,MAAO,IAAKE,OAAQ,aACpBF,MAAO,KAAME,OAAQ,cACrBF,MAAO,KAAME,OAAQ,cACrBF,MAAO,KAAME,OAAQ,gBAI1BF,MAAO,QACPC,cACKD,MAAO,IAAKE,OAAQ,aACpBF,MAAO,KAAME,OAAQ,gBAI1BF,MAAO,MACPC,cACKD,MAAO,IAAKE,OAAQ,cAIzBF,MAAO,aACPC,cACKD,MAAO,IAAKE,OAAQ,YACpBF,MAAO,KAAME,OAAQ,aACrBF,MAAO,KAAME,OAAQ,aACrBF,MAAO,KAAME,OAAQ,eAI1BF,MAAO,aACPC,cACKD,MAAO,EAAGE,OAAQ,iBAIvBF,MAAO,WACPC,cACKD,MAAO,EAAGE,OAAQ,qBAIvBF,MAAO,UACPC,cACKD,MAAO,EAAGE,OAAQ,cAIvBF,MAAO,QACPC,cACKD,MAAO,EAAGE,OAAQ,YAInCC,eAEYH,MAAO,cACPI,UACKF,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,UAAWG,MAAO,KAC1BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,aAAcG,MAAO,KAC7BH,OAAQ,iBAAkBG,MAAO,KACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,OAI7BL,MAAO,SACPI,UACKF,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,aAAcG,MAAO,KAC7BH,OAAQ,iBAAkBG,MAAO,KACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,MAI7BL,MAAO,mBACPI,UACKF,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,YAAaG,MAAO,KAC5BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,UAAWG,MAAO,KAC1BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,aAAcG,MAAO,IAC7BH,OAAQ,iBAAkBG,MAAO,IACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,MAI7BL,MAAO,kBACPI,UACKF,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,YAAaG,MAAO,KAC5BH,OAAQ,YAAaG,MAAO,KAC5BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,aAAcG,MAAO,IAC7BH,OAAQ,iBAAkBG,MAAO,IACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,MAI7BL,MAAO,UACPI,UACKF,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,YAAaG,MAAO,KAC5BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,UAAWG,MAAO,KAC1BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,aAAcG,MAAO,IAC7BH,OAAQ,iBAAkBG,MAAO,IACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,MAI7BL,MAAO,sBACPI,UACKF,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,YAAaG,MAAO,IAC5BH,OAAQ,WAAYG,MAAO,KAC3BH,OAAQ,UAAWG,MAAO,KAC1BH,OAAQ,WAAYG,MAAO,IAC3BH,OAAQ,aAAcG,MAAO,IAC7BH,OAAQ,iBAAkBG,MAAO,IACjCH,OAAQ,UAAWG,MAAO,IAC1BH,OAAQ,QAASG,MAAO,OAO7CvB,EAAAW,UAAUE,gBAAgBW,OAAO,8CAEjC,IAAIC,GAAU,GAAIhB,GAAAiB,WAAW1B,EAAAW,UAAUM,cAAejB,EAAAW,UAAUU,aAAc,mBAC1ErB,EAAAW,UAAUE,gBAAiBb,EAAAW,UAAUG,gBAAiBd,EAAAW,UAAUG,gBAAiB,SAACa,GAASC,QAAQC,IAAIF,IAI3GG,QAAa,KAAIL,EACjBK,OAAY,IAAIL,EAChBK,OAAa,KAAIL,GF4BXM,EACA,SAAS9B,EAAQD,GAKtB,YGtOD,SAAAgC,GAAiBC,GAEc,mBAAhBH,QAAW,KAClBA,OAAW,MAMf,KAAK,GAHDI,GAAQD,EAAUE,MAAM,KACxBC,EAAYN,OAAW,GAElBO,EAAE,EAAGA,EAAGH,EAAMI,OAAQD,IAAI,CAC/B,GAAIE,GAAYH,EAAUF,EAAMG,GAER,oBAAbE,KACPH,EAAUF,EAAMG,QAGpBD,EAAYA,EAAUF,EAAMG,IAGhC,MAAOD,GAGXJ,EAAQ,QACRF,OAAW,GAAEU,KAAKR,QAAUA,EHuO3BS,OAAOC,eAAe1C,EAAS,cAAgBuB,OAAO,IGrOvDvB,EAAA2C,QAAeX,GH2OTY,EACA,SAAS3C,EAAQD,GI/QvBC,EAAAD,QAAAU,GJqRMmC,GACA,SAAS5C,EAAQD,EAASH,GAK/B,YKvRD,IAAAiD,GAAAjD,EAAA,GACAa,EAAAb,EAAA,GAEIkD,EAAKD,EAAAH,QAAQ,eAuBjBK,EAAA,WAKI,QAAAA,GAAYC,GACRC,KAAKhC,MAAQ+B,EAAK/B,MAClBgC,KAAK5B,QAAU2B,EAAK3B,QACpB4B,KAAKC,MAAQD,KAAKhC,MAAMkC,QAAQ,KAAM,IAAIC,aAI1C,KAAe,GAFXC,GAAS,EAEEC,EAAA,EAAAC,EAAAN,KAAK5B,QAALiC,EAAAC,EAAAlB,OAAAiB,IAAY,CAAtB,GAAIE,GAAED,EAAAD,EACPD,IAAUG,EAAGlC,MAGjB,GAAc,KAAV+B,EACA,KAAM,iCAGlB,MAAAN,MAGAU,EAAA,WA4BI,QAAAA,GAAYC,GACRT,KAAKU,mBAAqB,KAC1BV,KAAKW,QAAU,KACfX,KAAKY,KAAOH,EAAazC,MACzBgC,KAAKC,MAAQD,KAAKY,KAAKT,cAAcD,QAAQ,KAAM,KAEnDF,KAAKa,SAAU,EAEfb,KAAKc,KAAO,EACZd,KAAKe,KAAO,IAEZf,KAAKgB,SAAW,KAChBhB,KAAKiB,UAAY,KACjBjB,KAAKkB,SAAW,KAChBlB,KAAKmB,OAAS,KACdnB,KAAKoB,IAAM,KAEXpB,KAAKqB,OAAQ,EACbrB,KAAKsB,OAAQ,CAKb,KAAK,GAFDC,GAAM,mBAAqD,GAAnCd,EAAaxC,YAAYmB,OAAc,gBAAkB,eAAa,SAASY,KAAKC,MAAK,SAE5Gd,EAAI,EAAGA,EAAIsB,EAAaxC,YAAYmB,OAAQD,IAAK,CACtD,GAAIqC,GAAMf,EAAaxC,YAAYkB,EACnCoC,IAAO,kBAAkBC,EAAItD,OAAM,KAAKsD,EAAIxD,MAAK,YAErDuD,GAAO,YAEPvB,KAAKyB,qBAAuBzB,KAAK0B,cAEjC1B,KAAK2B,KAAO,4BACR,eAAe3B,KAAKC,MAAK,8BAA8BD,KAAKY,KAAI,YAChEW,EAAM,QACN,cAAcvB,KAAKC,MAAK,sDACxB,cAAcD,KAAKC,MAAK,oCACxB,cAAcD,KAAKC,MAAK,4DACxB,cAAcD,KAAKC,MAAK,qCACxB,cAAcD,KAAKC,MAAK,cAAcD,KAAKC,MAAK,0CAsJ5D,MA/IIO,GAAAoB,UAAAC,SAAA,SAASC,GACLA,EAAWxD,OAAO0B,KAAK2B,MACvB3B,KAAKgB,SAAWxD,EAAE,IAAIwC,KAAKC,MAAK,QAChCD,KAAKiB,UAAYzD,EAAE,IAAIwC,KAAKC,MAAK,SACjCD,KAAKkB,SAAW1D,EAAE,IAAIwC,KAAKC,MAAK,QAChCD,KAAKmB,OAAS3D,EAAE,IAAIwC,KAAKC,OACzBD,KAAK+B,aAAevE,EAAE,IAAIwC,KAAKC,MAAK,QACpCD,KAAKoB,IAAM5D,EAAE,IAAIwC,KAAKC,MAAK,SAQ/BO,EAAAoB,UAAAI,UAAA,SAAUC,GACN,GAAIC,GAAY,CAoBhB,OAnBAD,GAAQE,OAAOF,EAAMG,QAAQ,IAE7BpC,KAAKW,SAAWsB,EACZjC,KAAKW,QAAUX,KAAKc,MACpBoB,EAAYlC,KAAKc,KAAOd,KAAKW,QAC7BX,KAAKW,QAAUX,KAAKc,KACpBd,KAAKqB,OAAQ,GACNrB,KAAKW,QAAUX,KAAKe,MAC3BmB,EAAYlC,KAAKe,KAAOf,KAAKW,QAC7BX,KAAKW,QAAUX,KAAKe,KACpBf,KAAKsB,OAAQ,IAEbtB,KAAKqB,OAAQ,EACbrB,KAAKsB,OAAQ,GAGjBtB,KAAKmB,OAAOkB,IAAIrC,KAAKW,QAAQyB,QAAQ,IACrCpC,KAAKkB,SAASS,KAAK3B,KAAKW,QAAQyB,QAAQ,GAAK,KAEtCF,GAQX1B,EAAAoB,UAAAU,kBAAA,SAAkBC,EAAgBb,GAC9B1B,KAAKwC,IAAM,EACXxC,KAAKyC,IAAM,IACXzC,KAAK0C,OAASH,EACdvC,KAAKmB,OAAOkB,IAAIE,EAAOH,QAAQ,IAC/BpC,KAAK+B,aAAaM,IAAIX,GACtB1B,KAAK0B,cAAgBA,EACrB1B,KAAK2C,QAAS,GAOlBpD,OAAAC,eAAIgB,EAAAoB,UAAA,ULuNCgB,IKvNL,WACI,MAAO5C,MAAKa,SL6NXgC,IKtNL,SAAWR,GACPrC,KAAKa,QAAUwB,EACfrC,KAAKmB,OAAO2B,KAAK,WAAY9C,KAAKa,SAClCb,KAAK+B,aAAae,KAAK,WAAY9C,KAAKa,SACxCb,KAAKoB,IAAI0B,KAAK,WAAY9C,KAAKa,ULwN9BkC,YAAY,EACZC,cAAc,IKlNnBzD,OAAAC,eAAIgB,EAAAoB,UAAA,OLyNCgB,IKzNL,WACI,MAAO5C,MAAKc,ML+NX+B,IKxNL,SAAQN,GACJvC,KAAKc,KAAOqB,OAAOI,EAAOH,QAAQ,IAC9BpC,KAAKc,KAAO,IACZd,KAAKc,KAAO,GAEhBd,KAAKgB,SAASW,KAAK3B,KAAKc,KAAKsB,QAAQ,IACrCpC,KAAKmB,OAAO8B,KAAK,MAAOjD,KAAKc,KAAKsB,QAAQ,IAC1CpC,KAAKqB,MAAQrB,KAAKW,SAAWX,KAAKc,ML0NjCiC,YAAY,EACZC,cAAc,IKpNnBzD,OAAAC,eAAIgB,EAAAoB,UAAA,OL2NCgB,IK3NL,WACI,MAAO5C,MAAKe,MLiOX8B,IK1NL,SAAQN,GACJvC,KAAKe,KAAOoB,OAAOI,EAAOH,QAAQ,IAC9BpC,KAAKe,KAAO,MACZf,KAAKe,KAAO,KAEhBf,KAAKiB,UAAUU,KAAK3B,KAAKe,KAAKqB,QAAQ,IACtCpC,KAAKmB,OAAO8B,KAAK,MAAOjD,KAAKe,KAAKqB,QAAQ,IAC1CpC,KAAKsB,MAAQtB,KAAKW,SAAWX,KAAKe,ML4NjCgC,YAAY,EACZC,cAAc,IKtNnBzD,OAAAC,eAAIgB,EAAAoB,UAAA,UL6NCgB,IK7NL,WACI,MAAO5C,MAAKW,SLmOXkC,IK5NL,SAAWN,GACPvC,KAAKW,QAAUwB,OAAOI,EAAOH,QAAQ,IACrCpC,KAAKkB,SAASS,KAAK3B,KAAKW,QAAQyB,QAAQ,GAAK,KACzCpC,KAAKW,SAAWX,KAAKc,MACrBd,KAAKqB,OAAQ,EACbrB,KAAKsB,OAAQ,GACNtB,KAAKW,SAAWX,KAAKe,MAC5Bf,KAAKqB,OAAQ,EACbrB,KAAKsB,OAAQ,IAEbtB,KAAKqB,OAAQ,EACbrB,KAAKsB,OAAQ,ILiOhByB,YAAY,EACZC,cAAc,IK/NvBxC,IAEAX,GAAGW,QAAUA,CAMb,IAAAhC,GAAA,WAgCI,QAAAA,GAAY0E,EAAuC/E,EACvCgF,EAAeC,EAAwBC,EAAwBC,EAC/DC,GAFZ,GAAAC,GAAAxD,IAIIA,MAAKyD,WAAY,EACjBzD,KAAK0D,gBAAkB,EACvB1D,KAAK8B,WAAatE,EAAE,IAAM2F,GAC1BnD,KAAK8B,WAAW6B,SAAS,oBAEzB3D,KAAK4D,iBAAyC,kBAAfL,GAA4BA,EAAc,aAEzEvD,KAAK6D,iBAAmBT,EACxBpD,KAAK8D,iBAAmBT,EACxBrD,KAAK+D,kBAAoBT,EAEzBtD,KAAKgE,eACLhE,KAAKiE,gBAEL,KAAK,GAAI9E,GAAI,EAAGA,EAAI+D,EAAc9D,OAAQD,IAAK,CAC3C,GAAI+E,GAAM,GAAI1D,GAAQ0C,EAAc/D,GACpCa,MAAKgE,YAAYG,KAAKD,GACtBlE,KAAKiE,cAAcC,EAAIjE,OAASiE,EAChCA,EAAIrC,SAAS7B,KAAK8B,YAGtB9B,KAAKoE,gBACLpE,KAAKqE,gBAEL,KAAK,GAAIlF,GAAI,EAAGA,EAAIhB,EAAaiB,OAAQD,IAAK,CAC1C,GAAImF,GAAS,GAAIxE,GAAW3B,EAAagB,IAErCoF,GAAOpF,EAAI,GAAGiD,SAElBpC,MAAKqE,cAAcE,GAAOD,EAC1BtE,KAAKoE,aAAaD,KAAKG,GACvBtE,KAAK6D,iBAAiBvF,OAAO,kBAAkBiG,EAAG,KAAKD,EAAOtG,MAAK,aAIvEgC,KAAKwE,eACLxE,KAAKyE,gBACLzE,KAAK0E,cACL1E,KAAK2E,cAEL3E,KAAK4E,YAAc,GACnB5E,KAAK6E,eAAiB,EAEtB7E,KAAK8E,oBAGL9E,KAAK6D,iBAAiBkB,OAAO,WACzBvB,EAAKwB,kBACLxB,EAAKyB,wBAGTjF,KAAK8D,iBAAiBiB,OAAO,WACzBvB,EAAKyB,wBAGTjF,KAAK+D,kBAAkBgB,OAAO,WAC1BvB,EAAKyB,wBAGTjF,KAAK6D,iBAAiBqB,QAAQ,UAE9BlF,KAAKmF,qBAmRb,MAhRI3G,GAAAoD,UAAAqD,oBAAA,WACIjF,KAAK4D,iBAAiB5D,KAAKoF,4BAG/B7F,OAAAC,eAAIhB,EAAAoD,UAAA,mBLqLCgB,IKrLL,WACI,MAAO5C,MAAK4D,kBLuLXf,IKpLL,SAAoBpE,GAChBuB,KAAK4D,iBAAmBnF,EACxBuB,KAAKiF,uBLsLJlC,YAAY,EACZC,cAAc,IKpLnBxE,EAAAoD,UAAAoD,gBAAA,WAKI,IAAK,GAJDT,GAAMvE,KAAK6D,iBAAiBxB,OAAS,IAErCgD,EAAYrF,KAAKqE,cAAcE,GAE1BpF,EAAI,EAAGA,EAAIkG,EAAUjH,QAAQgB,OAAQD,IAAK,CAC/C,GAAImG,GAAeD,EAAUjH,QAAQe,GACjCoG,EAAYvF,KAAKgE,YAAY7E,EAEjCoG,GAAU5C,QAAS,EACnB4C,EAAUjD,kBAAkBgD,EAAajH,MAAOiH,EAAapH,UAQrEM,EAAAoD,UAAAkD,kBAAA,WACI9E,KAAKwE,eACLxE,KAAKyE,gBACLzE,KAAK0E,cACL1E,KAAK2E,aAEL,KAAK,GAAIxF,GAAI,EAAGA,EAAIa,KAAKgE,YAAY5E,OAAQD,IAAK,CAC9C,GAAI+E,GAAMlE,KAAKgE,YAAY7E,EAEvB+E,GAAIvB,OACJ3C,KAAKwE,YAAYL,KAAKD,GACfA,EAAI7C,MACXrB,KAAK0E,WAAWP,KAAKD,GACdA,EAAI5C,MACXtB,KAAK2E,WAAWR,KAAKD,GAErBlE,KAAKyE,aAAaN,KAAKD,GAG/BlE,KAAK4E,YAAc5E,KAAKwE,YAAYpF,OACpCY,KAAK6E,eAAiB7E,KAAKgE,YAAY5E,OAASY,KAAK4E,aASzDpG,EAAAoD,UAAA4D,iBAAA,SAAiBC,EAAQC,GAGrB,GADAD,EAAStD,OAAOsD,EAAOrD,QAAQ,IACjB,GAAVqD,EAAJ,CAIAzF,KAAK8E,mBAGL,KAAK,GADDa,MACKxG,EAAI,EAAGA,EAAIa,KAAKyE,aAAarF,OAAQD,IAAK,CAC/C,GAAI+E,GAAMlE,KAAKyE,aAAatF,EACxB+E,GAAIjE,OAASyF,GAGjBC,EAAexB,KAAKD,GAGxB,GAAIuB,EAAS,EACT,IAAK,GAAItG,GAAI,EAAGA,EAAIa,KAAK2E,WAAWvF,OAAQD,IAAK,CAC7C,GAAI+E,GAAMlE,KAAK2E,WAAWxF,EACtB+E,GAAIjE,OAASyF,GAGjBC,EAAexB,KAAKD,OAGxB,KAAK,GAAI/E,GAAI,EAAGA,EAAIa,KAAK0E,WAAWtF,OAAQD,IAAK,CAC7C,GAAI+E,GAAMlE,KAAK0E,WAAWvF,EACtB+E,GAAIjE,OAASyF,GAGjBC,EAAexB,KAAKD,GAI5B,GAA6B,GAAzByB,EAAevG,OAAnB,CAOA,IAAK,GAHDwG,IAAM,EAAKzD,QAAQsD,EAASE,EAAevG,QAAQgD,QAAQ,IAE3DyD,EAAe,EACV1G,EAAI,EAAGA,EAAIwG,EAAevG,OAAQD,IACvC0G,GAAgBF,EAAexG,GAAG6C,UAAU4D,EAGhD5F,MAAKwF,iBAAiBK,EAAcH,MAOxClH,EAAAoD,UAAAkE,UAAA,SAAUC,GACN/F,KAAKyD,WAAY,CACjB,KAAK,GAAIuC,KAAKD,GACNA,EAAWE,eAAeD,IAC1BhG,KAAKiE,cAAc+B,GAAG1D,kBAAkByD,EAAWC,GAAG,GAAID,EAAWC,GAAG,GAGhFhG,MAAKyD,WAAY,GAOrBjF,EAAAoD,UAAAsE,OAAA,WAEI,IAAK,GADDC,GAAQ,EACHhH,EAAI,EAAGA,EAAIa,KAAKgE,YAAY5E,OAAQD,IAAK,CAC9C,GAAI+E,GAAMlE,KAAKgE,YAAY7E,EAC3BgH,IAAShE,OAAO+B,EAAIxB,OAAON,QAAQ,IAGvC,MAAO+D,IAOX3H,EAAAoD,UAAAwE,UAAA,WAEI,IAAK,GADDC,MACKlH,EAAI,EAAGA,EAAIa,KAAKgE,YAAY5E,OAAQD,IAAK,CAC9C,GAAI+E,GAAMlE,KAAKgE,YAAY7E,EAC3BkH,GAAanC,EAAIxC,eAAiBS,OAAO+B,EAAIxB,OAAON,QAAQ,IAGhE,MAAOiE,IAGX7H,EAAAoD,UAAAuD,mBAAA,WACI,GAAImB,GAAUtG,IAIdA,MAAK8B,WAAWyE,KAAK,uBAAuBxB,OAAO,WAC3C,IAAIuB,EAAQ7C,UAAZ,CAIA,GAAI+C,GAAQhJ,EAAEwC,MACVC,EAAQD,KAAS,GACjByG,EAAOH,EAAQrC,cAAchE,GAE7ByG,EAAWC,WAAWH,EAAMnE,OAE5BuE,EAAWH,EAAK/D,OAChBmE,EAAOH,EAAWE,CACtBC,GAAO1E,OAAO0E,EAAKzE,QAAQ,IAE3BqE,EAAK/D,OAASP,OAAOuE,EAAStE,QAAQ,IAEtCkE,EAAQd,iBAAiBqB,EAAM5G,EAG/B,IAAI6G,GAAM3E,OAAOmE,EAAQJ,SAAS9D,QAAQ,GAE1C,IAAI0E,EAAM,IACNC,EACI,OACI,IAAK,GAAI5H,GAAI,EAAGA,EAAImH,EAAQtC,YAAY5E,OAAQD,IAAK,CACjD,GAAI+E,GAAMoC,EAAQtC,YAAY7E,EAC9B,IAAI+E,EAAIjE,OAASA,IAASiE,EAAIvB,SAAUuB,EAAI7C,QAG5C6C,EAAIlC,WAAU,IACd8E,GAAO,GACe,SAAlBA,EAAI1E,QAAQ,IACZ,KAAM2E,OAInB,IAAID,EAAM,IACbC,EACI,OACI,IAAK,GAAI5H,GAAI,EAAGA,EAAImH,EAAQtC,YAAY5E,OAAQD,IAAK,CACjD,GAAI+E,GAAMoC,EAAQtC,YAAY7E,EAC9B,IAAI+E,EAAIjE,OAASA,IAASiE,EAAIvB,SAAUuB,EAAI5C,QAG5C4C,EAAIlC,UAAU,IACd8E,GAAO,GACe,SAAlBA,EAAI1E,QAAQ,IACZ,KAAM2E,GAM1BT,EAAQzC,iBAAiBxB,IAAI,KAC7BiE,EAAQrB,yBAKhBzH,EAAE,gBAAgBuH,OAAO,WACjBuB,EAAQ7C,YAGZ6C,EAAQrC,cAAcjE,KAAS,GAAEE,QAAQ,OAAQ,KAAKwB,cAAgBlE,EAAEwC,MAAMqC,MAE9EiE,EAAQzC,iBAAiBxB,IAAI,KAE7BiE,EAAQrB,yBAKZjF,KAAK8B,WAAWyE,KAAK,0BAA0BxB,OAAO,WAClD,GAAIiC,GAAQhH,IAEZsG,GAAQrC,cAAc+C,EAAMhK,GAAGkD,QAAQ,OAAQ,KAAKyC,QAAUqE,EAAMC,QACpEX,EAAQ5C,gBAAkB,EAC1B4C,EAAQzB,eAAiB,CAIzB,KAAK,GAFDqC,MAEK/H,EAAI,EAAGA,EAAImH,EAAQtC,YAAY5E,OAAQD,IAAK,CACjD,GAAI+E,GAAMoC,EAAQtC,YAAY7E,EAC1B+E,GAAIvB,OACJ2D,EAAQ5C,iBAAmBQ,EAAIxB,QAGnCwE,EAAiB/C,KAAKD,GACtBoC,EAAQzB,kBAGZ,IAAK,GAAI1F,GAAI,EAAGA,EAAImH,EAAQtC,YAAY5E,OAAQD,IAAK,CACjD,GAAI+E,GAAMoC,EAAQtC,YAAY7E,EAC1B+E,GAAIvB,SAGRuB,EAAIzB,IAAM,IAAM6D,EAAQ5C,iBAG5B,GAA+B,GAA3BwD,EAAiB9H,OACjB8H,EAAiB,GAAG1E,IAAM0E,EAAiB,GAAGxE,WAE9C,KAAK,GAAIvD,GAAI,EAAGA,EAAI+H,EAAiB9H,OAAQD,IACzC+H,EAAiB/H,GAAGqD,IAAM,KAO1CjD,OAAAC,eAAIhB,EAAAoD,UAAA,6BL+ICgB,IK/IL,WACI,OAAQyD,aAAcrG,KAAKoG,YACvBe,OAAQnH,KAAK8D,iBAAiBzB,MAAiB+E,UAAWpH,KAAK+D,kBAAkB1B,QLiJpFU,YAAY,EACZC,cAAc,IKhJvBxE,IApXa1B,GAAA0B,aAsXbqB,EAAGwH,QAAU7I,ELoJZe,OAAOC,eAAe1C,EAAS,cAAgBuB,OAAO,IKnJvDvB,EAAA2C,QAAejB","file":"slider-test.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/**\r\n\t * Created by gavorhes on 6/22/2016.\r\n\t */\r\n\tvar Sliders_1 = __webpack_require__(22);\r\n\tvar $ = __webpack_require__(2);\r\n\texports.tipConfig = {\r\n\t    $loadingGif: $('#loading-gif'),\r\n\t    $presetSelector: $('#preset-selector'),\r\n\t    $regionSelector: $('#region-selector'),\r\n\t    $versionSelector: $('#version-selector'),\r\n\t    tipSegmentLayerMinZoom: 10,\r\n\t    slidersConfig: [\r\n\t        {\r\n\t            label: 'AADT',\r\n\t            yearOptions: [\r\n\t                { label: '1', column: 'aadtyr_1' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'AADT Future',\r\n\t            yearOptions: [\r\n\t                { label: '5', column: 'aadtyr_5' },\r\n\t                { label: '10', column: 'aadtyr_10' },\r\n\t                { label: '15', column: 'aadtyr_15' },\r\n\t                { label: '20', column: 'aadtyr_20' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Growth',\r\n\t            yearOptions: [\r\n\t                { label: '5', column: 'growth_5' },\r\n\t                { label: '10', column: 'growth_10' },\r\n\t                { label: '15', column: 'growth_15' },\r\n\t                { label: '20', column: 'growth_20' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Truck',\r\n\t            yearOptions: [\r\n\t                { label: '1', column: 'trkdyr_1' },\r\n\t                { label: '20', column: 'trkdyr_20' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'LOS',\r\n\t            yearOptions: [\r\n\t                { label: '1', column: 'losyr_1' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'LOS Future',\r\n\t            yearOptions: [\r\n\t                { label: '5', column: 'losyr_5' },\r\n\t                { label: '10', column: 'losyr_10' },\r\n\t                { label: '15', column: 'losyr_15' },\r\n\t                { label: '20', column: 'losyr_20' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Crash Rate',\r\n\t            yearOptions: [\r\n\t                { label: 1, column: 'crash_rate' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Severity',\r\n\t            yearOptions: [\r\n\t                { label: 1, column: 'crash_severity' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Weather',\r\n\t            yearOptions: [\r\n\t                { label: 1, column: 'weather' }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Event',\r\n\t            yearOptions: [\r\n\t                { label: 1, column: 'event' }\r\n\t            ]\r\n\t        }\r\n\t    ],\r\n\t    presetConfig: [\r\n\t        {\r\n\t            label: 'Default TIP',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 10.0 },\r\n\t                { column: 'aadtyr_20', value: 7.0 },\r\n\t                { column: 'growth_20', value: 7.0 },\r\n\t                { column: 'trkdyr_1', value: 4.0 },\r\n\t                { column: 'losyr_1', value: 12.0 },\r\n\t                { column: 'losyr_20', value: 12.0 },\r\n\t                { column: 'crash_rate', value: 15.0 },\r\n\t                { column: 'crash_severity', value: 13.0 },\r\n\t                { column: 'weather', value: 9.0 },\r\n\t                { column: 'event', value: 11.0 }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Safety',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 20.0 },\r\n\t                { column: 'aadtyr_20', value: 0.0 },\r\n\t                { column: 'growth_20', value: 0.0 },\r\n\t                { column: 'trkdyr_1', value: 0.0 },\r\n\t                { column: 'losyr_1', value: 0.0 },\r\n\t                { column: 'losyr_20', value: 0.0 },\r\n\t                { column: 'crash_rate', value: 40.0 },\r\n\t                { column: 'crash_severity', value: 40.0 },\r\n\t                { column: 'weather', value: 0.0 },\r\n\t                { column: 'event', value: 0.0 }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Mobility Present',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 25.0 },\r\n\t                { column: 'aadtyr_20', value: 25.0 },\r\n\t                { column: 'growth_20', value: 0.0 },\r\n\t                { column: 'trkdyr_1', value: 25.0 },\r\n\t                { column: 'losyr_1', value: 25.0 },\r\n\t                { column: 'losyr_20', value: 0.0 },\r\n\t                { column: 'crash_rate', value: 0.0 },\r\n\t                { column: 'crash_severity', value: 0.0 },\r\n\t                { column: 'weather', value: 0.0 },\r\n\t                { column: 'event', value: 0.0 }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Mobility Future',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 0.0 },\r\n\t                { column: 'aadtyr_20', value: 25.0 },\r\n\t                { column: 'growth_20', value: 25.0 },\r\n\t                { column: 'trkdyr_1', value: 25.0 },\r\n\t                { column: 'losyr_1', value: 0.0 },\r\n\t                { column: 'losyr_20', value: 25.0 },\r\n\t                { column: 'crash_rate', value: 0.0 },\r\n\t                { column: 'crash_severity', value: 0.0 },\r\n\t                { column: 'weather', value: 0.0 },\r\n\t                { column: 'event', value: 0.0 }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Service',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 30.0 },\r\n\t                { column: 'aadtyr_20', value: 0.0 },\r\n\t                { column: 'growth_20', value: 10.0 },\r\n\t                { column: 'trkdyr_1', value: 0.0 },\r\n\t                { column: 'losyr_1', value: 30.0 },\r\n\t                { column: 'losyr_20', value: 30.0 },\r\n\t                { column: 'crash_rate', value: 0.0 },\r\n\t                { column: 'crash_severity', value: 0.0 },\r\n\t                { column: 'weather', value: 0.0 },\r\n\t                { column: 'event', value: 0.0 }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            label: 'Freight Performance',\r\n\t            presets: [\r\n\t                { column: 'aadtyr_1', value: 20.0 },\r\n\t                { column: 'aadtyr_20', value: 0.0 },\r\n\t                { column: 'growth_20', value: 0.0 },\r\n\t                { column: 'trkdyr_1', value: 60.0 },\r\n\t                { column: 'losyr_1', value: 20.0 },\r\n\t                { column: 'losyr_20', value: 0.0 },\r\n\t                { column: 'crash_rate', value: 0.0 },\r\n\t                { column: 'crash_severity', value: 0.0 },\r\n\t                { column: 'weather', value: 0.0 },\r\n\t                { column: 'event', value: 0.0 }\r\n\t            ]\r\n\t        }\r\n\t    ]\r\n\t};\r\n\texports.tipConfig.$presetSelector.append('<option value=\"0\" disabled=>Custom</option>');\r\n\tvar sliders = new Sliders_1.TipSliders(exports.tipConfig.slidersConfig, exports.tipConfig.presetConfig, 'slider-container', exports.tipConfig.$presetSelector, exports.tipConfig.$regionSelector, exports.tipConfig.$regionSelector, function (chg) { console.log(chg); });\r\n\t// sliders.changedCallback = (chg) => {console.log(chg)};\r\n\twindow['glob'] = sliders;\r\n\twindow['hat'] = sliders;\r\n\twindow['bird'] = sliders;\r\n\n\n/***/ },\n\n/***/ 1:\n/***/ function(module, exports) {\n\n\t/**\r\n\t * Created by gavorhes on 12/10/2015.\r\n\t */\r\n\t\"use strict\";\r\n\t/**\r\n\t * create a namespace on the gv object\r\n\t * @param {string} namespace to create\r\n\t * @returns {object} object representing the namespace\r\n\t */\r\n\tfunction provide(namespace) {\r\n\t    \"use strict\";\r\n\t    if (typeof window['gv'] == 'undefined') {\r\n\t        window['gv'] = {};\r\n\t    }\r\n\t    var parts = namespace.split('.');\r\n\t    var nameSpace = window['gv'];\r\n\t    for (var i = 0; i < parts.length; i++) {\r\n\t        var newObject = nameSpace[parts[i]];\r\n\t        if (typeof newObject == 'undefined') {\r\n\t            nameSpace[parts[i]] = {};\r\n\t        }\r\n\t        nameSpace = nameSpace[parts[i]];\r\n\t    }\r\n\t    return nameSpace;\r\n\t}\r\n\tprovide('util');\r\n\twindow['gv'].util.provide = provide;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = provide;\r\n\n\n/***/ },\n\n/***/ 2:\n/***/ function(module, exports) {\n\n\tmodule.exports = $;\n\n/***/ },\n\n/***/ 22:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 12/10/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('collections');\r\n\tvar TipPresets = (function () {\r\n\t    function TipPresets(conf) {\r\n\t        this.label = conf.label;\r\n\t        this.presets = conf.presets;\r\n\t        this.domId = this.label.replace(/ /g, '').toLowerCase();\r\n\t        var theSum = 0;\r\n\t        for (var _i = 0, _a = this.presets; _i < _a.length; _i++) {\r\n\t            var pr = _a[_i];\r\n\t            theSum += pr.value;\r\n\t        }\r\n\t        if (theSum != 100) {\r\n\t            throw 'preset sum does note equal 100';\r\n\t        }\r\n\t    }\r\n\t    return TipPresets;\r\n\t}());\r\n\tvar _Slider = (function () {\r\n\t    /**\r\n\t     * Slider constructor\r\n\t     * @param sliderConfig - the configuration\r\n\t\r\n\t     */\r\n\t    function _Slider(sliderConfig) {\r\n\t        this._dropdownSelection = null;\r\n\t        this._weight = null;\r\n\t        this.name = sliderConfig.label;\r\n\t        this.domId = this.name.toLowerCase().replace(/ /g, '-');\r\n\t        this._locked = false;\r\n\t        this._min = 0.0;\r\n\t        this._max = 100;\r\n\t        this.labelLow = null;\r\n\t        this.labelHigh = null;\r\n\t        this.labelVal = null;\r\n\t        this.slider = null;\r\n\t        this.chk = null;\r\n\t        this.atMin = false;\r\n\t        this.atMax = false;\r\n\t        var sel = \"<select class=\\\"\" + (sliderConfig.yearOptions.length == 1 ? 'hidden-select' : 'show-select') + \"\\\" id=\\\"\" + this.domId + \"_chg\\\">\";\r\n\t        for (var i = 0; i < sliderConfig.yearOptions.length; i++) {\r\n\t            var itm = sliderConfig.yearOptions[i];\r\n\t            sel += \"<option value=\\\"\" + itm.column + \"\\\">\" + itm.label + \"</option>\";\r\n\t        }\r\n\t        sel += '</select>';\r\n\t        this.selectedParamDefault = this.selectedParam;\r\n\t        this.html = '<div class=\"slider-div\">' +\r\n\t            (\"<label for=\\\"\" + this.domId + \"_chk\\\" class=\\\"slider-label\\\">\" + this.name + \"</label>\") +\r\n\t            sel + \"<br>\" +\r\n\t            (\"<input id=\\\"\" + this.domId + \"_chk\\\" type=\\\"checkbox\\\" title=\\\"Lock/Unlock Slider\\\">\") +\r\n\t            (\"<label id=\\\"\" + this.domId + \"_low\\\" class=\\\"low-high\\\"></label>\") +\r\n\t            (\"<input id=\\\"\" + this.domId + \"\\\" type=\\\"range\\\" value=\\\"50\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"0.1\\\">\") +\r\n\t            (\"<label id=\\\"\" + this.domId + \"_high\\\" class=\\\"low-high\\\"></label>\") +\r\n\t            (\"<label id=\\\"\" + this.domId + \"_lbl\\\" for=\\\"\" + this.domId + \"\\\" class=\\\"percent-label\\\"></label></div>\");\r\n\t    }\r\n\t    /**\r\n\t     * add html to dom\r\n\t     * @param {jQuery} $container - container element\r\n\t     */\r\n\t    _Slider.prototype.addToDom = function ($container) {\r\n\t        $container.append(this.html);\r\n\t        this.labelLow = $(\"#\" + this.domId + \"_low\");\r\n\t        this.labelHigh = $(\"#\" + this.domId + \"_high\");\r\n\t        this.labelVal = $(\"#\" + this.domId + \"_lbl\");\r\n\t        this.slider = $(\"#\" + this.domId);\r\n\t        this.selectionBox = $(\"#\" + this.domId + \"_chg\");\r\n\t        this.chk = $(\"#\" + this.domId + \"_chk\");\r\n\t    };\r\n\t    /**\r\n\t     * increment the slider\r\n\t     * @param {number} delta change delta\r\n\t     * @returns {number} the remainder not able to be allocated to this slider\r\n\t     */\r\n\t    _Slider.prototype.increment = function (delta) {\r\n\t        var remainder = 0;\r\n\t        delta = Number(delta.toFixed(1));\r\n\t        this._weight += delta;\r\n\t        if (this._weight < this._min) {\r\n\t            remainder = this._min - this._weight;\r\n\t            this._weight = this._min;\r\n\t            this.atMin = true;\r\n\t        }\r\n\t        else if (this._weight > this._max) {\r\n\t            remainder = this._max - this._weight;\r\n\t            this._weight = this._max;\r\n\t            this.atMax = true;\r\n\t        }\r\n\t        else {\r\n\t            this.atMin = false;\r\n\t            this.atMax = false;\r\n\t        }\r\n\t        this.slider.val(this._weight.toFixed(1));\r\n\t        this.labelVal.html(this._weight.toFixed(1) + '%');\r\n\t        return remainder;\r\n\t    };\r\n\t    /**\r\n\t     * set the value and drop down\r\n\t     * @param {number} newVal the new value\r\n\t     * @param {string} selectedParam the selected parameter\r\n\t     */\r\n\t    _Slider.prototype.setValAndDropDown = function (newVal, selectedParam) {\r\n\t        this.min = 0;\r\n\t        this.max = 100;\r\n\t        this.weight = newVal;\r\n\t        this.slider.val(newVal.toFixed(1));\r\n\t        this.selectionBox.val(selectedParam);\r\n\t        this.selectedParam = selectedParam;\r\n\t        this.locked = true;\r\n\t    };\r\n\t    Object.defineProperty(_Slider.prototype, \"locked\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns {boolean} if locked\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._locked;\r\n\t        },\r\n\t        /**\r\n\t         *\r\n\t         * @param {boolean} val if locked\r\n\t         */\r\n\t        set: function (val) {\r\n\t            this._locked = val;\r\n\t            this.slider.prop('disabled', this._locked);\r\n\t            this.selectionBox.prop('disabled', this._locked);\r\n\t            this.chk.prop('checked', !this._locked);\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(_Slider.prototype, \"min\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns {number} the minimum\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._min;\r\n\t        },\r\n\t        /**\r\n\t         *\r\n\t         * @param {number} newVal new minimum\r\n\t         */\r\n\t        set: function (newVal) {\r\n\t            this._min = Number(newVal.toFixed(1));\r\n\t            if (this._min < 0) {\r\n\t                this._min = 0;\r\n\t            }\r\n\t            this.labelLow.html(this._min.toFixed(1));\r\n\t            this.slider.attr('min', this._min.toFixed(1));\r\n\t            this.atMin = this._weight == this._min;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(_Slider.prototype, \"max\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns {number} the maximum\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._max;\r\n\t        },\r\n\t        /**\r\n\t         *\r\n\t         * @param {number} newVal the maximum\r\n\t         */\r\n\t        set: function (newVal) {\r\n\t            this._max = Number(newVal.toFixed(1));\r\n\t            if (this._max > 100) {\r\n\t                this._max = 100.0;\r\n\t            }\r\n\t            this.labelHigh.html(this._max.toFixed(1));\r\n\t            this.slider.attr('max', this._max.toFixed(1));\r\n\t            this.atMax = this._weight == this._max;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(_Slider.prototype, \"weight\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns {number} the weight\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._weight;\r\n\t        },\r\n\t        /**\r\n\t         *\r\n\t         * @param {number} newVal the weight\r\n\t         */\r\n\t        set: function (newVal) {\r\n\t            this._weight = Number(newVal.toFixed(1));\r\n\t            this.labelVal.html(this._weight.toFixed(1) + '%');\r\n\t            if (this._weight <= this._min) {\r\n\t                this.atMin = true;\r\n\t                this.atMax = false;\r\n\t            }\r\n\t            else if (this._weight >= this._max) {\r\n\t                this.atMin = false;\r\n\t                this.atMax = true;\r\n\t            }\r\n\t            else {\r\n\t                this.atMin = false;\r\n\t                this.atMax = false;\r\n\t            }\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return _Slider;\r\n\t}());\r\n\tnm._Slider = _Slider;\r\n\t/**\r\n\t * class to keep track of the sliders\r\n\t */\r\n\tvar TipSliders = (function () {\r\n\t    /**\r\n\t     *\r\n\t     * @param sliderConfigs\r\n\t     * @param presetConfig\r\n\t     * @param divId\r\n\t     * @param presetSelector\r\n\t     * @param regionSelector\r\n\t     * @param versionSelector\r\n\t     * @param chgCallback\r\n\t     */\r\n\t    function TipSliders(sliderConfigs, presetConfig, divId, presetSelector, regionSelector, versionSelector, chgCallback) {\r\n\t        var _this = this;\r\n\t        this.resetting = false;\r\n\t        this.reservedPercent = 0.0;\r\n\t        this.$container = $('#' + divId);\r\n\t        this.$container.addClass('slider-container');\r\n\t        this._changedCallback = typeof chgCallback == 'function' ? chgCallback : function () { };\r\n\t        this._$presetSelector = presetSelector;\r\n\t        this._$regionSelector = regionSelector;\r\n\t        this._$versionSelector = versionSelector;\r\n\t        this._sliderList = [];\r\n\t        this._sliderLookup = {};\r\n\t        for (var i = 0; i < sliderConfigs.length; i++) {\r\n\t            var sld = new _Slider(sliderConfigs[i]);\r\n\t            this._sliderList.push(sld);\r\n\t            this._sliderLookup[sld.domId] = sld;\r\n\t            sld.addToDom(this.$container);\r\n\t        }\r\n\t        this._presetArray = [];\r\n\t        this._presetLookup = {};\r\n\t        for (var i = 0; i < presetConfig.length; i++) {\r\n\t            var preset = new TipPresets(presetConfig[i]);\r\n\t            var idx = (i + 1).toFixed();\r\n\t            this._presetLookup[idx] = preset;\r\n\t            this._presetArray.push(preset);\r\n\t            this._$presetSelector.append(\"<option value=\\\"\" + idx + \"\\\">\" + preset.label + \"</option>\");\r\n\t        }\r\n\t        this._lockedList = [];\r\n\t        this._inRangeList = [];\r\n\t        this._atMinList = [];\r\n\t        this._atMaxList = [];\r\n\t        this.lockedCount = 10;\r\n\t        this.notLockedCount = 0;\r\n\t        this._splitSliderArray();\r\n\t        this._$presetSelector.change(function () {\r\n\t            _this.setPresetValues();\r\n\t            _this._runChangedCallback();\r\n\t        });\r\n\t        this._$regionSelector.change(function () {\r\n\t            _this._runChangedCallback();\r\n\t        });\r\n\t        this._$versionSelector.change(function () {\r\n\t            _this._runChangedCallback();\r\n\t        });\r\n\t        this._$presetSelector.trigger('change');\r\n\t        this._addEventListeners();\r\n\t    }\r\n\t    TipSliders.prototype._runChangedCallback = function () {\r\n\t        this._changedCallback(this.paramWeightsRegionVersion);\r\n\t    };\r\n\t    Object.defineProperty(TipSliders.prototype, \"changedCallback\", {\r\n\t        get: function () {\r\n\t            return this._changedCallback;\r\n\t        },\r\n\t        set: function (chg) {\r\n\t            this._changedCallback = chg;\r\n\t            this._runChangedCallback();\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    TipSliders.prototype.setPresetValues = function () {\r\n\t        var idx = this._$presetSelector.val() || '1';\r\n\t        var thePreset = this._presetLookup[idx];\r\n\t        for (var i = 0; i < thePreset.presets.length; i++) {\r\n\t            var presetValues = thePreset.presets[i];\r\n\t            var theSlider = this._sliderList[i];\r\n\t            theSlider.locked = true;\r\n\t            theSlider.setValAndDropDown(presetValues.value, presetValues.column);\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * split array into subarrays holding the sliders\r\n\t     * @private\r\n\t     */\r\n\t    TipSliders.prototype._splitSliderArray = function () {\r\n\t        this._lockedList = [];\r\n\t        this._inRangeList = [];\r\n\t        this._atMinList = [];\r\n\t        this._atMaxList = [];\r\n\t        for (var i = 0; i < this._sliderList.length; i++) {\r\n\t            var sld = this._sliderList[i];\r\n\t            if (sld.locked) {\r\n\t                this._lockedList.push(sld);\r\n\t            }\r\n\t            else if (sld.atMin) {\r\n\t                this._atMinList.push(sld);\r\n\t            }\r\n\t            else if (sld.atMax) {\r\n\t                this._atMaxList.push(sld);\r\n\t            }\r\n\t            else {\r\n\t                this._inRangeList.push(sld);\r\n\t            }\r\n\t        }\r\n\t        this.lockedCount = this._lockedList.length;\r\n\t        this.notLockedCount = this._sliderList.length - this.lockedCount;\r\n\t    };\r\n\t    /**\r\n\t     * handle remainder, recursive to take care of min max overshoots\r\n\t     * @param {number} remain the remainder\r\n\t     * @param {string} skipDomId - this dom id\r\n\t     * @private\r\n\t     */\r\n\t    TipSliders.prototype._handleRemainder = function (remain, skipDomId) {\r\n\t        remain = Number(remain.toFixed(1));\r\n\t        if (remain == 0) {\r\n\t            return;\r\n\t        }\r\n\t        this._splitSliderArray();\r\n\t        var canChangeArray = [];\r\n\t        for (var i = 0; i < this._inRangeList.length; i++) {\r\n\t            var sld = this._inRangeList[i];\r\n\t            if (sld.domId == skipDomId) {\r\n\t                continue;\r\n\t            }\r\n\t            canChangeArray.push(sld);\r\n\t        }\r\n\t        if (remain > 0) {\r\n\t            for (var i = 0; i < this._atMaxList.length; i++) {\r\n\t                var sld = this._atMaxList[i];\r\n\t                if (sld.domId == skipDomId) {\r\n\t                    continue;\r\n\t                }\r\n\t                canChangeArray.push(sld);\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            for (var i = 0; i < this._atMinList.length; i++) {\r\n\t                var sld = this._atMinList[i];\r\n\t                if (sld.domId == skipDomId) {\r\n\t                    continue;\r\n\t                }\r\n\t                canChangeArray.push(sld);\r\n\t            }\r\n\t        }\r\n\t        if (canChangeArray.length == 0) {\r\n\t            return;\r\n\t        }\r\n\t        var inc = -1 * Number((remain / canChangeArray.length).toFixed(1));\r\n\t        var newRemainder = 0;\r\n\t        for (var i = 0; i < canChangeArray.length; i++) {\r\n\t            newRemainder += canChangeArray[i].increment(inc);\r\n\t        }\r\n\t        this._handleRemainder(newRemainder, skipDomId);\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param {object} keyValList key and value list\r\n\t     */\r\n\t    TipSliders.prototype.setValues = function (keyValList) {\r\n\t        this.resetting = true;\r\n\t        for (var k in keyValList) {\r\n\t            if (keyValList.hasOwnProperty(k)) {\r\n\t                this._sliderLookup[k].setValAndDropDown(keyValList[k][0], keyValList[k][1]);\r\n\t            }\r\n\t        }\r\n\t        this.resetting = false;\r\n\t    };\r\n\t    /**\r\n\t     * get the weight sum\r\n\t     * @returns {number} the weight sum\r\n\t     */\r\n\t    TipSliders.prototype.getSum = function () {\r\n\t        var total = 0;\r\n\t        for (var i = 0; i < this._sliderList.length; i++) {\r\n\t            var sld = this._sliderList[i];\r\n\t            total += Number(sld.weight.toFixed(1));\r\n\t        }\r\n\t        return total;\r\n\t    };\r\n\t    /**\r\n\t     * get the parameter weights\r\n\t     * @returns {object} lookup with parameter weights\r\n\t     */\r\n\t    TipSliders.prototype.getParams = function () {\r\n\t        var paramWeights = {};\r\n\t        for (var i = 0; i < this._sliderList.length; i++) {\r\n\t            var sld = this._sliderList[i];\r\n\t            paramWeights[sld.selectedParam] = Number(sld.weight.toFixed(1));\r\n\t        }\r\n\t        return paramWeights;\r\n\t    };\r\n\t    TipSliders.prototype._addEventListeners = function () {\r\n\t        var ___this = this;\r\n\t        //change function\r\n\t        this.$container.find('input[type=\"range\"]').change(function () {\r\n\t            if (___this.resetting) {\r\n\t                return;\r\n\t            }\r\n\t            var $this = $(this);\r\n\t            var domId = this['id'];\r\n\t            var sldr = ___this._sliderLookup[domId];\r\n\t            var newValue = parseFloat($this.val());\r\n\t            var oldValue = sldr.weight;\r\n\t            var diff = newValue - oldValue;\r\n\t            diff = Number(diff.toFixed(1));\r\n\t            sldr.weight = Number(newValue.toFixed(1));\r\n\t            ___this._handleRemainder(diff, domId);\r\n\t            //cleanup, make sure the sum is still 100\r\n\t            var sum = Number(___this.getSum().toFixed(1));\r\n\t            if (sum > 100) {\r\n\t                loop1: while (true) {\r\n\t                    for (var i = 0; i < ___this._sliderList.length; i++) {\r\n\t                        var sld = ___this._sliderList[i];\r\n\t                        if (sld.domId == domId || sld.locked || sld.atMin) {\r\n\t                            continue;\r\n\t                        }\r\n\t                        sld.increment(-0.1);\r\n\t                        sum -= 0.1;\r\n\t                        if (sum.toFixed(1) == '100.0') {\r\n\t                            break loop1;\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            else if (sum < 100) {\r\n\t                loop1: while (true) {\r\n\t                    for (var i = 0; i < ___this._sliderList.length; i++) {\r\n\t                        var sld = ___this._sliderList[i];\r\n\t                        if (sld.domId == domId || sld.locked || sld.atMax) {\r\n\t                            continue;\r\n\t                        }\r\n\t                        sld.increment(0.1);\r\n\t                        sum += 0.1;\r\n\t                        if (sum.toFixed(1) == '100.0') {\r\n\t                            break loop1;\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            ___this._$presetSelector.val('0');\r\n\t            ___this._runChangedCallback();\r\n\t        });\r\n\t        //update the selected parameter when the selection is changed\r\n\t        $('.show-select').change(function () {\r\n\t            if (___this.resetting) {\r\n\t                return;\r\n\t            }\r\n\t            ___this._sliderLookup[this['id'].replace('_chg', '')].selectedParam = $(this).val();\r\n\t            ___this._$presetSelector.val('0');\r\n\t            ___this._runChangedCallback();\r\n\t        });\r\n\t        //lock the slider and update the reserved percent\r\n\t        this.$container.find('input[type=\"checkbox\"]').change(function () {\r\n\t            var domEl = this;\r\n\t            ___this._sliderLookup[domEl.id.replace('_chk', '')].locked = !domEl.checked;\r\n\t            ___this.reservedPercent = 0.0;\r\n\t            ___this.notLockedCount = 0;\r\n\t            var notLockedSliders = [];\r\n\t            for (var i = 0; i < ___this._sliderList.length; i++) {\r\n\t                var sld = ___this._sliderList[i];\r\n\t                if (sld.locked) {\r\n\t                    ___this.reservedPercent += sld.weight;\r\n\t                    continue;\r\n\t                }\r\n\t                notLockedSliders.push(sld);\r\n\t                ___this.notLockedCount++;\r\n\t            }\r\n\t            for (var i = 0; i < ___this._sliderList.length; i++) {\r\n\t                var sld = ___this._sliderList[i];\r\n\t                if (sld.locked) {\r\n\t                    continue;\r\n\t                }\r\n\t                sld.max = 100 - ___this.reservedPercent;\r\n\t            }\r\n\t            if (notLockedSliders.length == 1) {\r\n\t                notLockedSliders[0].min = notLockedSliders[0].weight;\r\n\t            }\r\n\t            else {\r\n\t                for (var i = 0; i < notLockedSliders.length; i++) {\r\n\t                    notLockedSliders[i].min = 0;\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    Object.defineProperty(TipSliders.prototype, \"paramWeightsRegionVersion\", {\r\n\t        get: function () {\r\n\t            return { paramWeights: this.getParams(),\r\n\t                region: this._$regionSelector.val(), mmVersion: this._$versionSelector.val() };\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return TipSliders;\r\n\t}());\r\n\texports.TipSliders = TipSliders;\r\n\tnm.Sliders = TipSliders;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = TipSliders;\r\n\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// slider-test.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0da249d398ab392d2e0f","/**\r\n * Created by gavorhes on 6/22/2016.\r\n */\r\nimport {TipSliders, TipPresetConfig, TipSliderConfig} from '../collections/Sliders';\r\nimport $ = require('jquery');\r\nimport ol = require('custom-ol');\r\n\r\n\r\n\r\nexport interface ITipConfig{\r\n    slidersConfig: Array<TipSliderConfig>;\r\n    presetConfig: Array<TipPresetConfig>;\r\n    tipSegmentLayerMinZoom: number;\r\n    sliders: TipSliders;\r\n    _map: ol.Map;\r\n    $loadingGif: JQuery;\r\n    $presetSelector: JQuery;\r\n    $regionSelector: JQuery;\r\n    $versionSelector: JQuery;\r\n    itsLayerCollection: any;\r\n    tipSegmentLayer: any;\r\n    metamanagerSegments: any;\r\n}\r\n\r\nexport const tipConfig = {\r\n    $loadingGif: $('#loading-gif'),\r\n    $presetSelector: $('#preset-selector'),\r\n    $regionSelector: $('#region-selector'),\r\n    $versionSelector: $('#version-selector'),\r\n    tipSegmentLayerMinZoom: 10,\r\n    slidersConfig: [\r\n            {\r\n                label: 'AADT',\r\n                yearOptions: [\r\n                    {label: '1', column: 'aadtyr_1'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'AADT Future',\r\n                yearOptions: [\r\n                    {label: '5', column: 'aadtyr_5'},\r\n                    {label: '10', column: 'aadtyr_10'},\r\n                    {label: '15', column: 'aadtyr_15'},\r\n                    {label: '20', column: 'aadtyr_20'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Growth',\r\n                yearOptions: [\r\n                    {label: '5', column: 'growth_5'},\r\n                    {label: '10', column: 'growth_10'},\r\n                    {label: '15', column: 'growth_15'},\r\n                    {label: '20', column: 'growth_20'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Truck',\r\n                yearOptions: [\r\n                    {label: '1', column: 'trkdyr_1'},\r\n                    {label: '20', column: 'trkdyr_20'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'LOS',\r\n                yearOptions: [\r\n                    {label: '1', column: 'losyr_1'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'LOS Future',\r\n                yearOptions: [\r\n                    {label: '5', column: 'losyr_5'},\r\n                    {label: '10', column: 'losyr_10'},\r\n                    {label: '15', column: 'losyr_15'},\r\n                    {label: '20', column: 'losyr_20'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Crash Rate',\r\n                yearOptions: [\r\n                    {label: 1, column: 'crash_rate'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Severity',\r\n                yearOptions: [\r\n                    {label: 1, column: 'crash_severity'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Weather',\r\n                yearOptions: [\r\n                    {label: 1, column: 'weather'}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Event',\r\n                yearOptions: [\r\n                    {label: 1, column: 'event'}\r\n                ]\r\n            }\r\n        ] as Array<TipSliderConfig>,\r\n    presetConfig: [\r\n            {\r\n                label: 'Default TIP',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 10.0},\r\n                    {column: 'aadtyr_20', value: 7.0},\r\n                    {column: 'growth_20', value: 7.0},\r\n                    {column: 'trkdyr_1', value: 4.0},\r\n                    {column: 'losyr_1', value: 12.0},\r\n                    {column: 'losyr_20', value: 12.0},\r\n                    {column: 'crash_rate', value: 15.0},\r\n                    {column: 'crash_severity', value: 13.0},\r\n                    {column: 'weather', value: 9.0},\r\n                    {column: 'event', value: 11.0}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Safety',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 20.0},\r\n                    {column: 'aadtyr_20', value: 0.0},\r\n                    {column: 'growth_20', value: 0.0},\r\n                    {column: 'trkdyr_1', value: 0.0},\r\n                    {column: 'losyr_1', value: 0.0},\r\n                    {column: 'losyr_20', value: 0.0},\r\n                    {column: 'crash_rate', value: 40.0},\r\n                    {column: 'crash_severity', value: 40.0},\r\n                    {column: 'weather', value: 0.0},\r\n                    {column: 'event', value: 0.0}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Mobility Present',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 25.0},\r\n                    {column: 'aadtyr_20', value: 25.0},\r\n                    {column: 'growth_20', value: 0.0},\r\n                    {column: 'trkdyr_1', value: 25.0},\r\n                    {column: 'losyr_1', value: 25.0},\r\n                    {column: 'losyr_20', value: 0.0},\r\n                    {column: 'crash_rate', value: 0.0},\r\n                    {column: 'crash_severity', value: 0.0},\r\n                    {column: 'weather', value: 0.0},\r\n                    {column: 'event', value: 0.0}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Mobility Future',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 0.0},\r\n                    {column: 'aadtyr_20', value: 25.0},\r\n                    {column: 'growth_20', value: 25.0},\r\n                    {column: 'trkdyr_1', value: 25.0},\r\n                    {column: 'losyr_1', value: 0.0},\r\n                    {column: 'losyr_20', value: 25.0},\r\n                    {column: 'crash_rate', value: 0.0},\r\n                    {column: 'crash_severity', value: 0.0},\r\n                    {column: 'weather', value: 0.0},\r\n                    {column: 'event', value: 0.0}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Service',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 30.0},\r\n                    {column: 'aadtyr_20', value: 0.0},\r\n                    {column: 'growth_20', value: 10.0},\r\n                    {column: 'trkdyr_1', value: 0.0},\r\n                    {column: 'losyr_1', value: 30.0},\r\n                    {column: 'losyr_20', value: 30.0},\r\n                    {column: 'crash_rate', value: 0.0},\r\n                    {column: 'crash_severity', value: 0.0},\r\n                    {column: 'weather', value: 0.0},\r\n                    {column: 'event', value: 0.0}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Freight Performance',\r\n                presets: [\r\n                    {column: 'aadtyr_1', value: 20.0},\r\n                    {column: 'aadtyr_20', value: 0.0},\r\n                    {column: 'growth_20', value: 0.0},\r\n                    {column: 'trkdyr_1', value: 60.0},\r\n                    {column: 'losyr_1', value: 20.0},\r\n                    {column: 'losyr_20', value: 0.0},\r\n                    {column: 'crash_rate', value: 0.0},\r\n                    {column: 'crash_severity', value: 0.0},\r\n                    {column: 'weather', value: 0.0},\r\n                    {column: 'event', value: 0.0}\r\n                ]\r\n            }\r\n        ] as Array<TipPresetConfig>\r\n\r\n} as ITipConfig;\r\n\r\ntipConfig.$presetSelector.append('<option value=\"0\" disabled=>Custom</option>');\r\n\r\nlet sliders = new TipSliders(tipConfig.slidersConfig, tipConfig.presetConfig, 'slider-container',\r\n    tipConfig.$presetSelector, tipConfig.$regionSelector, tipConfig.$regionSelector, (chg) => {console.log(chg)});\r\n\r\n// sliders.changedCallback = (chg) => {console.log(chg)};\r\n\r\nwindow['glob'] = sliders;\r\nwindow['hat'] = sliders;\r\nwindow['bird'] = sliders;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/_test/slider-test.ts","/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\n\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace){\r\n    \"use strict\";\r\n    if (typeof window['gv'] == 'undefined'){\r\n        window['gv'] = {};\r\n    }\r\n\r\n    let parts = namespace.split('.');\r\n    let nameSpace = window['gv'];\r\n\r\n    for (let i=0; i< parts.length; i++){\r\n        let newObject = nameSpace[parts[i]];\r\n\r\n        if (typeof newObject == 'undefined'){\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n\r\n    return nameSpace;\r\n}\r\n\r\nprovide('util');\r\nwindow['gv'].util.provide = provide;\r\n\r\nexport default provide;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/provide.ts","module.exports = $;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6","/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nimport $ = require('jquery');\r\n\r\nlet nm = provide('collections');\r\n\r\nexport interface TipSliderConfig {\r\n    label: string;\r\n    yearOptions: Array<{column: string, label: string}>\r\n}\r\n\r\nexport interface TipPresetConfig {\r\n    label: string;\r\n    presets: Array<{column: string, value: number}>\r\n}\r\n\r\nexport interface ChangeResponse{\r\n    paramWeights: Object;\r\n    region: string;\r\n    mmVersion: string;\r\n}\r\n\r\nexport interface ChangeCallback{\r\n    (chg: ChangeResponse): any\r\n}\r\n\r\n\r\nclass TipPresets implements TipPresetConfig {\r\n    label: string;\r\n    presets: Array<{column: string, value: number}>;\r\n    domId: string;\r\n\r\n    constructor(conf: TipPresetConfig) {\r\n        this.label = conf.label;\r\n        this.presets = conf.presets;\r\n        this.domId = this.label.replace(/ /g, '').toLowerCase();\r\n\r\n        let theSum = 0;\r\n\r\n        for (let pr of this.presets){\r\n            theSum += pr.value;\r\n        }\r\n\r\n        if (theSum != 100){\r\n            throw 'preset sum does note equal 100';\r\n        }\r\n    }\r\n}\r\n\r\n\r\nclass _Slider {\r\n    _min: number;\r\n    _max: number;\r\n    _locked: boolean;\r\n    atMin: boolean;\r\n    atMax: boolean;\r\n    _weightDefault: number;\r\n    _weight: number;\r\n    html: string;\r\n    domId: string;\r\n    name: string;\r\n\r\n    labelLow: JQuery;\r\n    labelHigh: JQuery;\r\n    labelVal: JQuery;\r\n    slider: JQuery;\r\n    selectionBox: JQuery;\r\n    chk: JQuery;\r\n\r\n    selectedParam: any;\r\n    selectedParamDefault: any;\r\n    _dropdownSelection: string;\r\n\r\n    /**\r\n     * Slider constructor\r\n     * @param sliderConfig - the configuration\r\n\r\n     */\r\n    constructor(sliderConfig: TipSliderConfig) {\r\n        this._dropdownSelection = null;\r\n        this._weight = null;\r\n        this.name = sliderConfig.label;\r\n        this.domId = this.name.toLowerCase().replace(/ /g, '-');\r\n\r\n        this._locked = false;\r\n\r\n        this._min = 0.0;\r\n        this._max = 100;\r\n\r\n        this.labelLow = null;\r\n        this.labelHigh = null;\r\n        this.labelVal = null;\r\n        this.slider = null;\r\n        this.chk = null;\r\n\r\n        this.atMin = false;\r\n        this.atMax = false;\r\n\r\n\r\n        let sel = `<select class=\"${sliderConfig.yearOptions.length == 1 ? 'hidden-select' : 'show-select'}\" id=\"${this.domId}_chg\">`;\r\n\r\n        for (let i = 0; i < sliderConfig.yearOptions.length; i++) {\r\n            let itm = sliderConfig.yearOptions[i];\r\n            sel += `<option value=\"${itm.column}\">${itm.label}</option>`;\r\n        }\r\n        sel += '</select>';\r\n\r\n        this.selectedParamDefault = this.selectedParam;\r\n\r\n        this.html = '<div class=\"slider-div\">' +\r\n            `<label for=\"${this.domId}_chk\" class=\"slider-label\">${this.name}</label>` +\r\n            sel + `<br>` +\r\n            `<input id=\"${this.domId}_chk\" type=\"checkbox\" title=\"Lock/Unlock Slider\">` +\r\n            `<label id=\"${this.domId}_low\" class=\"low-high\"></label>` +\r\n            `<input id=\"${this.domId}\" type=\"range\" value=\"50\" min=\"0\" max=\"100\" step=\"0.1\">` +\r\n            `<label id=\"${this.domId}_high\" class=\"low-high\"></label>` +\r\n            `<label id=\"${this.domId}_lbl\" for=\"${this.domId}\" class=\"percent-label\"></label></div>`;\r\n    }\r\n\r\n    /**\r\n     * add html to dom\r\n     * @param {jQuery} $container - container element\r\n     */\r\n    addToDom($container) {\r\n        $container.append(this.html);\r\n        this.labelLow = $(`#${this.domId}_low`);\r\n        this.labelHigh = $(`#${this.domId}_high`);\r\n        this.labelVal = $(`#${this.domId}_lbl`);\r\n        this.slider = $(`#${this.domId}`);\r\n        this.selectionBox = $(`#${this.domId}_chg`);\r\n        this.chk = $(`#${this.domId}_chk`);\r\n    }\r\n\r\n    /**\r\n     * increment the slider\r\n     * @param {number} delta change delta\r\n     * @returns {number} the remainder not able to be allocated to this slider\r\n     */\r\n    increment(delta) {\r\n        let remainder = 0;\r\n        delta = Number(delta.toFixed(1));\r\n\r\n        this._weight += delta;\r\n        if (this._weight < this._min) {\r\n            remainder = this._min - this._weight;\r\n            this._weight = this._min;\r\n            this.atMin = true;\r\n        } else if (this._weight > this._max) {\r\n            remainder = this._max - this._weight;\r\n            this._weight = this._max;\r\n            this.atMax = true;\r\n        } else {\r\n            this.atMin = false;\r\n            this.atMax = false;\r\n        }\r\n\r\n        this.slider.val(this._weight.toFixed(1));\r\n        this.labelVal.html(this._weight.toFixed(1) + '%');\r\n\r\n        return remainder;\r\n    }\r\n\r\n    /**\r\n     * set the value and drop down\r\n     * @param {number} newVal the new value\r\n     * @param {string} selectedParam the selected parameter\r\n     */\r\n    setValAndDropDown(newVal: number, selectedParam: string) {\r\n        this.min = 0;\r\n        this.max = 100;\r\n        this.weight = newVal;\r\n        this.slider.val(newVal.toFixed(1));\r\n        this.selectionBox.val(selectedParam);\r\n        this.selectedParam = selectedParam;\r\n        this.locked = true;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {boolean} if locked\r\n     */\r\n    get locked() {\r\n        return this._locked;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} val if locked\r\n     */\r\n    set locked(val) {\r\n        this._locked = val;\r\n        this.slider.prop('disabled', this._locked);\r\n        this.selectionBox.prop('disabled', this._locked);\r\n        this.chk.prop('checked', !this._locked);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number} the minimum\r\n     */\r\n    get min() {\r\n        return this._min;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {number} newVal new minimum\r\n     */\r\n    set min(newVal) {\r\n        this._min = Number(newVal.toFixed(1));\r\n        if (this._min < 0) {\r\n            this._min = 0;\r\n        }\r\n        this.labelLow.html(this._min.toFixed(1));\r\n        this.slider.attr('min', this._min.toFixed(1));\r\n        this.atMin = this._weight == this._min;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number} the maximum\r\n     */\r\n    get max() {\r\n        return this._max;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {number} newVal the maximum\r\n     */\r\n    set max(newVal) {\r\n        this._max = Number(newVal.toFixed(1));\r\n        if (this._max > 100) {\r\n            this._max = 100.0;\r\n        }\r\n        this.labelHigh.html(this._max.toFixed(1));\r\n        this.slider.attr('max', this._max.toFixed(1));\r\n        this.atMax = this._weight == this._max;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number} the weight\r\n     */\r\n    get weight() {\r\n        return this._weight;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {number} newVal the weight\r\n     */\r\n    set weight(newVal) {\r\n        this._weight = Number(newVal.toFixed(1));\r\n        this.labelVal.html(this._weight.toFixed(1) + '%');\r\n        if (this._weight <= this._min) {\r\n            this.atMin = true;\r\n            this.atMax = false;\r\n        } else if (this._weight >= this._max) {\r\n            this.atMin = false;\r\n            this.atMax = true;\r\n        } else {\r\n            this.atMin = false;\r\n            this.atMax = false;\r\n        }\r\n    }\r\n}\r\n\r\nnm._Slider = _Slider;\r\n\r\n\r\n/**\r\n * class to keep track of the sliders\r\n */\r\nexport class TipSliders {\r\n    $container: JQuery;\r\n    reservedPercent: number;\r\n    lockedCount: number;\r\n    notLockedCount: number;\r\n    private _sliderList: Array<_Slider>;\r\n    private _sliderLookup: {[s: string]: _Slider};\r\n    private resetting: boolean;\r\n    private _changedCallback: ChangeCallback;\r\n\r\n    private _lockedList: Array<_Slider>;\r\n    private _inRangeList: Array<_Slider>;\r\n    private _atMinList: Array<_Slider>;\r\n    private _atMaxList: Array<_Slider>;\r\n\r\n    private _presetArray: Array<TipPresets>;\r\n    private _presetLookup: {[s: string]: TipPresets};\r\n\r\n    private _$presetSelector: JQuery;\r\n    private _$regionSelector: JQuery;\r\n    private _$versionSelector: JQuery;\r\n\r\n    /**\r\n     *\r\n     * @param sliderConfigs\r\n     * @param presetConfig\r\n     * @param divId\r\n     * @param presetSelector\r\n     * @param regionSelector\r\n     * @param versionSelector\r\n     * @param chgCallback\r\n     */\r\n    constructor(sliderConfigs: Array<TipSliderConfig>, presetConfig: Array<TipPresetConfig>,\r\n                divId: string, presetSelector: JQuery, regionSelector: JQuery, versionSelector: JQuery,\r\n                chgCallback?: ChangeCallback) {\r\n\r\n        this.resetting = false;\r\n        this.reservedPercent = 0.0;\r\n        this.$container = $('#' + divId);\r\n        this.$container.addClass('slider-container');\r\n\r\n        this._changedCallback = typeof chgCallback == 'function' ? chgCallback : () => {};\r\n\r\n        this._$presetSelector = presetSelector;\r\n        this._$regionSelector = regionSelector;\r\n        this._$versionSelector = versionSelector;\r\n\r\n        this._sliderList = [];\r\n        this._sliderLookup = {};\r\n\r\n        for (let i = 0; i < sliderConfigs.length; i++) {\r\n            let sld = new _Slider(sliderConfigs[i]);\r\n            this._sliderList.push(sld);\r\n            this._sliderLookup[sld.domId] = sld;\r\n            sld.addToDom(this.$container);\r\n        }\r\n\r\n        this._presetArray = [];\r\n        this._presetLookup = {};\r\n\r\n        for (let i = 0; i < presetConfig.length; i++) {\r\n            let preset = new TipPresets(presetConfig[i]);\r\n\r\n            let idx = (i + 1).toFixed();\r\n\r\n            this._presetLookup[idx] = preset;\r\n            this._presetArray.push(preset);\r\n            this._$presetSelector.append(`<option value=\"${idx}\">${preset.label}</option>`);\r\n        }\r\n\r\n\r\n        this._lockedList = [];\r\n        this._inRangeList = [];\r\n        this._atMinList = [];\r\n        this._atMaxList = [];\r\n\r\n        this.lockedCount = 10;\r\n        this.notLockedCount = 0;\r\n\r\n        this._splitSliderArray();\r\n\r\n\r\n        this._$presetSelector.change(() => {\r\n            this.setPresetValues();\r\n            this._runChangedCallback();\r\n        });\r\n\r\n        this._$regionSelector.change(() => {\r\n            this._runChangedCallback();\r\n        });\r\n\r\n        this._$versionSelector.change(() => {\r\n            this._runChangedCallback();\r\n        });\r\n\r\n        this._$presetSelector.trigger('change');\r\n\r\n        this._addEventListeners();\r\n    }\r\n\r\n    _runChangedCallback(){\r\n        this._changedCallback(this.paramWeightsRegionVersion);\r\n    }\r\n\r\n    get changedCallback(): ChangeCallback{\r\n        return this._changedCallback\r\n    }\r\n\r\n    set changedCallback(chg: ChangeCallback){\r\n        this._changedCallback = chg;\r\n        this._runChangedCallback();\r\n    }\r\n\r\n    setPresetValues() {\r\n        let idx = this._$presetSelector.val() || '1';\r\n\r\n        let thePreset = this._presetLookup[idx];\r\n\r\n        for (let i = 0; i < thePreset.presets.length; i++) {\r\n            let presetValues = thePreset.presets[i];\r\n            let theSlider = this._sliderList[i];\r\n\r\n            theSlider.locked = true;\r\n            theSlider.setValAndDropDown(presetValues.value, presetValues.column);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * split array into subarrays holding the sliders\r\n     * @private\r\n     */\r\n    _splitSliderArray() {\r\n        this._lockedList = [];\r\n        this._inRangeList = [];\r\n        this._atMinList = [];\r\n        this._atMaxList = [];\r\n\r\n        for (let i = 0; i < this._sliderList.length; i++) {\r\n            let sld = this._sliderList[i];\r\n\r\n            if (sld.locked) {\r\n                this._lockedList.push(sld);\r\n            } else if (sld.atMin) {\r\n                this._atMinList.push(sld);\r\n            } else if (sld.atMax) {\r\n                this._atMaxList.push(sld);\r\n            } else {\r\n                this._inRangeList.push(sld);\r\n            }\r\n        }\r\n        this.lockedCount = this._lockedList.length;\r\n        this.notLockedCount = this._sliderList.length - this.lockedCount;\r\n    }\r\n\r\n    /**\r\n     * handle remainder, recursive to take care of min max overshoots\r\n     * @param {number} remain the remainder\r\n     * @param {string} skipDomId - this dom id\r\n     * @private\r\n     */\r\n    _handleRemainder(remain, skipDomId) {\r\n\r\n        remain = Number(remain.toFixed(1));\r\n        if (remain == 0) {\r\n            return;\r\n        }\r\n\r\n        this._splitSliderArray();\r\n\r\n        let canChangeArray = [];\r\n        for (let i = 0; i < this._inRangeList.length; i++) {\r\n            let sld = this._inRangeList[i];\r\n            if (sld.domId == skipDomId) {\r\n                continue;\r\n            }\r\n            canChangeArray.push(sld);\r\n        }\r\n\r\n        if (remain > 0) {\r\n            for (let i = 0; i < this._atMaxList.length; i++) {\r\n                let sld = this._atMaxList[i];\r\n                if (sld.domId == skipDomId) {\r\n                    continue;\r\n                }\r\n                canChangeArray.push(sld);\r\n            }\r\n        } else {\r\n            for (let i = 0; i < this._atMinList.length; i++) {\r\n                let sld = this._atMinList[i];\r\n                if (sld.domId == skipDomId) {\r\n                    continue;\r\n                }\r\n                canChangeArray.push(sld);\r\n            }\r\n        }\r\n\r\n        if (canChangeArray.length == 0) {\r\n            return;\r\n        }\r\n\r\n        let inc = -1 * Number((remain / canChangeArray.length).toFixed(1));\r\n\r\n        let newRemainder = 0;\r\n        for (let i = 0; i < canChangeArray.length; i++) {\r\n            newRemainder += canChangeArray[i].increment(inc);\r\n        }\r\n\r\n        this._handleRemainder(newRemainder, skipDomId);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {object} keyValList key and value list\r\n     */\r\n    setValues(keyValList) {\r\n        this.resetting = true;\r\n        for (let k in keyValList) {\r\n            if (keyValList.hasOwnProperty(k)) {\r\n                this._sliderLookup[k].setValAndDropDown(keyValList[k][0], keyValList[k][1]);\r\n            }\r\n        }\r\n        this.resetting = false;\r\n    }\r\n\r\n    /**\r\n     * get the weight sum\r\n     * @returns {number} the weight sum\r\n     */\r\n    getSum() {\r\n        let total = 0;\r\n        for (let i = 0; i < this._sliderList.length; i++) {\r\n            let sld = this._sliderList[i];\r\n            total += Number(sld.weight.toFixed(1));\r\n        }\r\n\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * get the parameter weights\r\n     * @returns {object} lookup with parameter weights\r\n     */\r\n    getParams() {\r\n        let paramWeights = {};\r\n        for (let i = 0; i < this._sliderList.length; i++) {\r\n            let sld = this._sliderList[i];\r\n            paramWeights[sld.selectedParam] = Number(sld.weight.toFixed(1));\r\n        }\r\n\r\n        return paramWeights;\r\n    }\r\n\r\n    _addEventListeners() {\r\n        let ___this = this;\r\n\r\n\r\n        //change function\r\n        this.$container.find('input[type=\"range\"]').change(function () {\r\n                if (___this.resetting) {\r\n                    return;\r\n                }\r\n\r\n                let $this = $(this);\r\n                let domId = this['id'];\r\n                let sldr = ___this._sliderLookup[domId];\r\n\r\n                let newValue = parseFloat($this.val());\r\n\r\n                let oldValue = sldr.weight;\r\n                let diff = newValue - oldValue;\r\n                diff = Number(diff.toFixed(1));\r\n\r\n                sldr.weight = Number(newValue.toFixed(1));\r\n\r\n                ___this._handleRemainder(diff, domId);\r\n\r\n                //cleanup, make sure the sum is still 100\r\n                let sum = Number(___this.getSum().toFixed(1));\r\n\r\n                if (sum > 100) {\r\n                    loop1:\r\n                        while (true) {\r\n                            for (let i = 0; i < ___this._sliderList.length; i++) {\r\n                                let sld = ___this._sliderList[i];\r\n                                if (sld.domId == domId || sld.locked || sld.atMin) {\r\n                                    continue;\r\n                                }\r\n                                sld.increment(-0.1);\r\n                                sum -= 0.1;\r\n                                if (sum.toFixed(1) == '100.0') {\r\n                                    break loop1;\r\n                                }\r\n                            }\r\n                        }\r\n                } else if (sum < 100) {\r\n                    loop1:\r\n                        while (true) {\r\n                            for (let i = 0; i < ___this._sliderList.length; i++) {\r\n                                let sld = ___this._sliderList[i];\r\n                                if (sld.domId == domId || sld.locked || sld.atMax) {\r\n                                    continue;\r\n                                }\r\n                                sld.increment(0.1);\r\n                                sum += 0.1;\r\n                                if (sum.toFixed(1) == '100.0') {\r\n                                    break loop1;\r\n                                }\r\n                            }\r\n                        }\r\n                }\r\n\r\n                ___this._$presetSelector.val('0');\r\n                ___this._runChangedCallback();\r\n            }\r\n        );\r\n\r\n        //update the selected parameter when the selection is changed\r\n        $('.show-select').change(function () {\r\n            if (___this.resetting) {\r\n                return;\r\n            }\r\n            ___this._sliderLookup[this['id'].replace('_chg', '')].selectedParam = $(this).val();\r\n\r\n            ___this._$presetSelector.val('0');\r\n\r\n            ___this._runChangedCallback();\r\n\r\n        });\r\n\r\n        //lock the slider and update the reserved percent\r\n        this.$container.find('input[type=\"checkbox\"]').change(function () {\r\n            let domEl = this;\r\n\r\n            ___this._sliderLookup[domEl.id.replace('_chk', '')].locked = !domEl.checked;\r\n            ___this.reservedPercent = 0.0;\r\n            ___this.notLockedCount = 0;\r\n\r\n            let notLockedSliders = [];\r\n\r\n            for (let i = 0; i < ___this._sliderList.length; i++) {\r\n                let sld = ___this._sliderList[i];\r\n                if (sld.locked) {\r\n                    ___this.reservedPercent += sld.weight;\r\n                    continue;\r\n                }\r\n                notLockedSliders.push(sld);\r\n                ___this.notLockedCount++;\r\n            }\r\n\r\n            for (let i = 0; i < ___this._sliderList.length; i++) {\r\n                let sld = ___this._sliderList[i];\r\n                if (sld.locked) {\r\n                    continue;\r\n                }\r\n                sld.max = 100 - ___this.reservedPercent;\r\n            }\r\n\r\n            if (notLockedSliders.length == 1) {\r\n                notLockedSliders[0].min = notLockedSliders[0].weight;\r\n            } else {\r\n                for (let i = 0; i < notLockedSliders.length; i++) {\r\n                    notLockedSliders[i].min = 0;\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    get paramWeightsRegionVersion(): ChangeResponse{\r\n        return {paramWeights: this.getParams(),\r\n            region: this._$regionSelector.val() as string, mmVersion: this._$versionSelector.val() as string}\r\n    }\r\n}\r\n\r\nnm.Sliders = TipSliders;\r\nexport default TipSliders;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/Sliders.ts"],"sourceRoot":""}