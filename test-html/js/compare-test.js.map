{"version":3,"sources":["webpack:///compare-test.js","webpack:///webpack/bootstrap 0da249d398ab392d2e0f?7457**","webpack:///./src/_test/compare-test.ts","webpack:///./src/util/provide.ts?5c82**","webpack:///external \"$\"?57aa**","webpack:///external \"ol\"?81ed**","webpack:///./src/util/makeGuid.ts?e80e**","webpack:///./src/olHelpers/mapPopup.ts?5d6c**","webpack:///./src/olHelpers/mapInteractionBase.ts?f419**","webpack:///./src/olHelpers/mapMove.ts?6a2b**","webpack:///./src/layers/LayerBase.ts?bf94**","webpack:///./src/util/checkDefined.ts?bcd7**","webpack:///./src/olHelpers/mapMoveCls.ts?cd45**","webpack:///./src/olHelpers/mapPopupCls.ts?e3f7**","webpack:///./src/olHelpers/quickMap.ts?1069**","webpack:///./src/olHelpers/quickMapBase.ts?fb65**","webpack:///./src/olHelpers/zoomResolutionConvert.ts?dd4b**","webpack:///./src/olHelpers/esriToOlStyle.ts?9363*","webpack:///./src/layers/LayerEsriMapServer.ts?9c85*","webpack:///./src/olHelpers/layerSwipe.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","quickMap_1","layerSwipe_1","LayerEsriMapServer_1","map","quickMap","swiper","default","wisDotRegions","LayerEsriMapServer","minZoom","maxZoom","name","metamanagerSegments","visible","truckSpeed2014","showLayers","truckSpeed2015","addLayer","olLayer","addLeftLayer","addRightLayer","provide","namespace","window","parts","split","nameSpace","i","length","newObject","util","Object","defineProperty","value","$","ol","makeGuid","replace","r","Math","random","v","toString","provide_1","nm","mapPopupCls_1","mapPopup","MapInteractionBase","subtype","this","_map","_initialized","_subtype","prototype","init","theMap","get","enumerable","configurable","_checkInit","initialized","msg","alert","console","log","checkInit","mapMoveCls_1","mapMove","zoomResolutionConvert","makeGuid_1","LayerBase","url","options","_url","_params","params","_legendCollapse","legendCollapse","_legendCheckbox","legendCheckbox","_name","animate","_opacity","opacity","_visible","_source","undefined","_olLayer","_loaded","_maxResolution","zoomToResolution","_minResolution","_minZoom","_maxZoom","_zIndex","zIndex","loadCallback","_legendContent","_$legendDiv","_applyCollapseCalled","_addLegendContent","legendContent","_load","getLegendDiv","additionalContent","addCollapse","indexOf","append","applyCollapse","addLegendContent","$expander","find","click","$this","siblings","slideToggle","hasClass","removeClass","html","addClass","trigger","refresh","source","_id","set","newId","_animate","newVal","newParams","visibility","setVisible","setOpacity","newName","getSource","newZ","setZIndex","getOlLayer","undefinedOrNull","input","definedAndNotNull","__extends","d","b","__","constructor","hasOwnProperty","create","mapInteractionBase_1","checkDefined","MapMoveCls","_super","_this","_arrLyrRequest","_arrLyrTimeout","_arrLayer","_lookupLayer","_mapMoveCallbacks","_mapMoveCallbacksLookup","_mapMoveCallbackDelays","_mapMoveCallbackContext","_mapMoveCallbackTimeout","_mapExtent","_zoomLevel","getView","on","e","_updateMapExtent","triggerLyrLoad","type","triggerMoveCallback","theView","getZoom","extentArray","calculateExtent","getSize","minX","minY","maxX","maxY","lyr","index","eventType","clearTimeout","abort","callbackFunc","mapMoveBefore","mapMoveMakeGetParams","__this_1","innerFunction","theLayer","theIndex","_innerThis","mapMoveParams","mapMoveCallback","fail","jqXHR","statusText","always","clear","setTimeout","onDemandDelay","ind","functionId","ctx","theFunc","__this","f","addVectorLayer","triggerOnAdd","push","addCallback","func","context","delay","FeatureLayerProperties","feature","layer","layerIndex","selectionLayer","esriLayerName","popupContent","MapPopupCls","_arrPopupLayerIds","_arrPopupLayerNames","_arrPopupLayers","_arrPopupOlLayers","_arrPopupContentFunction","_$popupContainer","_$popupContent","_$popupCloser","_popupOverlay","_selectionLayers","_selectionLayerLookup","_mapClickFunctions","_popupChangedFunctions","_esriMapServiceLayers","_popupOpen","_popupCoordinate","_passThroughLayerFeatureArray","_currentPopupIndex","_popupContentLength","$map","target","getTarget","_ease","n","easing","inAndOut","Overlay","element","autoPan","autoPanAnimation","duration","getCenter","addOverlay","evt","closePopup","queryParams","geometry","join","geometryType","layers","sr","getProjection","getCode","mapExtent","imageDisplay","returnGeometry","tolerance","_i","_a","l","getPopupInfo","layerFeatureObjectArray","_featuresAtPixel","featObj","props","getProperties","popupContentResponse","addFeature","popupHtml","_triggerFeatSelect","nextPopup","setPosition","scrollTop","pixel","getEventPixel","hit","hasFeatureAtPixel","lyrCandidate","mapElement","getTargetElement","style","cursor","$currentPopupItemNumber","$innerPopup","$layerNameSpan","clearSelection","lyrFeatObj","toFixed","layerName","addMapServicePopupContent","esriName","featLayerObject","forEachFeatureAtPixel","lyrIndex","blur","addPopupChangedFunction","chgFunction","_addPopupLayer","selectionStyle","color","width","theStyle","olStyle","Style","stroke","Stroke","image","Circle","radius","fill","Fill","Vector","addVectorPopup","popupContentFunction","removeVectorPopup","idx","splice","addMapServicePopup","addMapClickFunction","quickMapBase_1","quickMapBase","mapMove_1","mapPopup_1","divId","center","x","y","zoom","baseSwitcher","fullScreen","$mapDiv","css","osmLayer","Tile","OSM","geom","Point","proj","Projection","code","transform","coordinates","getCoordinates","controls","control","defaults","attributionOptions","collapsible","view","View","Map","addControl","FullScreen","zoomLevel","_zoomResLookup","resolutionToZoom","resolution","_colorArrayToRgba","colorArray","htmlEscape","str","String","makeFeatureServiceLegendAndSymbol","esriResponse","renderer","drawingInfo","symbolLegendOut","SingleSymbol","PointSymbol","LineSymbol","PolygonSymbol","UniqueValueSymbol","legend","legendHtml","mapServiceLegendItem","lyrObject","skipLayerNameAndExpander","legendItems","makeMapServiceLegend","newLegendHtml","CommonSymbol","symbolObj","innerColor","outerColor","outline","outlineWidth","size","Icon","src","lineWidth","SymbolGenerator","SymbolClass","symbol","uniqueValueInfos","propertyName","defaultSymbol","defaultStyle","defaultLabelHtml","valueArray","labelArray","legendArray","propertyStyleLookup","uniqueVal","uniqueSym","returnValue","checkProperties","checkProperty","_b","_c","h","LayerBase_1","esriToOl","TileArcGISRest","minResolution","maxResolution","addPopup","_esriFormat","format","EsriJSON","_popupRequest","urlCopy","newHtml","a","attrVal","toLowerCase","attr","slice","readFeature","LayerSwipe","sliderContent","leftLayers","rightLayers","_percentRight","offset","$mapElement","$swiper","percentRight","dragging","mouseleave","bind","preventDefault","mousedown","offsetX","mouseup","mousemove","mapLeft","position","left","mapWidth","pageX","event","canvas","save","beginPath","rect","height","clip","restore","percent","maxed","render"],"mappings":"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","file":"compare-test.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/**\r\n\t * Created by gavorhes on 6/1/2016.\r\n\t */\r\n\tvar quickMap_1 = __webpack_require__(12);\r\n\tvar layerSwipe_1 = __webpack_require__(31);\r\n\tvar LayerEsriMapServer_1 = __webpack_require__(16);\r\n\tvar map = quickMap_1.quickMap();\r\n\tvar swiper = new layerSwipe_1.default(map);\r\n\tvar wisDotRegions = new LayerEsriMapServer_1.LayerEsriMapServer('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/Metamanager_regions/MapServer', {\r\n\t    minZoom: 6,\r\n\t    maxZoom: 12,\r\n\t    name: 'WisDOT Regions'\r\n\t});\r\n\tvar metamanagerSegments = new LayerEsriMapServer_1.LayerEsriMapServer('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/MM_All_Segments/MapServer', {\r\n\t    minZoom: 7,\r\n\t    visible: true,\r\n\t    name: 'Metamanager Segments'\r\n\t});\r\n\tvar truckSpeed2014 = new LayerEsriMapServer_1.LayerEsriMapServer('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/NPMRDS/compareDynamic/MapServer', {\r\n\t    minZoom: 7,\r\n\t    visible: true,\r\n\t    name: 'truck2014',\r\n\t    showLayers: [8]\r\n\t});\r\n\tvar truckSpeed2015 = new LayerEsriMapServer_1.LayerEsriMapServer('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/NPMRDS/compareDynamic/MapServer', {\r\n\t    minZoom: 7,\r\n\t    visible: true,\r\n\t    name: 'truck2015',\r\n\t    showLayers: [9]\r\n\t});\r\n\tmap.addLayer(wisDotRegions.olLayer);\r\n\tmap.addLayer(truckSpeed2014.olLayer);\r\n\tmap.addLayer(truckSpeed2015.olLayer);\r\n\tmap.addLayer(metamanagerSegments.olLayer);\r\n\tswiper.addLeftLayer(wisDotRegions);\r\n\tswiper.addRightLayer(metamanagerSegments);\r\n\tswiper.addLeftLayer(truckSpeed2014);\r\n\tswiper.addRightLayer(truckSpeed2015);\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t/**\r\n\t * Created by gavorhes on 12/10/2015.\r\n\t */\r\n\t\"use strict\";\r\n\t/**\r\n\t * create a namespace on the gv object\r\n\t * @param {string} namespace to create\r\n\t * @returns {object} object representing the namespace\r\n\t */\r\n\tfunction provide(namespace) {\r\n\t    \"use strict\";\r\n\t    if (typeof window['gv'] == 'undefined') {\r\n\t        window['gv'] = {};\r\n\t    }\r\n\t    var parts = namespace.split('.');\r\n\t    var nameSpace = window['gv'];\r\n\t    for (var i = 0; i < parts.length; i++) {\r\n\t        var newObject = nameSpace[parts[i]];\r\n\t        if (typeof newObject == 'undefined') {\r\n\t            nameSpace[parts[i]] = {};\r\n\t        }\r\n\t        nameSpace = nameSpace[parts[i]];\r\n\t    }\r\n\t    return nameSpace;\r\n\t}\r\n\tprovide('util');\r\n\twindow['gv'].util.provide = provide;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = provide;\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = $;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = ol;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 11/3/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar nm = provide_1.default('util');\r\n\t/**\r\n\t * guids are used to uniquely identify groups and features\r\n\t * @returns {string} a new guid\r\n\t */\r\n\tfunction makeGuid() {\r\n\t    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n\t        .replace(/[xy]/g, function (c) {\r\n\t        var r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n\t        return v.toString(16);\r\n\t    });\r\n\t}\r\n\tnm.makeGuid = makeGuid;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = makeGuid;\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 11/3/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar mapPopupCls_1 = __webpack_require__(11);\r\n\t/**\r\n\t * The single popup object catch is that it is common to multimap pages\r\n\t * @type {MapPopupCls}\r\n\t */\r\n\texports.mapPopup = new mapPopupCls_1.default();\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = exports.mapPopup;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/**\r\n\t * Created by gavorhes on 12/8/2015.\r\n\t */\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar nm = provide_1.default('olHelpers');\r\n\t/**\r\n\t * base interaction\r\n\t */\r\n\tvar MapInteractionBase = (function () {\r\n\t    /**\r\n\t     * map interaction base\r\n\t     * @param subtype - the interaction subtype\r\n\t     */\r\n\t    function MapInteractionBase(subtype) {\r\n\t        this._map = null;\r\n\t        this._initialized = false;\r\n\t        this._subtype = subtype;\r\n\t    }\r\n\t    /**\r\n\t     * base initializer, returns true for already initialized\r\n\t     * @param theMap - the ol Map\r\n\t     * @returns true for already initialized\r\n\t     */\r\n\t    MapInteractionBase.prototype.init = function (theMap) {\r\n\t        if (!this._initialized) {\r\n\t            this._map = theMap;\r\n\t            this._initialized = true;\r\n\t        }\r\n\t    };\r\n\t    Object.defineProperty(MapInteractionBase.prototype, \"map\", {\r\n\t        /**\r\n\t         * get reference to the ol map object\r\n\t         * @returns {ol.Map} the map object\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._map;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(MapInteractionBase.prototype, \"initialized\", {\r\n\t        /**\r\n\t         * get if is initialized\r\n\t         * @returns {boolean} is initialized\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._initialized;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    /**\r\n\t     * Check the initialization status and throw exception if not valid yet\r\n\t     * @protected\r\n\t     */\r\n\t    MapInteractionBase.prototype._checkInit = function () {\r\n\t        if (!this.initialized) {\r\n\t            var msg = this._subtype + \" object not initialized\";\r\n\t            alert(msg);\r\n\t            console.log(msg);\r\n\t            throw msg;\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * Check the initialization status and throw exception if not valid yet\r\n\t     */\r\n\t    MapInteractionBase.prototype.checkInit = function () {\r\n\t        this._checkInit();\r\n\t    };\r\n\t    return MapInteractionBase;\r\n\t}());\r\n\texports.MapInteractionBase = MapInteractionBase;\r\n\tnm.MapInteractionBase = MapInteractionBase;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = MapInteractionBase;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 11/3/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar mapMoveCls_1 = __webpack_require__(10);\r\n\t/**\r\n\t * The single map move object catch is that it is common to multimap pages\r\n\t * @type {MapMoveCls}\r\n\t */\r\n\texports.mapMove = new mapMoveCls_1.default();\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = exports.mapMove;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar zoomResolutionConvert = __webpack_require__(14);\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar makeGuid_1 = __webpack_require__(4);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('layers');\r\n\t/**\r\n\t * The base layer class\r\n\t * @abstract\r\n\t */\r\n\tvar LayerBase = (function () {\r\n\t    /**\r\n\t     * The base layer for all others\r\n\t     * @param {string} url - url for source\r\n\t     * @param {object} options - config\r\n\t     * @param {string} [options.id=makeGuid()] - layer id\r\n\t     * @param {string} [options.name=Unnamed Layer] - layer name\r\n\t     * @param {number} [options.opacity=1] - opacity\r\n\t     * @param {boolean} [options.visible=true] - default visible\r\n\t     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n\t     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n\t     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n\t     * @param {number} [options.zIndex=0] - the z index for the layer\r\n\t     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n\t     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n\t     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n\t     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n\t     */\r\n\t    function LayerBase(url, options) {\r\n\t        if (options === void 0) { options = {}; }\r\n\t        options = options || {};\r\n\t        if (typeof url !== 'string') {\r\n\t            throw 'Invalid URL';\r\n\t        }\r\n\t        this._url = url;\r\n\t        this._params = typeof options.params == 'object' ? options.params : {};\r\n\t        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n\t        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n\t        this.id = options.id || makeGuid_1.default();\r\n\t        this._name = options.name || 'Unnamed Layer';\r\n\t        this.animate = false;\r\n\t        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n\t        if (this._opacity > 1) {\r\n\t            this._opacity = 1;\r\n\t        }\r\n\t        else if (this._opacity < 0) {\r\n\t            this._opacity = 0;\r\n\t        }\r\n\t        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n\t        this._source = undefined;\r\n\t        /**\r\n\t         *\r\n\t         * @protected\r\n\t         */\r\n\t        this._olLayer = undefined;\r\n\t        this._loaded = false;\r\n\t        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n\t        if (typeof this._maxResolution !== 'undefined') {\r\n\t            this._maxResolution += 0.00001;\r\n\t        }\r\n\t        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n\t        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n\t        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n\t        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n\t        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n\t        };\r\n\t        this._legendContent = '';\r\n\t        if (this._legendCheckbox) {\r\n\t            this._legendContent += \"<input type=\\\"checkbox\\\" \" + (this.visible ? 'checked' : '') + \" \" +\r\n\t                (\"class=\\\"legend-check\\\" id=\\\"\" + this.id + \"-legend-layer-check\\\"><span></span>\");\r\n\t            this._legendContent += \"<label for=\\\"\" + this.id + \"-legend-layer-check\\\" class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n\t        }\r\n\t        else {\r\n\t            this._legendContent += \"<label class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n\t        }\r\n\t        this._$legendDiv = null;\r\n\t        this._applyCollapseCalled = false;\r\n\t        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n\t    }\r\n\t    /**\r\n\t     * base load function, sets _loaded = true if it is not already\r\n\t     * @protected\r\n\t     * @returns {boolean} if already loaded\r\n\t     */\r\n\t    LayerBase.prototype._load = function () {\r\n\t        if (this.loaded == true) {\r\n\t            return true;\r\n\t        }\r\n\t        else {\r\n\t            this._loaded = true;\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * Get the legend html, be sure to only add to the DOM once\r\n\t     * @returns {string} html for layer wrapped in a div\r\n\t     */\r\n\t    LayerBase.prototype.getLegendDiv = function () {\r\n\t        return \"<div class=\\\"legend-layer-div\\\" id=\\\"\" + this.id + \"-legend-layer-div\\\">\" + this._legendContent + \"</div>\";\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param additionalContent - additional content to add to legend\r\n\t     * @private\r\n\t     */\r\n\t    LayerBase.prototype._addLegendContent = function (additionalContent) {\r\n\t        if (additionalContent === void 0) { additionalContent = ''; }\r\n\t        var addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n\t        if (addCollapse) {\r\n\t            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n\t        }\r\n\t        this._legendContent += additionalContent;\r\n\t        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n\t        if (this._$legendDiv.length > 0) {\r\n\t            this._$legendDiv.append(additionalContent);\r\n\t            this.applyCollapse();\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * add additional content to the legend\r\n\t     * @param {string} [additionalContent=] - additonal content to add\r\n\t     */\r\n\t    LayerBase.prototype.addLegendContent = function (additionalContent) {\r\n\t        this._addLegendContent(additionalContent);\r\n\t    };\r\n\t    LayerBase.prototype.applyCollapse = function () {\r\n\t        if (this._applyCollapseCalled) {\r\n\t            console.log('collapse already applied');\r\n\t            return undefined;\r\n\t        }\r\n\t        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n\t        if (this._$legendDiv.length > 0) {\r\n\t            var $expander = this._$legendDiv.find('.legend-items-expander');\r\n\t            if ($expander.length > 0) {\r\n\t                this._applyCollapseCalled = true;\r\n\t                $expander.click(function () {\r\n\t                    var $this = $(this);\r\n\t                    $this.siblings('ul').slideToggle();\r\n\t                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n\t                        $this.removeClass('legend-layer-group-collapsed');\r\n\t                        $this.html('&#9660;');\r\n\t                    }\r\n\t                    else {\r\n\t                        $this.addClass('legend-layer-group-collapsed');\r\n\t                        $this.html('&#9654;');\r\n\t                    }\r\n\t                });\r\n\t                if (this._legendCollapse) {\r\n\t                    $expander.trigger('click');\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * trick to refresh the layer\r\n\t     */\r\n\t    LayerBase.prototype.refresh = function () {\r\n\t        if (this.source) {\r\n\t            this.source.refresh();\r\n\t        }\r\n\t    };\r\n\t    Object.defineProperty(LayerBase.prototype, \"id\", {\r\n\t        get: function () {\r\n\t            return this._id;\r\n\t        },\r\n\t        set: function (newId) {\r\n\t            this._id = newId;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"animate\", {\r\n\t        get: function () {\r\n\t            return this._animate;\r\n\t        },\r\n\t        set: function (animate) {\r\n\t            this._animate = animate;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"legendContent\", {\r\n\t        /**\r\n\t         * get the legend content\r\n\t         * @type {string}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._legendContent;\r\n\t        },\r\n\t        /**\r\n\t         * set the legend content directly\r\n\t         * @param {string} newVal - new content\r\n\t         * @protected\r\n\t         */\r\n\t        set: function (newVal) {\r\n\t            this._legendContent = newVal;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"params\", {\r\n\t        /**\r\n\t         * get the map get params\r\n\t         * @type {object}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._params;\r\n\t        },\r\n\t        /**\r\n\t         * set the map get params\r\n\t         * @param {object} newParams - new get params\r\n\t         * @protected\r\n\t         */\r\n\t        set: function (newParams) {\r\n\t            this._params = newParams;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"minResolution\", {\r\n\t        /**\r\n\t         * get the minimum resolution\r\n\t         * @type {number|*}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._minResolution;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"maxResolution\", {\r\n\t        /**\r\n\t         * get the maximum resolution\r\n\t         * @type {number|*}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._maxResolution;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"minZoom\", {\r\n\t        /**\r\n\t         * get min zoom\r\n\t         * @type {number|*}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._minZoom;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"maxZoom\", {\r\n\t        /**\r\n\t         * get max zoom\r\n\t         * @type {number|*}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._maxZoom;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"url\", {\r\n\t        /**\r\n\t         * get the url\r\n\t         * @type {string}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._url;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"visible\", {\r\n\t        /**\r\n\t         * Get the layer visibility\r\n\t         * @type {boolean}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._visible;\r\n\t        },\r\n\t        /**\r\n\t         * set the visibility\r\n\t         * @param visibility\r\n\t         */\r\n\t        set: function (visibility) {\r\n\t            this.setVisible(visibility);\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    LayerBase.prototype.setVisible = function (visibility) {\r\n\t        this._visible = visibility;\r\n\t        if (this.olLayer) {\r\n\t            this.olLayer.setVisible(this._visible);\r\n\t            if (visibility && !this._loaded) {\r\n\t                this._load();\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Object.defineProperty(LayerBase.prototype, \"opacity\", {\r\n\t        /**\r\n\t         * Get the layer opacity\r\n\t         * @type {number}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._opacity;\r\n\t        },\r\n\t        /**\r\n\t         * Set the layer opacity\r\n\t         * @param {number} opacity - layer opacity\r\n\t         */\r\n\t        set: function (opacity) {\r\n\t            this._opacity = opacity;\r\n\t            if (this.olLayer) {\r\n\t                this.olLayer.setOpacity(this._opacity);\r\n\t            }\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"name\", {\r\n\t        /**\r\n\t         * Get the layer name\r\n\t         * @type {string}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._name;\r\n\t        },\r\n\t        /**\r\n\t         * set the layer name\r\n\t         * @param {string} newName - the new name\r\n\t         */\r\n\t        set: function (newName) {\r\n\t            this._name = newName;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"loaded\", {\r\n\t        /**\r\n\t         * Check if the layer is loaded\r\n\t         * @type {boolean}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._loaded;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerBase.prototype, \"source\", {\r\n\t        /**\r\n\t         * get the layer source\r\n\t         * @type {*}\r\n\t         */\r\n\t        get: function () {\r\n\t            return this.getSource();\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    LayerBase.prototype.getSource = function () {\r\n\t        return this._source;\r\n\t    };\r\n\t    Object.defineProperty(LayerBase.prototype, \"zIndex\", {\r\n\t        /**\r\n\t         * get the z index\r\n\t         */\r\n\t        get: function () {\r\n\t            return this._zIndex;\r\n\t        },\r\n\t        /**\r\n\t         * set the z index\r\n\t         */\r\n\t        set: function (newZ) {\r\n\t            this._zIndex = newZ;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    LayerBase.prototype.setZIndex = function (newZ) {\r\n\t    };\r\n\t    Object.defineProperty(LayerBase.prototype, \"olLayer\", {\r\n\t        /**\r\n\t         * the the ol layer\r\n\t         */\r\n\t        get: function () {\r\n\t            return this.getOlLayer();\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    LayerBase.prototype.getOlLayer = function () {\r\n\t        return this._olLayer;\r\n\t    };\r\n\t    return LayerBase;\r\n\t}());\r\n\texports.LayerBase = LayerBase;\r\n\tnm.LayerBase = LayerBase;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = LayerBase;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar nm = provide_1.default('util.checkDefined');\r\n\t/**\r\n\t * check if the input is undefined or null\r\n\t * @param input - input pointer\r\n\t * @returns true undefined or null\r\n\t */\r\n\tfunction undefinedOrNull(input) {\r\n\t    \"use strict\";\r\n\t    return (typeof input === 'undefined' || input === null);\r\n\t}\r\n\texports.undefinedOrNull = undefinedOrNull;\r\n\tnm.undefinedOrNull = undefinedOrNull;\r\n\t/**\r\n\t * check if the input is defined and not null\r\n\t * @param input - input pointer\r\n\t * @returns true defined and not null\r\n\t */\r\n\tfunction definedAndNotNull(input) {\r\n\t    \"use strict\";\r\n\t    return !(undefinedOrNull(input));\r\n\t}\r\n\texports.definedAndNotNull = definedAndNotNull;\r\n\tnm.definedAndNotNull = definedAndNotNull;\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar mapInteractionBase_1 = __webpack_require__(6);\r\n\tvar checkDefined = __webpack_require__(9);\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar makeGuid_1 = __webpack_require__(4);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('olHelpers');\r\n\t/**\r\n\t * assists with map move interactions, trigger callback functions\r\n\t * @augments MapInteractionBase\r\n\t */\r\n\tvar MapMoveCls = (function (_super) {\r\n\t    __extends(MapMoveCls, _super);\r\n\t    /**\r\n\t     * constructor called implicitly\r\n\t     */\r\n\t    function MapMoveCls() {\r\n\t        var _this = _super.call(this, 'map move') || this;\r\n\t        _this._arrLyrRequest = [];\r\n\t        _this._arrLyrTimeout = [];\r\n\t        _this._arrLayer = [];\r\n\t        _this._lookupLayer = {};\r\n\t        _this._mapMoveCallbacks = [];\r\n\t        _this._mapMoveCallbacksLookup = {};\r\n\t        _this._mapMoveCallbackDelays = [];\r\n\t        _this._mapMoveCallbackContext = [];\r\n\t        _this._mapMoveCallbackTimeout = [];\r\n\t        _this._mapExtent = undefined;\r\n\t        _this._zoomLevel = undefined;\r\n\t        return _this;\r\n\t    }\r\n\t    /**\r\n\t     * initialize the map move object\r\n\t     * @param theMap - the ol map\r\n\t     */\r\n\t    MapMoveCls.prototype.init = function (theMap) {\r\n\t        var _this = this;\r\n\t        _super.prototype.init.call(this, theMap);\r\n\t        this.map.getView().on(['change:center', 'change:resolution'], function (e) {\r\n\t            _this._updateMapExtent();\r\n\t            // trigger the layer updates\r\n\t            for (var i = 0; i < _this._arrLayer.length; i++) {\r\n\t                _this.triggerLyrLoad(_this._arrLayer[i], i, e.type);\r\n\t            }\r\n\t            // trigger the map callbacks\r\n\t            for (var i = 0; i < _this._mapMoveCallbacks.length; i++) {\r\n\t                _this.triggerMoveCallback(i, e.type);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    MapMoveCls.prototype._updateMapExtent = function () {\r\n\t        var theView = this.map.getView();\r\n\t        this._zoomLevel = theView.getZoom();\r\n\t        var extentArray = theView.calculateExtent(this.map.getSize());\r\n\t        this._mapExtent = {\r\n\t            minX: extentArray[0],\r\n\t            minY: extentArray[1],\r\n\t            maxX: extentArray[2],\r\n\t            maxY: extentArray[3]\r\n\t        };\r\n\t    };\r\n\t    Object.defineProperty(MapMoveCls.prototype, \"mapExtent\", {\r\n\t        /**\r\n\t         * return the map extent\r\n\t         */\r\n\t        get: function () {\r\n\t            if (!this._mapExtent) {\r\n\t                this._updateMapExtent();\r\n\t            }\r\n\t            return this._mapExtent;\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    /**\r\n\t     * Trigger the layer load\r\n\t     * @param lyr the layer being acted on\r\n\t     * @param index index of the layer\r\n\t     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n\t     */\r\n\t    MapMoveCls.prototype.triggerLyrLoad = function (lyr, index, eventType) {\r\n\t        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n\t            throw 'need to define lyr or index';\r\n\t        }\r\n\t        else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n\t            index = this._arrLayer.indexOf(lyr);\r\n\t        }\r\n\t        else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n\t            lyr = this._arrLayer[index];\r\n\t        }\r\n\t        // clear the timeout\r\n\t        if (this._arrLyrTimeout[index] != null) {\r\n\t            clearTimeout(this._arrLyrTimeout[index]);\r\n\t            this._arrLyrTimeout[index] = null;\r\n\t        }\r\n\t        // abort if necessary and clear the request\r\n\t        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n\t            this._arrLyrRequest[index].abort();\r\n\t            this._arrLyrRequest[index] = null;\r\n\t        }\r\n\t        // dummy callback used if before load returns false\r\n\t        var callbackFunc = function () { };\r\n\t        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n\t            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n\t            var __this_1 = this;\r\n\t            callbackFunc = function () {\r\n\t                function innerFunction(theLayer, theIndex) {\r\n\t                    var _innerThis = this;\r\n\t                    this._arrLyrRequest[theIndex] = $.get(theLayer.url, theLayer.mapMoveParams, function (d) {\r\n\t                        /**\r\n\t                         * @type {LayerBaseVector}\r\n\t                         */\r\n\t                        theLayer.mapMoveCallback(d);\r\n\t                        theLayer.loadCallback();\r\n\t                    }, 'json').fail(function (jqXHR) {\r\n\t                        if (jqXHR.statusText != 'abort') {\r\n\t                            console.log('failed');\r\n\t                            console.log(theLayer.url);\r\n\t                            console.log(theLayer.mapMoveParams);\r\n\t                        }\r\n\t                    }).always(function () {\r\n\t                        _innerThis._arrLyrTimeout[theIndex] = null;\r\n\t                        _innerThis._arrLyrRequest[theIndex] = null;\r\n\t                    });\r\n\t                }\r\n\t                innerFunction.call(__this_1, lyr, index);\r\n\t            };\r\n\t        }\r\n\t        else {\r\n\t            lyr.clear();\r\n\t        }\r\n\t        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n\t    };\r\n\t    /**\r\n\t     * trigger the map move call back at the given index\r\n\t     * @param ind - the index of the layer\r\n\t     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n\t     * @param functionId=undefined the function id used to reference the added callback function\r\n\t     */\r\n\t    MapMoveCls.prototype.triggerMoveCallback = function (ind, eventType, functionId) {\r\n\t        if (typeof ind == 'undefined' && typeof functionId == 'undefined') {\r\n\t            throw 'either the function index or the id must be defined';\r\n\t        }\r\n\t        if (typeof ind !== 'number') {\r\n\t            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n\t        }\r\n\t        if (ind < 0) {\r\n\t            console.log('function not found');\r\n\t            return;\r\n\t        }\r\n\t        // clear the timeout\r\n\t        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n\t            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n\t            this._mapMoveCallbackTimeout[ind] = null;\r\n\t        }\r\n\t        var ctx = this._mapMoveCallbackContext[ind];\r\n\t        var theFunc = this._mapMoveCallbacks[ind];\r\n\t        var __this = this;\r\n\t        var f = function () {\r\n\t            if (ctx !== null) {\r\n\t                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n\t            }\r\n\t            else {\r\n\t                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n\t            }\r\n\t        };\r\n\t        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n\t    };\r\n\t    /**\r\n\t     * Add a layer to the interaction\r\n\t     * @param  lyr - layer to add\r\n\t     * @param triggerOnAdd - if the layer should be loaded on add\r\n\t     */\r\n\t    MapMoveCls.prototype.addVectorLayer = function (lyr, triggerOnAdd) {\r\n\t        if (triggerOnAdd === void 0) { triggerOnAdd = true; }\r\n\t        if (this._arrLayer.indexOf(lyr) > -1) {\r\n\t            console.log('already added ' + lyr.name + ' to map move');\r\n\t            return;\r\n\t        }\r\n\t        this._checkInit();\r\n\t        this._arrLyrRequest.push(null);\r\n\t        this._arrLyrTimeout.push(null);\r\n\t        this._arrLayer.push(lyr);\r\n\t        this._lookupLayer[lyr.id] = lyr;\r\n\t        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\t        if (triggerOnAdd) {\r\n\t            if (this._mapExtent === undefined) {\r\n\t                this._updateMapExtent();\r\n\t            }\r\n\t            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     * add a callback to the map move event\r\n\t     * @param func - callback function\r\n\t     * @param context - the context to use for this function\r\n\t     * @param delay=50 the delay before call load\r\n\t     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n\t     * @param functionId optional id to reference the function later for outside triggering\r\n\t     */\r\n\t    MapMoveCls.prototype.addCallback = function (func, context, delay, triggerOnAdd, functionId) {\r\n\t        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n\t            console.log('this function already added to map move');\r\n\t            return;\r\n\t        }\r\n\t        this._checkInit();\r\n\t        if (!functionId) {\r\n\t            functionId = makeGuid_1.default();\r\n\t        }\r\n\t        this._mapMoveCallbacks.push(func);\r\n\t        this._mapMoveCallbacksLookup[functionId] = functionId;\r\n\t        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n\t        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n\t        this._mapMoveCallbackTimeout.push(null);\r\n\t        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\t        if (triggerOnAdd) {\r\n\t            if (this._mapExtent === undefined) {\r\n\t                this._updateMapExtent();\r\n\t            }\r\n\t            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n\t        }\r\n\t    };\r\n\t    return MapMoveCls;\r\n\t}(mapInteractionBase_1.default));\r\n\texports.MapMoveCls = MapMoveCls;\r\n\tnm.MapMoveCls = MapMoveCls;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = MapMoveCls;\r\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 11/3/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar mapInteractionBase_1 = __webpack_require__(6);\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar ol = __webpack_require__(3);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('olHelpers');\r\n\tvar FeatureLayerProperties = (function () {\r\n\t    /**\r\n\t     *\r\n\t     * @param feature the feature\r\n\t     * @param layer - the layer in the popup\r\n\t     * @param layerIndex - index of the layer\r\n\t     * @param selectionLayer - the ol selection layer\r\n\t     * @param [esriLayerName=undefined] - esri layer name\r\n\t     */\r\n\t    function FeatureLayerProperties(feature, layer, layerIndex, selectionLayer, esriLayerName) {\r\n\t        this.feature = feature;\r\n\t        this.layer = layer;\r\n\t        this.layerIndex = layerIndex;\r\n\t        this.selectionLayer = selectionLayer;\r\n\t        this.popupContent = '';\r\n\t        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n\t    }\r\n\t    Object.defineProperty(FeatureLayerProperties.prototype, \"layerName\", {\r\n\t        get: function () {\r\n\t            if (typeof this.esriLayerName == 'string') {\r\n\t                return this.esriLayerName;\r\n\t            }\r\n\t            else {\r\n\t                return this.layer.name;\r\n\t            }\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return FeatureLayerProperties;\r\n\t}());\r\n\texports.FeatureLayerProperties = FeatureLayerProperties;\r\n\t/**\r\n\t * map popup class\r\n\t * @augments MapInteractionBase\r\n\t */\r\n\tvar MapPopupCls = (function (_super) {\r\n\t    __extends(MapPopupCls, _super);\r\n\t    /**\r\n\t     * Definition for openlayers style function\r\n\t     * @callback olStyleFunction\r\n\t     * &param feature the openlayers vector feature\r\n\t     * $param\r\n\t     */\r\n\t    /**\r\n\t     * map popup constructor\r\n\t     */\r\n\t    function MapPopupCls() {\r\n\t        var _this = _super.call(this, 'map popup') || this;\r\n\t        _this._arrPopupLayerIds = [];\r\n\t        _this._arrPopupLayerNames = [];\r\n\t        _this._arrPopupLayers = [];\r\n\t        _this._arrPopupOlLayers = [];\r\n\t        _this._arrPopupContentFunction = [];\r\n\t        _this._$popupContainer = undefined;\r\n\t        _this._$popupContent = undefined;\r\n\t        _this._$popupCloser = undefined;\r\n\t        _this._popupOverlay = undefined;\r\n\t        _this._selectionLayers = [];\r\n\t        _this._selectionLayerLookup = {};\r\n\t        _this._mapClickFunctions = [];\r\n\t        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n\t        //this._popupChangedLookup = {'a': a};\r\n\t        _this._popupChangedFunctions = [];\r\n\t        _this._esriMapServiceLayers = [];\r\n\t        _this._popupOpen = false;\r\n\t        _this._popupCoordinate = null;\r\n\t        _this._passThroughLayerFeatureArray = [];\r\n\t        _this._currentPopupIndex = -1;\r\n\t        _this._popupContentLength = 0;\r\n\t        return _this;\r\n\t    }\r\n\t    /**\r\n\t     * map popup initialization\r\n\t     * @param {ol.Map} theMap - the ol map\r\n\t     */\r\n\t    MapPopupCls.prototype.init = function (theMap) {\r\n\t        var _this = this;\r\n\t        _super.prototype.init.call(this, theMap);\r\n\t        var $map;\r\n\t        var target = this.map.getTarget();\r\n\t        if (typeof target == 'string') {\r\n\t            $map = $('#' + target);\r\n\t        }\r\n\t        else {\r\n\t            $map = $(target);\r\n\t        }\r\n\t        $map.append('<div class=\"ol-popup\">' +\r\n\t            '<span class=\"ol-popup-closer\">X</span>' +\r\n\t            '<div class=\"popup-content\"></div>' +\r\n\t            '</div>');\r\n\t        this._$popupContainer = $map.find('.ol-popup');\r\n\t        this._$popupContent = $map.find('.popup-content');\r\n\t        this._$popupCloser = $map.find('.ol-popup-closer');\r\n\t        var _ease = function (n) {\r\n\t            return ol.easing.inAndOut(n);\r\n\t        };\r\n\t        this._popupOverlay = new ol.Overlay({\r\n\t            element: this._$popupContainer[0],\r\n\t            autoPan: true,\r\n\t            autoPanAnimation: {\r\n\t                duration: 250,\r\n\t                source: theMap.getView().getCenter(),\r\n\t                easing: _ease\r\n\t            }\r\n\t        });\r\n\t        this._map.addOverlay(this._popupOverlay);\r\n\t        this._$popupCloser.click(function (evt) {\r\n\t            _this.closePopup();\r\n\t        });\r\n\t        // display popup on click\r\n\t        this._map.on('singleclick', function (evt) {\r\n\t            _this.closePopup();\r\n\t            _this._popupCoordinate = evt['coordinate'];\r\n\t            // esri map service layers\r\n\t            if (_this._esriMapServiceLayers.length > 0) {\r\n\t                var queryParams = {\r\n\t                    geometry: evt['coordinate'].join(','),\r\n\t                    geometryType: 'esriGeometryPoint',\r\n\t                    layers: 'all',\r\n\t                    sr: _this._map.getView().getProjection().getCode().split(':')[1],\r\n\t                    mapExtent: _this._map.getView().calculateExtent(_this._map.getSize()).join(','),\r\n\t                    imageDisplay: _this._map.getSize().join(',') + ',96',\r\n\t                    returnGeometry: true,\r\n\t                    tolerance: 15,\r\n\t                    f: 'pjson'\r\n\t                };\r\n\t                for (var _i = 0, _a = _this._esriMapServiceLayers; _i < _a.length; _i++) {\r\n\t                    var l = _a[_i];\r\n\t                    l.getPopupInfo(queryParams);\r\n\t                }\r\n\t            }\r\n\t            var layerFeatureObjectArray = _this._featuresAtPixel(evt['pixel']);\r\n\t            _this._passThroughLayerFeatureArray = [];\r\n\t            _this._currentPopupIndex = -1;\r\n\t            for (var i = 0; i < layerFeatureObjectArray.length; i++) {\r\n\t                var featObj = layerFeatureObjectArray[i];\r\n\t                var props = featObj.feature.getProperties();\r\n\t                var popupContentResponse = _this._arrPopupContentFunction[featObj.layerIndex](props, _this._$popupContent);\r\n\t                //skip if return was false\r\n\t                if (popupContentResponse === false) {\r\n\t                }\r\n\t                else if (typeof popupContentResponse == 'string') {\r\n\t                    featObj.popupContent = popupContentResponse;\r\n\t                    _this._passThroughLayerFeatureArray.push(featObj);\r\n\t                }\r\n\t                else {\r\n\t                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n\t                }\r\n\t            }\r\n\t            _this._popupContentLength = _this._passThroughLayerFeatureArray.length;\r\n\t            _this._currentPopupIndex = -1;\r\n\t            var popupHtml = '<div class=\"ol-popup-nav\">';\r\n\t            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n\t            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n\t            popupHtml += \"<span class=\\\"current-popup-item-number\\\" style=\\\"font-weight: bold;\\\"></span>\";\r\n\t            popupHtml += \"<span>&nbsp;of&nbsp;</span>\";\r\n\t            popupHtml += \"<span class=\\\"popup-content-length\\\" style=\\\"font-weight: bold;\\\">\" + _this._popupContentLength + \"</span>\";\r\n\t            popupHtml += \"<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>\";\r\n\t            popupHtml += \"<span class=\\\"current-popup-layer-name\\\"></span>\";\r\n\t            popupHtml += '</div>';\r\n\t            popupHtml += '<div class=\"ol-popup-inner\">';\r\n\t            popupHtml += '</div>';\r\n\t            _this._$popupContent.html(popupHtml);\r\n\t            _this._$popupContent.find('.previous-popup').click(function () {\r\n\t                if (_this._popupContentLength == 1) {\r\n\t                    return;\r\n\t                }\r\n\t                if (_this._currentPopupIndex == 0) {\r\n\t                    _this._currentPopupIndex = _this._popupContentLength - 1;\r\n\t                }\r\n\t                else {\r\n\t                    _this._currentPopupIndex--;\r\n\t                }\r\n\t                _this._triggerFeatSelect();\r\n\t            });\r\n\t            var nextPopup = _this._$popupContent.find('.next-popup');\r\n\t            nextPopup.click(function () {\r\n\t                if (_this._popupContentLength == 1 && _this._currentPopupIndex > -1) {\r\n\t                    return;\r\n\t                }\r\n\t                if (_this._currentPopupIndex == _this._popupContentLength - 1) {\r\n\t                    _this._currentPopupIndex = 0;\r\n\t                }\r\n\t                else {\r\n\t                    _this._currentPopupIndex++;\r\n\t                }\r\n\t                _this._triggerFeatSelect();\r\n\t            });\r\n\t            if (_this._popupContentLength > 0) {\r\n\t                nextPopup.trigger('click');\r\n\t                _this._popupOverlay.setPosition(_this._popupCoordinate);\r\n\t                _this._$popupContent.scrollTop(0);\r\n\t                _this._popupOpen = true;\r\n\t            }\r\n\t        });\r\n\t        //change mouse cursor when over marker\r\n\t        this._map.on('pointermove', function (evt) {\r\n\t            if (evt['dragging']) {\r\n\t                return;\r\n\t            }\r\n\t            var pixel = _this.map.getEventPixel(evt['originalEvent']);\r\n\t            var hit = _this.map.hasFeatureAtPixel(pixel, function (lyrCandidate) {\r\n\t                for (var _i = 0, _a = _this._arrPopupOlLayers; _i < _a.length; _i++) {\r\n\t                    var olLayer = _a[_i];\r\n\t                    if (lyrCandidate == olLayer) {\r\n\t                        return true;\r\n\t                    }\r\n\t                }\r\n\t                return false;\r\n\t            });\r\n\t            var mapElement = _this.map.getTargetElement();\r\n\t            mapElement.style.cursor = hit ? 'pointer' : '';\r\n\t        });\r\n\t        return true;\r\n\t    };\r\n\t    /**\r\n\t     * helper to select features\r\n\t     * @private\r\n\t     */\r\n\t    MapPopupCls.prototype._triggerFeatSelect = function () {\r\n\t        var $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n\t        var $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n\t        var $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n\t        this.clearSelection();\r\n\t        var lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n\t        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n\t        $layerNameSpan.html(lyrFeatObj.layerName);\r\n\t        $innerPopup.html(lyrFeatObj.popupContent);\r\n\t        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n\t        for (var _i = 0, _a = this._popupChangedFunctions; _i < _a.length; _i++) {\r\n\t            var f = _a[_i];\r\n\t            f(this._$popupContent);\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param feature - the ol feature\r\n\t     * @param {LayerEsriMapServer} lyr - the map server layer\r\n\t     * @param {string} popupContent - popup content\r\n\t     * @param {string} esriName - esri layer name\r\n\t     */\r\n\t    MapPopupCls.prototype.addMapServicePopupContent = function (feature, lyr, popupContent, esriName) {\r\n\t        var featLayerObject = new FeatureLayerProperties(feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName);\r\n\t        featLayerObject.popupContent = popupContent;\r\n\t        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n\t        this._popupContentLength++;\r\n\t        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n\t        if (!this._popupOpen) {\r\n\t            this._$popupContent.find('.next-popup').trigger('click');\r\n\t            this._popupOverlay.setPosition(this._popupCoordinate);\r\n\t            this._$popupContent.scrollTop(0);\r\n\t            this._popupOpen = true;\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param  pixel - the ol pixel\r\n\t     * @returns  feature layer properties\r\n\t     * @private\r\n\t     */\r\n\t    MapPopupCls.prototype._featuresAtPixel = function (pixel) {\r\n\t        var _this = this;\r\n\t        var layerFeatureObjectArray = [];\r\n\t        this.map.forEachFeatureAtPixel(pixel, function (feature, layer) {\r\n\t            var lyrIndex = _this._arrPopupOlLayers.indexOf(layer);\r\n\t            if (lyrIndex > -1) {\r\n\t                layerFeatureObjectArray.push(new FeatureLayerProperties(feature, _this._arrPopupLayers[lyrIndex], lyrIndex, _this._selectionLayers[lyrIndex]));\r\n\t            }\r\n\t        });\r\n\t        return layerFeatureObjectArray;\r\n\t    };\r\n\t    MapPopupCls.prototype.closePopup = function () {\r\n\t        this._checkInit();\r\n\t        this._popupOpen = false;\r\n\t        this._popupOverlay.setPosition(undefined);\r\n\t        this._$popupCloser[0].blur();\r\n\t        this.clearSelection();\r\n\t        this._$popupContent.html('');\r\n\t        return false;\r\n\t    };\r\n\t    ;\r\n\t    /**\r\n\t     *\r\n\t     * @param chgFunction - popup change function\r\n\t     */\r\n\t    MapPopupCls.prototype.addPopupChangedFunction = function (chgFunction) {\r\n\t        this._popupChangedFunctions.push(chgFunction);\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param {LayerBase|*} lyr - the layer being acted on\r\n\t     * @param {object} [selectionStyle={}] the selection style configuration\r\n\t     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n\t     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n\t     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n\t     * @returns  the new selection layer\r\n\t     * @private\r\n\t     */\r\n\t    MapPopupCls.prototype._addPopupLayer = function (lyr, selectionStyle) {\r\n\t        this._checkInit();\r\n\t        selectionStyle = selectionStyle || {};\r\n\t        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n\t        selectionStyle.width = selectionStyle.width || 10;\r\n\t        var theStyle;\r\n\t        if (selectionStyle.olStyle) {\r\n\t            theStyle = selectionStyle.olStyle;\r\n\t        }\r\n\t        else {\r\n\t            theStyle = new ol.style.Style({\r\n\t                stroke: new ol.style.Stroke({\r\n\t                    color: selectionStyle.color,\r\n\t                    width: selectionStyle.width\r\n\t                }),\r\n\t                image: new ol.style.Circle({\r\n\t                    radius: 7,\r\n\t                    fill: new ol.style.Fill({ color: selectionStyle.color }),\r\n\t                    stroke: new ol.style.Stroke({ color: selectionStyle.color, width: 1 })\r\n\t                }),\r\n\t                fill: new ol.style.Fill({\r\n\t                    color: selectionStyle.color\r\n\t                })\r\n\t            });\r\n\t        }\r\n\t        var selectionLayer = new ol.layer.Vector({\r\n\t            source: new ol.source.Vector(),\r\n\t            style: theStyle\r\n\t        });\r\n\t        selectionLayer.setZIndex(100);\r\n\t        this._selectionLayers.push(selectionLayer);\r\n\t        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n\t        this.map.addLayer(selectionLayer);\r\n\t        return selectionLayer;\r\n\t    };\r\n\t    /**\r\n\t     * Add popup to the map\r\n\t     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n\t     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n\t     * @param {object} [selectionStyle={}] the selection style configuration\r\n\t     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n\t     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n\t     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n\t     * @returns {object} a reference to the ol selection layer\r\n\t     */\r\n\t    MapPopupCls.prototype.addVectorPopup = function (lyr, popupContentFunction, selectionStyle) {\r\n\t        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n\t        this._arrPopupLayerIds.push(lyr.id);\r\n\t        this._arrPopupLayerNames.push(lyr.name);\r\n\t        this._arrPopupLayers.push(lyr);\r\n\t        this._arrPopupOlLayers.push(lyr.olLayer);\r\n\t        this._arrPopupContentFunction.push(popupContentFunction);\r\n\t        return selectionLayer;\r\n\t    };\r\n\t    ;\r\n\t    /**\r\n\t     *\r\n\t     * @param {LayerBase} lyr - layer\r\n\t     */\r\n\t    MapPopupCls.prototype.removeVectorPopup = function (lyr) {\r\n\t        var idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n\t        if (idx > -1) {\r\n\t            this._arrPopupLayerIds.splice(idx, 1);\r\n\t            this._arrPopupLayerNames.splice(idx, 1);\r\n\t            this._arrPopupLayers.splice(idx, 1);\r\n\t            this._arrPopupOlLayers.splice(idx, 1);\r\n\t            this._arrPopupContentFunction.splice(idx, 1);\r\n\t            this._selectionLayers.splice(idx, 1);\r\n\t            delete this._selectionLayerLookup[lyr.id];\r\n\t        }\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param {LayerEsriMapServer} lyr - map server layer\r\n\t     * @param {object} [selectionStyle={}] the selection style configuration\r\n\t     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n\t     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n\t     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n\t     * @returns {object} a reference to the ol selection layer\r\n\t     */\r\n\t    MapPopupCls.prototype.addMapServicePopup = function (lyr, selectionStyle) {\r\n\t        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n\t        this._esriMapServiceLayers.push(lyr);\r\n\t        return selectionLayer;\r\n\t    };\r\n\t    MapPopupCls.prototype.clearSelection = function () {\r\n\t        this._checkInit();\r\n\t        for (var i = 0; i < this._selectionLayers.length; i++) {\r\n\t            this._selectionLayers[i].getSource().clear();\r\n\t        }\r\n\t        for (var _i = 0, _a = this._mapClickFunctions; _i < _a.length; _i++) {\r\n\t            var f = _a[_i];\r\n\t            f();\r\n\t        }\r\n\t    };\r\n\t    ;\r\n\t    /**\r\n\t     * Add a function to be called when the map is clicked but before any popups are implemented\r\n\t     * @param {function} func - the map click function\r\n\t     */\r\n\t    MapPopupCls.prototype.addMapClickFunction = function (func) {\r\n\t        this._mapClickFunctions.push(func);\r\n\t    };\r\n\t    return MapPopupCls;\r\n\t}(mapInteractionBase_1.default));\r\n\texports.MapPopupCls = MapPopupCls;\r\n\tnm.MapPopupCls = MapPopupCls;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = MapPopupCls;\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 12/15/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar quickMapBase_1 = __webpack_require__(13);\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar mapMove_1 = __webpack_require__(7);\r\n\tvar mapPopup_1 = __webpack_require__(5);\r\n\tvar nm = provide_1.default('olHelpers');\r\n\t/**\r\n\t * Sets up a map with some default parameters and initializes\r\n\t * mapMove and mapPopup\r\n\t *\r\n\t * @param {object} [options={}] config options\r\n\t * @param {string} [options.divId=map] map div id\r\n\t * @param {object} [options.center={}] center config object\r\n\t * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n\t * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n\t * @param {number} [options.zoom=7] zoom level\r\n\t * @param {number} [options.minZoom=undefined] min zoom\r\n\t * @param {number} [options.maxZoom=undefined] max zoom\r\n\t * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n\t * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n\t * @returns {ol.Map} the ol map\r\n\t */\r\n\tfunction quickMap(options) {\r\n\t    var m = quickMapBase_1.quickMapBase(options);\r\n\t    mapMove_1.default.init(m);\r\n\t    mapPopup_1.default.init(m);\r\n\t    return m;\r\n\t}\r\n\texports.quickMap = quickMap;\r\n\tnm.quickMap = quickMap;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = quickMap;\r\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 12/15/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar ol = __webpack_require__(3);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('olHelpers');\r\n\t/**\r\n\t * Sets up a map with some default parameters and initializes\r\n\t * mapMove and mapPopup\r\n\t *\r\n\t * @param [options={}] config options\r\n\t * @param [options.divId=map] map div id\r\n\t * @param [options.center={}] center config object\r\n\t * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n\t * @param [options.center.y=5574910] center y, web mercator y or lat\r\n\t * @param [options.zoom=7] zoom level\r\n\t * @param [options.minZoom=undefined] min zoom\r\n\t * @param [options.maxZoom=undefined] max zoom\r\n\t * @param [options.baseSwitcher=true] if add base map switcher\r\n\t * @param [options.fullScreen=false] if add base map switcher\r\n\t * @returns the ol map\r\n\t */\r\n\tfunction quickMapBase(options) {\r\n\t    options = options || {};\r\n\t    options.divId = options.divId || 'map';\r\n\t    options.center = options.center || { x: -10018378, y: 5574910 };\r\n\t    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n\t    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n\t    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n\t    var $mapDiv = $('#' + options.divId);\r\n\t    $mapDiv.css('position', 'relative');\r\n\t    var osmLayer = new ol.layer.Tile({ source: new ol.source.OSM() });\r\n\t    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n\t    var osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n\t    var aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n\t    if (options.baseSwitcher) {\r\n\t    }\r\n\t    if (options.zoom < 0 || options.zoom > 28) {\r\n\t        throw 'zoom out of range';\r\n\t    }\r\n\t    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n\t        var p = new ol.geom.Point([options.center.x, options.center.y]);\r\n\t        new ol.proj.Projection({ code: \"EPSG:4326\" });\r\n\t        p.transform(new ol.proj.Projection({ code: \"EPSG:4326\" }), new ol.proj.Projection({ code: \"EPSG:3857\" }));\r\n\t        var coordinates = p.getCoordinates();\r\n\t        options.center.x = coordinates[0];\r\n\t        options.center.y = coordinates[1];\r\n\t    }\r\n\t    var controls = ol.control.defaults({\r\n\t        attributionOptions: { collapsible: false }\r\n\t    });\r\n\t    var view = new ol.View({\r\n\t        center: [options.center.x, options.center.y],\r\n\t        zoom: options.zoom,\r\n\t        minZoom: options.minZoom,\r\n\t        maxZoom: options.maxZoom\r\n\t    });\r\n\t    var map = new ol.Map({\r\n\t        layers: [osmLayer],\r\n\t        target: options.divId,\r\n\t        controls: controls,\r\n\t        view: view\r\n\t    });\r\n\t    if (options.fullScreen) {\r\n\t        map.addControl(new ol.control.FullScreen({}));\r\n\t    }\r\n\t    return map;\r\n\t}\r\n\texports.quickMapBase = quickMapBase;\r\n\tnm.quickMapBase = quickMapBase;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = quickMapBase;\r\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 12/14/2015.\r\n\t */\r\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar nm = provide_1.default('olHelpers.zoomResolutionConvert');\r\n\tvar _zoomResLookup = [\r\n\t    156543.03392804097,\r\n\t    78271.51696402048,\r\n\t    39135.75848201024,\r\n\t    19567.87924100512,\r\n\t    9783.93962050256,\r\n\t    4891.96981025128,\r\n\t    2445.98490512564,\r\n\t    1222.99245256282,\r\n\t    611.49622628141,\r\n\t    305.748113140705,\r\n\t    152.8740565703525,\r\n\t    76.43702828517625,\r\n\t    38.21851414258813,\r\n\t    19.109257071294063,\r\n\t    9.554628535647032,\r\n\t    4.777314267823516,\r\n\t    2.388657133911758,\r\n\t    1.194328566955879,\r\n\t    0.5971642834779395,\r\n\t    0.29858214173896974,\r\n\t    0.14929107086948487,\r\n\t    0.07464553543474244,\r\n\t    0.03732276771737122,\r\n\t    0.01866138385868561,\r\n\t    0.009330691929342804,\r\n\t    0.004665345964671402,\r\n\t    0.002332672982335701,\r\n\t    0.0011663364911678506,\r\n\t    0.0005831682455839253 //28\r\n\t];\r\n\t/**\r\n\t * Get the resolution given the zoom level\r\n\t * @param {number} zoomLevel - the zoom level\r\n\t * @returns {number|*} the map resolution\r\n\t */\r\n\tfunction zoomToResolution(zoomLevel) {\r\n\t    \"use strict\";\r\n\t    if (typeof zoomLevel == 'number') {\r\n\t        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n\t            return _zoomResLookup[zoomLevel];\r\n\t        }\r\n\t        else {\r\n\t            console.log(\"invalid zoom level provided: \" + zoomLevel);\r\n\t            return undefined;\r\n\t        }\r\n\t    }\r\n\t    else {\r\n\t        return undefined;\r\n\t    }\r\n\t}\r\n\texports.zoomToResolution = zoomToResolution;\r\n\tnm.zoomToResolution = zoomToResolution;\r\n\t/**\r\n\t * Get resolution from the zoom level\r\n\t * @param {number} resolution - the resolution\r\n\t * @returns {number|*} the zoom level\r\n\t */\r\n\tfunction resolutionToZoom(resolution) {\r\n\t    for (var i = 0; i < _zoomResLookup.length; i++) {\r\n\t        if (resolution >= _zoomResLookup[i]) {\r\n\t            return i;\r\n\t        }\r\n\t    }\r\n\t    return 0;\r\n\t}\r\n\texports.resolutionToZoom = resolutionToZoom;\r\n\tnm.resolutionToZoom = resolutionToZoom;\r\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\t/**\r\n\t * Created by gavorhes on 1/4/2016.\r\n\t */\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar ol = __webpack_require__(3);\r\n\tvar nm = provide_1.default('olHelpers.esriToOlStyle');\r\n\t/**\r\n\t * This callback is displayed as part of the Requester class.\r\n\t * @callback styleFunc\r\n\t * @param {ol.Feature} feat - openlayers feature\r\n\t * @param {number} resolution - map resolution\r\n\t */\r\n\t/**\r\n\t *\r\n\t * @param {Array<number>} colorArray - input color array\r\n\t * @param {number} opacity - the opacity 0 to 1\r\n\t * @returns {string} rgba string\r\n\t * @private\r\n\t */\r\n\tfunction _colorArrayToRgba(colorArray, opacity) {\r\n\t    \"use strict\";\r\n\t    return \"rgba(\" + colorArray[0] + \",\" + colorArray[1] + \",\" + colorArray[2] + \",\" + opacity + \")\";\r\n\t}\r\n\t/**\r\n\t * escape html charcters\r\n\t * @param {string} str - input string\r\n\t * @returns {string} escaped string\r\n\t */\r\n\tfunction htmlEscape(str) {\r\n\t    return String(str)\r\n\t        .replace(/&/g, '&amp;')\r\n\t        .replace(/\"/g, '&quot;')\r\n\t        .replace(/'/g, '&#39;')\r\n\t        .replace(/</g, '&lt;')\r\n\t        .replace(/>/g, '&gt;');\r\n\t}\r\n\tnm.htmlEscape = htmlEscape;\r\n\tvar CommonSymbol = (function () {\r\n\t    /**\r\n\t     *\r\n\t     * @param symbolObj\r\n\t     * @param {number} opacity\r\n\t     */\r\n\t    function CommonSymbol(symbolObj, opacity) {\r\n\t        this.symbolObj = symbolObj;\r\n\t        this.opacity = opacity;\r\n\t        this.olStyle = undefined;\r\n\t        this.legendHtml = '';\r\n\t    }\r\n\t    return CommonSymbol;\r\n\t}());\r\n\tvar PointSymbol = (function (_super) {\r\n\t    __extends(PointSymbol, _super);\r\n\t    function PointSymbol(symbolObj, opacity) {\r\n\t        var _this = _super.call(this, symbolObj, opacity) || this;\r\n\t        switch (_this.symbolObj.type) {\r\n\t            case 'esriSMS':\r\n\t                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n\t                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n\t                var outlineWidth = _this.symbolObj.outline.width;\r\n\t                var radius = _this.symbolObj.size;\r\n\t                _this.olStyle = new ol.style.Style({\r\n\t                    image: new ol.style.Circle({\r\n\t                        radius: radius,\r\n\t                        fill: new ol.style.Fill({\r\n\t                            color: innerColor\r\n\t                        }),\r\n\t                        stroke: new ol.style.Stroke({ color: outerColor, width: outlineWidth })\r\n\t                    })\r\n\t                });\r\n\t                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" style=\\\"color: \" + innerColor + \"\\\">&#9679;</span>\";\r\n\t                break;\r\n\t            case 'esriPMS':\r\n\t                _this.olStyle = new ol.style.Style({\r\n\t                    image: new ol.style.Icon({ src: \"data:image/png;base64,\" + _this.symbolObj['imageData'] })\r\n\t                });\r\n\t                _this.legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + _this.symbolObj['imageData'] + \"\\\">\";\r\n\t                break;\r\n\t            default:\r\n\t                console.log(_this.symbolObj);\r\n\t                alert('Point symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n\t        }\r\n\t        return _this;\r\n\t    }\r\n\t    return PointSymbol;\r\n\t}(CommonSymbol));\r\n\tvar LineSymbol = (function (_super) {\r\n\t    __extends(LineSymbol, _super);\r\n\t    function LineSymbol(symbolObj, opacity) {\r\n\t        var _this = _super.call(this, symbolObj, opacity) || this;\r\n\t        switch (_this.symbolObj.type) {\r\n\t            case 'esriSLS':\r\n\t                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n\t                var lineWidth = _this.symbolObj.width;\r\n\t                _this.olStyle = new ol.style.Style({\r\n\t                    stroke: new ol.style.Stroke({\r\n\t                        color: innerColor,\r\n\t                        //lineDash: [4],\r\n\t                        width: lineWidth\r\n\t                    })\r\n\t                });\r\n\t                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n\t                _this.legendHtml += \"style=\\\"\";\r\n\t                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n\t                _this.legendHtml += \"width: 40px;\";\r\n\t                _this.legendHtml += \"height: 4px;\";\r\n\t                _this.legendHtml += \"position: relative;\";\r\n\t                _this.legendHtml += \"display: inline-block;\";\r\n\t                _this.legendHtml += \"top: -1px;\";\r\n\t                _this.legendHtml += \"\\\"></span>\";\r\n\t                break;\r\n\t            default:\r\n\t                console.log(_this.symbolObj);\r\n\t                alert('Line symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n\t        }\r\n\t        return _this;\r\n\t    }\r\n\t    return LineSymbol;\r\n\t}(CommonSymbol));\r\n\tvar PolygonSymbol = (function (_super) {\r\n\t    __extends(PolygonSymbol, _super);\r\n\t    function PolygonSymbol(symbolObj, opacity) {\r\n\t        var _this = _super.call(this, symbolObj, opacity) || this;\r\n\t        switch (_this.symbolObj['type']) {\r\n\t            case 'esriSFS':\r\n\t                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n\t                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n\t                var outlineWidth = _this.symbolObj.outline.width;\r\n\t                _this.olStyle = new ol.style.Style({\r\n\t                    stroke: new ol.style.Stroke({\r\n\t                        color: outerColor,\r\n\t                        //lineDash: [4],\r\n\t                        width: outlineWidth\r\n\t                    }),\r\n\t                    fill: new ol.style.Fill({\r\n\t                        color: innerColor\r\n\t                    })\r\n\t                });\r\n\t                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n\t                _this.legendHtml += \"style=\\\"\";\r\n\t                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n\t                _this.legendHtml += \"border: solid \" + outerColor + \" 1px;\";\r\n\t                _this.legendHtml += \"width: 40px;\";\r\n\t                _this.legendHtml += \"height: 9px;\";\r\n\t                _this.legendHtml += \"position: relative;\";\r\n\t                _this.legendHtml += \"display: inline-block;\";\r\n\t                _this.legendHtml += \"top: 2px;\";\r\n\t                _this.legendHtml += \"\\\"></span>\";\r\n\t                break;\r\n\t            default:\r\n\t                console.log(_this.symbolObj);\r\n\t                alert('Polygon symbol does handle symbol type: ' + _this.symbolObj['type']);\r\n\t        }\r\n\t        return _this;\r\n\t    }\r\n\t    return PolygonSymbol;\r\n\t}(CommonSymbol));\r\n\tvar SymbolGenerator = (function () {\r\n\t    function SymbolGenerator(esriResponse) {\r\n\t        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n\t        this.renderer = esriResponse.drawingInfo.renderer;\r\n\t        this.olStyle = undefined;\r\n\t        this.legendHtml = '';\r\n\t    }\r\n\t    return SymbolGenerator;\r\n\t}());\r\n\tvar SingleSymbol = (function (_super) {\r\n\t    __extends(SingleSymbol, _super);\r\n\t    /**\r\n\t     *\r\n\t     * @param {object} esriResponse - layer info\r\n\t     * @param SymbolClass - the symbol class to use\r\n\t     */\r\n\t    function SingleSymbol(esriResponse, SymbolClass) {\r\n\t        var _this = _super.call(this, esriResponse) || this;\r\n\t        _this.symbol = _this.renderer.symbol;\r\n\t        var symbolObj = new SymbolClass(_this.symbol, _this.opacity);\r\n\t        _this.olStyle = symbolObj.olStyle;\r\n\t        _this.legendHtml = symbolObj.legendHtml;\r\n\t        return _this;\r\n\t    }\r\n\t    return SingleSymbol;\r\n\t}(SymbolGenerator));\r\n\tvar UniqueValueSymbol = (function (_super) {\r\n\t    __extends(UniqueValueSymbol, _super);\r\n\t    /**\r\n\t     *\r\n\t     * @param {object} esriResponse - layer info\r\n\t     * @param SymbolClass - the Symbol class definition\r\n\t     */\r\n\t    function UniqueValueSymbol(esriResponse, SymbolClass) {\r\n\t        var _this = _super.call(this, esriResponse) || this;\r\n\t        _this.uniqueValueInfos = _this.renderer['uniqueValueInfos'];\r\n\t        _this.propertyName = _this.renderer['field1'];\r\n\t        _this.defaultSymbol = _this.renderer['defaultSymbol'];\r\n\t        if (_this.defaultSymbol) {\r\n\t            var symbolObj = new SymbolClass(_this.defaultSymbol, _this.opacity);\r\n\t            _this.defaultStyle = symbolObj.olStyle;\r\n\t            _this.defaultLabelHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(_this.renderer['defaultLabel']) + \"</span>\" + symbolObj.legendHtml;\r\n\t        }\r\n\t        else {\r\n\t            _this.defaultStyle = undefined;\r\n\t            _this.defaultLabelHtml = 'other';\r\n\t        }\r\n\t        _this.valueArray = [];\r\n\t        _this.labelArray = [];\r\n\t        _this.legendArray = [];\r\n\t        _this.propertyStyleLookup = {};\r\n\t        for (var _i = 0, _a = _this.uniqueValueInfos; _i < _a.length; _i++) {\r\n\t            var uniqueVal = _a[_i];\r\n\t            _this.labelArray.push(uniqueVal['label']);\r\n\t            _this.valueArray.push(uniqueVal['value']);\r\n\t            var uniqueSym = new SymbolClass(uniqueVal.symbol, _this.opacity);\r\n\t            _this.legendArray.push(\"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(uniqueVal['label']) + \"</span>\" + uniqueSym.legendHtml);\r\n\t            _this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n\t        }\r\n\t        _this.olStyle = function (feature) {\r\n\t            var checkProperties = feature.getProperties();\r\n\t            var checkProperty = checkProperties[_this.propertyName];\r\n\t            var returnValue;\r\n\t            if (_this.propertyStyleLookup[checkProperty] !== undefined) {\r\n\t                returnValue = [_this.propertyStyleLookup[checkProperty]];\r\n\t            }\r\n\t            else {\r\n\t                returnValue = [_this.defaultStyle];\r\n\t            }\r\n\t            return returnValue;\r\n\t        };\r\n\t        if (_this.defaultLabelHtml !== null) {\r\n\t            _this.legendArray.push(_this.defaultLabelHtml);\r\n\t        }\r\n\t        _this.legendHtml = '<ul>';\r\n\t        for (var _b = 0, _c = _this.legendArray; _b < _c.length; _b++) {\r\n\t            var h = _c[_b];\r\n\t            _this.legendHtml += \"<li>\" + h + \"</li>\";\r\n\t        }\r\n\t        _this.legendHtml += '</ul>';\r\n\t        return _this;\r\n\t    }\r\n\t    return UniqueValueSymbol;\r\n\t}(SymbolGenerator));\r\n\t/**\r\n\t * style and legend object\r\n\t * @typedef {object} styleAndLegend\r\n\t * @property {styleFunc} style - style function\r\n\t * @property {string} legend - legend content\r\n\t */\r\n\t/**\r\n\t *\r\n\t * @param {object} esriResponse - layer info\r\n\t * @returns {styleAndLegend} style and legend object\r\n\t */\r\n\tfunction makeFeatureServiceLegendAndSymbol(esriResponse) {\r\n\t    \"use strict\";\r\n\t    var renderer = esriResponse.drawingInfo.renderer;\r\n\t    var symbolLegendOut = null;\r\n\t    switch (renderer.type) {\r\n\t        case 'simple':\r\n\t            switch (esriResponse.geometryType) {\r\n\t                case 'esriGeometryPoint':\r\n\t                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n\t                    break;\r\n\t                case 'esriGeometryPolyline':\r\n\t                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n\t                    break;\r\n\t                case 'esriGeometryPolygon':\r\n\t                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n\t                    break;\r\n\t                default:\r\n\t                    console.log(esriResponse);\r\n\t                    alert(esriResponse.geometryType + ' not handled');\r\n\t            }\r\n\t            break;\r\n\t        case 'uniqueValue':\r\n\t            switch (esriResponse.geometryType) {\r\n\t                case 'esriGeometryPoint':\r\n\t                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n\t                    break;\r\n\t                case 'esriGeometryPolyline':\r\n\t                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n\t                    break;\r\n\t                case 'esriGeometryPolygon':\r\n\t                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n\t                    break;\r\n\t                default:\r\n\t                    console.log(esriResponse);\r\n\t                    alert(esriResponse['geometryType'] + ' not handled');\r\n\t            }\r\n\t            break;\r\n\t        default:\r\n\t            alert('not handled renderer type: ' + renderer['type']);\r\n\t    }\r\n\t    if (symbolLegendOut == null) {\r\n\t        return { style: undefined, legend: '' };\r\n\t    }\r\n\t    else {\r\n\t        return { style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml };\r\n\t    }\r\n\t}\r\n\texports.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n\tnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n\t/**\r\n\t *\r\n\t * @param {object} lyrObject - the layer as defined in the response\r\n\t * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n\t * @returns {string} legend html\r\n\t */\r\n\tfunction mapServiceLegendItem(lyrObject, skipLayerNameAndExpander) {\r\n\t    if (skipLayerNameAndExpander === void 0) { skipLayerNameAndExpander = false; }\r\n\t    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n\t    var layerName = lyrObject['layerName'];\r\n\t    var legendItems = lyrObject['legend'];\r\n\t    var legendHtml = '';\r\n\t    if (!skipLayerNameAndExpander) {\r\n\t        legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\";\r\n\t    }\r\n\t    if (legendItems.length == 1) {\r\n\t        legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[0]['imageData'] + \"\\\">\";\r\n\t    }\r\n\t    else {\r\n\t        if (!skipLayerNameAndExpander) {\r\n\t            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n\t        }\r\n\t        legendHtml += '<ul>';\r\n\t        for (var i = 0; i < legendItems.length; i++) {\r\n\t            legendHtml += \"<li>\";\r\n\t            legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(legendItems[i]['label']) + \"</span>\";\r\n\t            legendHtml += \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[i]['imageData'] + \"\\\">\";\r\n\t            legendHtml += \"</li>\";\r\n\t        }\r\n\t        legendHtml += '</ul>';\r\n\t    }\r\n\t    if (!skipLayerNameAndExpander) {\r\n\t        legendHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\" + legendHtml;\r\n\t    }\r\n\t    return legendHtml;\r\n\t}\r\n\t/**\r\n\t * make map service legent\r\n\t * @param {object} esriResponse - layer info\r\n\t * @returns {string} legend content\r\n\t */\r\n\tfunction makeMapServiceLegend(esriResponse) {\r\n\t    \"use strict\";\r\n\t    var newLegendHtml = '';\r\n\t    var layers = esriResponse['layers'];\r\n\t    if (layers.length == 1) {\r\n\t        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n\t    }\r\n\t    else {\r\n\t        newLegendHtml += '<ul>';\r\n\t        for (var i = 0; i < layers.length; i++) {\r\n\t            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n\t        }\r\n\t        newLegendHtml += '</ul>';\r\n\t    }\r\n\t    return newLegendHtml;\r\n\t}\r\n\texports.makeMapServiceLegend = makeMapServiceLegend;\r\n\tnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\t/**\r\n\t * Created by gavorhes on 12/7/2015.\r\n\t */\r\n\tvar LayerBase_1 = __webpack_require__(8);\r\n\tvar esriToOl = __webpack_require__(15);\r\n\tvar mapPopup_1 = __webpack_require__(5);\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar ol = __webpack_require__(3);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('layers');\r\n\t/**\r\n\t * esri mapserver layer\r\n\t * @augments LayerBase\r\n\t */\r\n\tvar LayerEsriMapServer = (function (_super) {\r\n\t    __extends(LayerEsriMapServer, _super);\r\n\t    /**\r\n\t     * The base layer for all others\r\n\t     * @param {string} url - resource url\r\n\t     * @param {object} [options] - config\r\n\t     * @param {string} [options.id] - layer id\r\n\t     * @param {string} [options.name=Unnamed Layer] - layer name\r\n\t     * @param {number} [options.opacity=1] - opacity\r\n\t     * @param {boolean} [options.visible=true] - default visible\r\n\t     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n\t     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n\t     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n\t     * @param {number} [options.zIndex=0] the z index for the layer\r\n\t     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n\t     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n\t     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n\t     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n\t     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n\t     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n\t     */\r\n\t    function LayerEsriMapServer(url, options) {\r\n\t        if (options === void 0) { options = {}; }\r\n\t        var _this = _super.call(this, url, options) || this;\r\n\t        _this._source = new ol.source.TileArcGISRest({\r\n\t            url: _this.url == '' ? undefined : _this.url,\r\n\t            params: typeof options.showLayers == 'undefined' ? undefined : { layers: 'show:' + options.showLayers.join(',') }\r\n\t        });\r\n\t        _this._olLayer = new ol.layer.Tile({\r\n\t            source: _this._source,\r\n\t            visible: _this.visible,\r\n\t            opacity: _this.opacity,\r\n\t            minResolution: _this._minResolution,\r\n\t            maxResolution: _this._maxResolution\r\n\t        });\r\n\t        _this._olLayer.setZIndex(_this._zIndex);\r\n\t        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n\t        _this._esriFormat = new ol.format.EsriJSON();\r\n\t        _this._popupRequest = null;\r\n\t        _this.addLegendContent();\r\n\t        if (options.addPopup) {\r\n\t            mapPopup_1.default.addMapServicePopup(_this);\r\n\t        }\r\n\t        return _this;\r\n\t    }\r\n\t    /**\r\n\t     * add additional content to the legend\r\n\t     * @param {string} [additionalContent=''] additional content for legend\r\n\t     */\r\n\t    LayerEsriMapServer.prototype.addLegendContent = function (additionalContent) {\r\n\t        var _this = this;\r\n\t        var urlCopy = this.url;\r\n\t        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n\t            urlCopy += '/';\r\n\t        }\r\n\t        urlCopy += 'legend?f=pjson&callback=?';\r\n\t        $.get(urlCopy, {}, function (d) {\r\n\t            var newHtml = esriToOl.makeMapServiceLegend(d);\r\n\t            _super.prototype.addLegendContent.call(_this, newHtml);\r\n\t        }, 'json');\r\n\t    };\r\n\t    LayerEsriMapServer.prototype.getPopupInfo = function (queryParams) {\r\n\t        if (!this.visible) {\r\n\t            return;\r\n\t        }\r\n\t        var urlCopy = this.url;\r\n\t        if (urlCopy[urlCopy.length - 1] != '/') {\r\n\t            urlCopy += '/';\r\n\t        }\r\n\t        urlCopy += 'identify?callback=?';\r\n\t        var __this = this;\r\n\t        if (this._popupRequest != null) {\r\n\t            this._popupRequest.abort();\r\n\t        }\r\n\t        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n\t            for (var _i = 0, _a = d['results']; _i < _a.length; _i++) {\r\n\t                var r = _a[_i];\r\n\t                var popupHtml = '<table class=\"esri-popup-table\">';\r\n\t                for (var a in r['attributes']) {\r\n\t                    if (r['attributes'].hasOwnProperty(a)) {\r\n\t                        var attrVal = r['attributes'][a];\r\n\t                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n\t                            continue;\r\n\t                        }\r\n\t                        var attr = a;\r\n\t                        if (attr.length > 14) {\r\n\t                            attr = attr.slice(0, 11) + '...';\r\n\t                        }\r\n\t                        popupHtml += \"<tr><td>\" + attr + \"</td><td>\" + attrVal + \"</td></tr>\";\r\n\t                    }\r\n\t                }\r\n\t                popupHtml += '</table>';\r\n\t                mapPopup_1.default.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n\t            }\r\n\t        }, 'json');\r\n\t        this._popupRequest.always(function () {\r\n\t            __this._popupRequest = null;\r\n\t        });\r\n\t    };\r\n\t    Object.defineProperty(LayerEsriMapServer.prototype, \"source\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns {ol.source.TileArcGISRest} the vector source\r\n\t         */\r\n\t        get: function () {\r\n\t            return _super.prototype.getSource.call(this);\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    Object.defineProperty(LayerEsriMapServer.prototype, \"olLayer\", {\r\n\t        /**\r\n\t         *\r\n\t         * @returns the ol layer\r\n\t         */\r\n\t        get: function () {\r\n\t            return _super.prototype.getOlLayer.call(this);\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return LayerEsriMapServer;\r\n\t}(LayerBase_1.LayerBase));\r\n\texports.LayerEsriMapServer = LayerEsriMapServer;\r\n\tnm.LayerEsriMapServer = LayerEsriMapServer;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = LayerEsriMapServer;\r\n\n\n/***/ },\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by gavorhes on 6/1/2016.\r\n\t */\r\n\t\"use strict\";\r\n\tvar provide_1 = __webpack_require__(1);\r\n\tvar $ = __webpack_require__(2);\r\n\tvar nm = provide_1.default('collections.layerSwipe');\r\n\tvar LayerSwipe = (function () {\r\n\t    /**\r\n\t     *\r\n\t     * @param {ol.Map} map - the map\r\n\t     * @param {string} [sliderContent=''] - additional html to be added inside the slider div\r\n\t     */\r\n\t    function LayerSwipe(map, sliderContent) {\r\n\t        if (sliderContent === void 0) { sliderContent = ''; }\r\n\t        var _this = this;\r\n\t        sliderContent = sliderContent || '';\r\n\t        /**\r\n\t         *\r\n\t         * @type {Array<LayerBase>}\r\n\t         */\r\n\t        this.leftLayers = [];\r\n\t        /**\r\n\t         *\r\n\t         * @type {Array<LayerBase>}\r\n\t         */\r\n\t        this.rightLayers = [];\r\n\t        this._percentRight = 50;\r\n\t        this.offset = null;\r\n\t        this._map = map;\r\n\t        this.$mapElement = $(map.getTargetElement());\r\n\t        this.$mapElement.append(\"<div class=\\\"layer-swiper\\\">\" + sliderContent + \"</div>\");\r\n\t        this.$swiper = this.$mapElement.find('.layer-swiper');\r\n\t        this.percentRight = this.percentRight;\r\n\t        this.dragging = false;\r\n\t        this.$mapElement.mouseleave(function () {\r\n\t            _this.dragging = false;\r\n\t        });\r\n\t        this.$swiper.bind('mousewheel DOMMouseScroll', function (evt) {\r\n\t            evt.preventDefault();\r\n\t        });\r\n\t        this.$swiper.mousedown(function (evt) {\r\n\t            _this.dragging = true;\r\n\t            _this.offset = evt.offsetX;\r\n\t        });\r\n\t        $(window).mouseup(function () {\r\n\t            _this.dragging = false;\r\n\t        });\r\n\t        this.$mapElement.mousemove(function (evt) {\r\n\t            if (_this.dragging) {\r\n\t                var mapLeft = _this.$mapElement.position().left;\r\n\t                var mapWidth = _this.$mapElement.width();\r\n\t                _this.percentRight = 100 * (evt.pageX - _this.offset - mapLeft) / mapWidth;\r\n\t            }\r\n\t        });\r\n\t    }\r\n\t    /**\r\n\t     *\r\n\t     * @param {LayerBase|*} lyr - layer to be added to left side\r\n\t     */\r\n\t    LayerSwipe.prototype.addLeftLayer = function (lyr) {\r\n\t        var _this = this;\r\n\t        if (this.leftLayers.indexOf(lyr) != -1) {\r\n\t            return;\r\n\t        }\r\n\t        lyr.olLayer.on('precompose', function (event) {\r\n\t            var ctx = event['context'];\r\n\t            var width = ctx.canvas.width * (_this.percentRight / 100);\r\n\t            ctx.save();\r\n\t            ctx.beginPath();\r\n\t            ctx.rect(0, 0, width, ctx.canvas.height);\r\n\t            ctx.clip();\r\n\t        });\r\n\t        lyr.olLayer.on('postcompose', function (event) {\r\n\t            var ctx = event['context'];\r\n\t            ctx.restore();\r\n\t        });\r\n\t        this.leftLayers.push(lyr);\r\n\t    };\r\n\t    /**\r\n\t     *\r\n\t     * @param {LayerBase|*} lyr - layer to be added to right side\r\n\t     */\r\n\t    LayerSwipe.prototype.addRightLayer = function (lyr) {\r\n\t        var _this = this;\r\n\t        if (this.rightLayers.indexOf(lyr) != -1) {\r\n\t            return;\r\n\t        }\r\n\t        lyr.olLayer.on('precompose', function (event) {\r\n\t            var ctx = event['context'];\r\n\t            var width = ctx.canvas.width * (_this.percentRight / 100);\r\n\t            ctx.save();\r\n\t            ctx.beginPath();\r\n\t            ctx.rect(width, 0, ctx.canvas.width - width, ctx.canvas.height);\r\n\t            ctx.clip();\r\n\t        });\r\n\t        lyr.olLayer.on('postcompose', function (event) {\r\n\t            var ctx = event['context'];\r\n\t            ctx.restore();\r\n\t        });\r\n\t        this.rightLayers.push(lyr);\r\n\t    };\r\n\t    Object.defineProperty(LayerSwipe.prototype, \"percentRight\", {\r\n\t        get: function () {\r\n\t            return this._percentRight;\r\n\t        },\r\n\t        set: function (percent) {\r\n\t            var maxed = this.$swiper.position().left + this.$swiper.width() > this.$mapElement.width();\r\n\t            if (percent < 0) {\r\n\t                return;\r\n\t            }\r\n\t            else if (maxed && percent > this.percentRight) {\r\n\t                return;\r\n\t            }\r\n\t            this._percentRight = percent;\r\n\t            this.$swiper.css('left', this._percentRight.toFixed(2) + \"%\");\r\n\t            this._map.render();\r\n\t        },\r\n\t        enumerable: true,\r\n\t        configurable: true\r\n\t    });\r\n\t    return LayerSwipe;\r\n\t}());\r\n\tnm.LayerSwipe = LayerSwipe;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = LayerSwipe;\r\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// compare-test.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0da249d398ab392d2e0f","/**\r\n * Created by gavorhes on 6/1/2016.\r\n */\r\nimport {quickMap} from '../olHelpers/quickMap';\r\nimport LayerSwipe from '../olHelpers/layerSwipe';\r\nimport {LayerEsriMapServer} from '../layers/LayerEsriMapServer';\r\n\r\nlet map = quickMap();\r\n\r\n\r\nlet swiper = new LayerSwipe(map);\r\n\r\n\r\nlet wisDotRegions = new LayerEsriMapServer(\r\n    'http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/Metamanager_regions/MapServer',\r\n    {\r\n        minZoom: 6,\r\n        maxZoom: 12,\r\n        name: 'WisDOT Regions'\r\n    });\r\n\r\nlet metamanagerSegments = new LayerEsriMapServer(\r\n    'http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/MM_All_Segments/MapServer',\r\n    {\r\n        minZoom: 7,\r\n        visible: true,\r\n        name: 'Metamanager Segments'\r\n    });\r\n\r\nlet truckSpeed2014 = new LayerEsriMapServer(\r\n    'http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/NPMRDS/compareDynamic/MapServer',\r\n    {\r\n        minZoom: 7,\r\n        visible: true,\r\n        name: 'truck2014',\r\n        showLayers: [8]\r\n    });\r\n\r\nlet truckSpeed2015 = new LayerEsriMapServer(\r\n    'http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/NPMRDS/compareDynamic/MapServer',\r\n    {\r\n        minZoom: 7,\r\n        visible: true,\r\n        name: 'truck2015',\r\n        showLayers: [9]\r\n    });\r\n\r\nmap.addLayer(wisDotRegions.olLayer);\r\nmap.addLayer(truckSpeed2014.olLayer);\r\nmap.addLayer(truckSpeed2015.olLayer);\r\nmap.addLayer(metamanagerSegments.olLayer);\r\n\r\n\r\nswiper.addLeftLayer(wisDotRegions);\r\nswiper.addRightLayer(metamanagerSegments);\r\n\r\nswiper.addLeftLayer(truckSpeed2014);\r\nswiper.addRightLayer(truckSpeed2015);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/_test/compare-test.ts","/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\n\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace){\r\n    \"use strict\";\r\n    if (typeof window['gv'] == 'undefined'){\r\n        window['gv'] = {};\r\n    }\r\n\r\n    let parts = namespace.split('.');\r\n    let nameSpace = window['gv'];\r\n\r\n    for (let i=0; i< parts.length; i++){\r\n        let newObject = nameSpace[parts[i]];\r\n\r\n        if (typeof newObject == 'undefined'){\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n\r\n    return nameSpace;\r\n}\r\n\r\nprovide('util');\r\nwindow['gv'].util.provide = provide;\r\n\r\nexport default provide;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/provide.ts","module.exports = $;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6","module.exports = ol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ol\"\n// module id = 3\n// module chunks = 0 1 2 3","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport provide from './provide';\r\nlet nm = provide('util');\r\n\r\n\r\n/**\r\n * guids are used to uniquely identify groups and features\r\n * @returns {string} a new guid\r\n */\r\nfunction makeGuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n            .replace(/[xy]/g, function (c) {\r\n                let r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n\r\n                return v.toString(16);\r\n            });\r\n\r\n}\r\nnm.makeGuid = makeGuid;\r\nexport default makeGuid;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/makeGuid.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapPopupCls from './mapPopupCls';\r\n\r\n/**\r\n * The single popup object catch is that it is common to multimap pages\r\n * @type {MapPopupCls}\r\n */\r\nexport const mapPopup = new MapPopupCls() as MapPopupCls;\r\nexport default mapPopup;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapPopup.ts","/**\r\n * Created by gavorhes on 12/8/2015.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\n\r\n/**\r\n * base interaction\r\n */\r\nexport class MapInteractionBase {\r\n    _map: ol.Map;\r\n    _initialized: boolean;\r\n    _subtype: string;\r\n\r\n    /**\r\n     * map interaction base\r\n     * @param subtype - the interaction subtype\r\n     */\r\n    constructor(subtype: string) {\r\n        this._map = null;\r\n        this._initialized = false;\r\n        this._subtype = subtype;\r\n    }\r\n\r\n    /**\r\n     * base initializer, returns true for already initialized\r\n     * @param theMap - the ol Map\r\n     * @returns true for already initialized\r\n     */\r\n    init(theMap: ol.Map){\r\n        if (!this._initialized){\r\n            this._map = theMap;\r\n            this._initialized = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get reference to the ol map object\r\n     * @returns {ol.Map} the map object\r\n     */\r\n    get map() {\r\n        return this._map;\r\n    }\r\n\r\n    /**\r\n     * get if is initialized\r\n     * @returns {boolean} is initialized\r\n     */\r\n    get initialized() {\r\n        return this._initialized;\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     * @protected\r\n     */\r\n    _checkInit() {\r\n        if (!this.initialized) {\r\n            let msg = `${this._subtype} object not initialized`;\r\n            alert(msg);\r\n            console.log(msg);\r\n            throw msg;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     */\r\n    checkInit(){\r\n        this._checkInit();\r\n    }\r\n}\r\n\r\nnm.MapInteractionBase = MapInteractionBase;\r\nexport default MapInteractionBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapInteractionBase.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapMoveCls from './mapMoveCls';\r\n\r\n/**\r\n * The single map move object catch is that it is common to multimap pages\r\n * @type {MapMoveCls}\r\n */\r\n\r\nexport const mapMove = new MapMoveCls();\r\nexport default mapMove;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapMove.ts","import * as zoomResolutionConvert from '../olHelpers/zoomResolutionConvert';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport makeGuid from '../util/makeGuid';\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\nexport interface LayerBaseOptions{\r\n    id?: string;\r\n    name?: string;\r\n    opacity?: number;\r\n    visible?: boolean;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    params?: any;\r\n    zIndex?: number;\r\n    loadCallback?: Function;\r\n    legendCollapse?: boolean;\r\n    legendCheckbox?: boolean;\r\n    legendContent?: string;\r\n}\r\n\r\n\r\n/**\r\n * The base layer class\r\n * @abstract\r\n */\r\nexport abstract class LayerBase {\r\n\r\n    protected _legendCheckbox: boolean;\r\n    protected _url: string;\r\n    protected _opacity: number;\r\n    protected _minZoom: number;\r\n    protected _maxZoom: number;\r\n    protected _visible: boolean;\r\n    protected _loaded: boolean;\r\n    protected _zIndex: number;\r\n    protected _legendContent: string;\r\n    protected _params: any;\r\n    protected _id: string;\r\n    protected _name: string;\r\n    protected _source: ol.source.Source;\r\n    protected _animate: boolean;\r\n    protected _legendCollapse: boolean;\r\n    protected _maxResolution: number;\r\n    protected _minResolution: number;\r\n    protected  _$legendDiv: JQuery;\r\n    loadCallback: Function;\r\n    protected _olLayer: ol.layer.Layer;\r\n    protected _applyCollapseCalled: boolean;\r\n\r\n\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - url for source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id=makeGuid()] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] - the z index for the layer\r\n     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n     */\r\n    constructor(url: string, options: LayerBaseOptions = {}) {\r\n        options = options || {} as LayerBaseOptions;\r\n\r\n        if (typeof url !== 'string') {\r\n            throw 'Invalid URL';\r\n        }\r\n        this._url = url;\r\n\r\n\r\n        this._params = typeof options.params == 'object' ? options.params : {};\r\n        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n\r\n        this.id = options.id || makeGuid();\r\n        this._name = options.name || 'Unnamed Layer';\r\n        this.animate = false;\r\n        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1;\r\n        } else if (this._opacity < 0) {\r\n            this._opacity = 0;\r\n        }\r\n\r\n        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n\r\n        this._source = undefined;\r\n\r\n        /**\r\n         *\r\n         * @protected\r\n         */\r\n        this._olLayer = undefined;\r\n        this._loaded = false;\r\n\r\n        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n        if (typeof this._maxResolution !== 'undefined') {\r\n            this._maxResolution += 0.00001;\r\n        }\r\n        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n\r\n        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n\r\n        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n        };\r\n\r\n\r\n        this._legendContent = '';\r\n\r\n        if (this._legendCheckbox) {\r\n            this._legendContent += `<input type=\"checkbox\" ${this.visible ? 'checked' : ''} ` +\r\n                `class=\"legend-check\" id=\"${this.id}-legend-layer-check\"><span></span>`;\r\n            this._legendContent += `<label for=\"${this.id}-legend-layer-check\" class=\"legend-layer-name\">${this.name}</label>`;\r\n        } else {\r\n            this._legendContent += `<label class=\"legend-layer-name\">${this.name}</label>`;\r\n        }\r\n\r\n        this._$legendDiv = null;\r\n        this._applyCollapseCalled = false;\r\n        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n    }\r\n\r\n    /**\r\n     * base load function, sets _loaded = true if it is not already\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    _load() {\r\n        if (this.loaded == true) {\r\n            return true;\r\n        } else {\r\n            this._loaded = true;\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the legend html, be sure to only add to the DOM once\r\n     * @returns {string} html for layer wrapped in a div\r\n     */\r\n    getLegendDiv() {\r\n        return `<div class=\"legend-layer-div\" id=\"${this.id}-legend-layer-div\">${this._legendContent}</div>`;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param additionalContent - additional content to add to legend\r\n     * @private\r\n     */\r\n    _addLegendContent(additionalContent='') {\r\n\r\n        let addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n\r\n        if (addCollapse) {\r\n            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n        }\r\n\r\n        this._legendContent += additionalContent;\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n            this._$legendDiv.append(additionalContent);\r\n            this.applyCollapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=] - additonal content to add\r\n     */\r\n    addLegendContent(additionalContent) {\r\n        this._addLegendContent(additionalContent);\r\n    }\r\n\r\n    applyCollapse() {\r\n        if (this._applyCollapseCalled) {\r\n            console.log('collapse already applied');\r\n\r\n            return undefined;\r\n        }\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n\r\n            let $expander = this._$legendDiv.find('.legend-items-expander');\r\n\r\n            if ($expander.length > 0) {\r\n                this._applyCollapseCalled = true;\r\n\r\n                $expander.click(function () {\r\n                    let $this = $(this);\r\n\r\n                    $this.siblings('ul').slideToggle();\r\n\r\n                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                        $this.removeClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9660;');\r\n                    } else {\r\n                        $this.addClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9654;');\r\n                    }\r\n                });\r\n\r\n                if (this._legendCollapse) {\r\n                    $expander.trigger('click');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * trick to refresh the layer\r\n     */\r\n    refresh() {\r\n        if (this.source) {\r\n            this.source.refresh();\r\n        }\r\n    }\r\n\r\n    get id(): string{\r\n        return this._id;\r\n    }\r\n\r\n    set id(newId: string){\r\n        this._id = newId;\r\n    }\r\n\r\n    get animate(): boolean{\r\n        return this._animate;\r\n    }\r\n\r\n    set animate(animate: boolean){\r\n        this._animate = animate;\r\n    }\r\n\r\n    /**\r\n     * get the legend content\r\n     * @type {string}\r\n     */\r\n    get legendContent() {\r\n        return this._legendContent;\r\n    }\r\n\r\n    /**\r\n     * set the legend content directly\r\n     * @param {string} newVal - new content\r\n     * @protected\r\n     */\r\n    set legendContent(newVal) {\r\n        this._legendContent = newVal;\r\n    }\r\n\r\n    /**\r\n     * get the map get params\r\n     * @type {object}\r\n     */\r\n    get params() {\r\n        return this._params;\r\n    }\r\n\r\n    /**\r\n     * set the map get params\r\n     * @param {object} newParams - new get params\r\n     * @protected\r\n     */\r\n    set params(newParams) {\r\n        this._params = newParams;\r\n    }\r\n\r\n    /**\r\n     * get the minimum resolution\r\n     * @type {number|*}\r\n     */\r\n    get minResolution() {\r\n        return this._minResolution;\r\n    }\r\n\r\n    /**\r\n     * get the maximum resolution\r\n     * @type {number|*}\r\n     */\r\n    get maxResolution() {\r\n        return this._maxResolution;\r\n    }\r\n\r\n    /**\r\n     * get min zoom\r\n     * @type {number|*}\r\n     */\r\n    get minZoom() {\r\n        return this._minZoom;\r\n    }\r\n\r\n    /**\r\n     * get max zoom\r\n     * @type {number|*}\r\n     */\r\n    get maxZoom() {\r\n        return this._maxZoom;\r\n    }\r\n\r\n    /**\r\n     * get the url\r\n     * @type {string}\r\n     */\r\n    get url() {\r\n        return this._url;\r\n    }\r\n\r\n    /**\r\n     * Get the layer visibility\r\n     * @type {boolean}\r\n     */\r\n    get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    /**\r\n     * set the visibility\r\n     * @param visibility\r\n     */\r\n    set visible(visibility: boolean) {\r\n        this.setVisible(visibility);\r\n    }\r\n\r\n    protected setVisible(visibility: boolean) {\r\n        this._visible = visibility;\r\n        if (this.olLayer) {\r\n            this.olLayer.setVisible(this._visible);\r\n            if (visibility && !this._loaded) {\r\n                this._load();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Get the layer opacity\r\n     * @type {number}\r\n     */\r\n    get opacity() {\r\n        return this._opacity;\r\n    }\r\n\r\n    /**\r\n     * Set the layer opacity\r\n     * @param {number} opacity - layer opacity\r\n     */\r\n    set opacity(opacity) {\r\n        this._opacity = opacity;\r\n        if (this.olLayer) {\r\n            this.olLayer.setOpacity(this._opacity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the layer name\r\n     * @type {string}\r\n     */\r\n    get name() {\r\n        return this._name;\r\n    }\r\n\r\n    /**\r\n     * set the layer name\r\n     * @param {string} newName - the new name\r\n     */\r\n    set name(newName) {\r\n        this._name = newName;\r\n    }\r\n\r\n    /**\r\n     * Check if the layer is loaded\r\n     * @type {boolean}\r\n     */\r\n    get loaded() {\r\n        return this._loaded;\r\n    }\r\n\r\n    /**\r\n     * get the layer source\r\n     * @type {*}\r\n     */\r\n    get source(): ol.source.Source {\r\n        return this.getSource();\r\n    }\r\n\r\n\r\n    protected getSource(): ol.source.Source{\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * get the z index\r\n     */\r\n    get zIndex(): number {\r\n        return this._zIndex;\r\n    }\r\n\r\n    /**\r\n     * set the z index\r\n     */\r\n    set zIndex(newZ: number) {\r\n        this._zIndex = newZ;\r\n    }\r\n\r\n    protected setZIndex(newZ: number){\r\n\r\n    }\r\n\r\n    /**\r\n     * the the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Layer {\r\n        return this.getOlLayer();\r\n    }\r\n\r\n    protected getOlLayer(): ol.layer.Layer{\r\n        return this._olLayer;\r\n    }\r\n}\r\n\r\nnm.LayerBase = LayerBase;\r\nexport default LayerBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/LayerBase.ts","import provide from './provide';\r\nlet nm = provide('util.checkDefined');\r\n\r\n/**\r\n * check if the input is undefined or null\r\n * @param input - input pointer\r\n * @returns true undefined or null\r\n */\r\nexport function undefinedOrNull (input): boolean{\r\n    \"use strict\";\r\n\r\n    return (typeof input === 'undefined' || input === null);\r\n}\r\n\r\nnm.undefinedOrNull = undefinedOrNull;\r\n\r\n\r\n/**\r\n * check if the input is defined and not null\r\n * @param input - input pointer\r\n * @returns true defined and not null\r\n */\r\nexport function definedAndNotNull (input: any): boolean{\r\n    \"use strict\";\r\n\r\n    return !(undefinedOrNull(input));\r\n}\r\n\r\nnm.definedAndNotNull = definedAndNotNull;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/checkDefined.ts","import LayerBaseVector from \"../layers/LayerBaseVector\";\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport * as checkDefined from '../util/checkDefined';\r\nimport provide from '../util/provide';\r\nimport makeGuid from '../util/makeGuid';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\nexport interface extentObject{\r\n    minX: number;\r\n    minY: number;\r\n    maxX: number;\r\n    maxY: number;\r\n}\r\n\r\nexport interface mapMoveCallbackFunction{\r\n    /**\r\n     *\r\n     * @param extent extent as predefined object minX, minX, maxX, maxY\r\n     * @param zoomLevel current zoom level\r\n     * @param evtType the event type 'change:center', 'change:resolution'\r\n     */\r\n    (extent: extentObject, zoomLevel: number, evtType?: string): any\r\n}\r\n\r\n\r\n/**\r\n * assists with map move interactions, trigger callback functions\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapMoveCls extends MapInteractionBase {\r\n    _mapExtent: extentObject;\r\n    _zoomLevel: number;\r\n    _lookupLayer: Object;\r\n    _arrLayer: Array<LayerBaseVector>;\r\n    _arrLyrTimeout: Array<number>;\r\n    _mapMoveCallbackTimeout: Array<number>;\r\n    _mapMoveCallbackDelays: Array<number>;\r\n    _mapMoveCallbacksLookup: Object;\r\n    _mapMoveCallbackContext: Array<Object>;\r\n    _mapMoveCallbacks: Array<mapMoveCallbackFunction>;\r\n    _arrLyrRequest: Array<any>;\r\n\r\n    /**\r\n     * constructor called implicitly\r\n     */\r\n    constructor() {\r\n        super('map move');\r\n        this._arrLyrRequest = [];\r\n        this._arrLyrTimeout = [];\r\n        this._arrLayer = [];\r\n        this._lookupLayer = {};\r\n\r\n        this._mapMoveCallbacks = [];\r\n        this._mapMoveCallbacksLookup = {};\r\n        this._mapMoveCallbackDelays = [];\r\n        this._mapMoveCallbackContext = [];\r\n        this._mapMoveCallbackTimeout = [];\r\n\r\n        this._mapExtent = undefined;\r\n        this._zoomLevel = undefined;\r\n\r\n    }\r\n\r\n    /**\r\n     * initialize the map move object\r\n     * @param theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map){\r\n        super.init(theMap);\r\n\r\n        this.map.getView().on(['change:center', 'change:resolution'], (e) =>{\r\n\r\n           this._updateMapExtent();\r\n\r\n            // trigger the layer updates\r\n            for (let i = 0; i < this._arrLayer.length; i++) {\r\n                this.triggerLyrLoad(this._arrLayer[i], i, e.type);\r\n            }\r\n\r\n            // trigger the map callbacks\r\n            for (let i = 0; i < this._mapMoveCallbacks.length; i++) {\r\n                this.triggerMoveCallback(i, e.type);\r\n            }\r\n        });\r\n    }\r\n\r\n    _updateMapExtent() {\r\n        let theView = this.map.getView();\r\n        this._zoomLevel = theView.getZoom();\r\n\r\n        let extentArray = theView.calculateExtent(this.map.getSize());\r\n\r\n        this._mapExtent = {\r\n            minX: extentArray[0],\r\n            minY: extentArray[1],\r\n            maxX: extentArray[2],\r\n            maxY: extentArray[3]\r\n        };\r\n    }\r\n\r\n    /**\r\n     * return the map extent\r\n     */\r\n    get mapExtent() {\r\n        if (!this._mapExtent) {\r\n            this._updateMapExtent();\r\n        }\r\n\r\n        return this._mapExtent;\r\n    }\r\n\r\n    /**\r\n     * Trigger the layer load\r\n     * @param lyr the layer being acted on\r\n     * @param index index of the layer\r\n     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n     */\r\n    triggerLyrLoad(lyr: LayerBaseVector, index?: number, eventType?: string) {\r\n\r\n        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            throw 'need to define lyr or index';\r\n        } else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            index = this._arrLayer.indexOf(lyr);\r\n        } else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n            lyr = this._arrLayer[index];\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._arrLyrTimeout[index] != null) {\r\n            clearTimeout(this._arrLyrTimeout[index]);\r\n            this._arrLyrTimeout[index] = null;\r\n        }\r\n\r\n        // abort if necessary and clear the request\r\n        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n            this._arrLyrRequest[index].abort();\r\n            this._arrLyrRequest[index] = null;\r\n        }\r\n\r\n        // dummy callback used if before load returns false\r\n        let callbackFunc = function () {};\r\n\r\n        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n\r\n            let __this = this;\r\n\r\n            callbackFunc = function () {\r\n                function innerFunction(theLayer, theIndex) {\r\n                    let _innerThis = this;\r\n                    this._arrLyrRequest[theIndex] = $.get(\r\n                        theLayer.url,\r\n                        theLayer.mapMoveParams,\r\n                        function (d) {\r\n                            /**\r\n                             * @type {LayerBaseVector}\r\n                             */\r\n                            theLayer.mapMoveCallback(d);\r\n                            theLayer.loadCallback();\r\n                        }, 'json').fail(\r\n                        function (jqXHR) {\r\n                            if (jqXHR.statusText != 'abort') {\r\n                                console.log('failed');\r\n                                console.log(theLayer.url);\r\n                                console.log(theLayer.mapMoveParams);\r\n                            }\r\n                        }).always(\r\n                        function () {\r\n                            _innerThis._arrLyrTimeout[theIndex] = null;\r\n                            _innerThis._arrLyrRequest[theIndex] = null;\r\n                        });\r\n                }\r\n                innerFunction.call(__this, lyr, index);\r\n            };\r\n        } else {\r\n            lyr.clear();\r\n        }\r\n        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n    }\r\n\r\n    /**\r\n     * trigger the map move call back at the given index\r\n     * @param ind - the index of the layer\r\n     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n     * @param functionId=undefined the function id used to reference the added callback function\r\n     */\r\n    triggerMoveCallback(ind: number, eventType?: string, functionId?: string) {\r\n\r\n        if (typeof ind == 'undefined' && typeof functionId == 'undefined'){\r\n            throw 'either the function index or the id must be defined';\r\n        }\r\n\r\n        if (typeof ind !== 'number'){\r\n            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n        }\r\n\r\n        if (ind < 0){\r\n            console.log('function not found');\r\n\r\n            return;\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n            this._mapMoveCallbackTimeout[ind] = null;\r\n        }\r\n\r\n        let ctx = this._mapMoveCallbackContext[ind];\r\n        let theFunc = this._mapMoveCallbacks[ind];\r\n\r\n        let __this = this;\r\n\r\n        let f = function () {\r\n            if (ctx !== null) {\r\n                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n            } else {\r\n                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n        };\r\n\r\n        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n    }\r\n\r\n    /**\r\n     * Add a layer to the interaction\r\n     * @param  lyr - layer to add\r\n     * @param triggerOnAdd - if the layer should be loaded on add\r\n     */\r\n    addVectorLayer(lyr: LayerBaseVector, triggerOnAdd: boolean = true) {\r\n        if (this._arrLayer.indexOf(lyr) > -1) {\r\n            console.log('already added ' + lyr.name + ' to map move');\r\n\r\n            return;\r\n        }\r\n        this._checkInit();\r\n\r\n        this._arrLyrRequest.push(null);\r\n        this._arrLyrTimeout.push(null);\r\n        this._arrLayer.push(lyr);\r\n        this._lookupLayer[lyr.id] = lyr;\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * add a callback to the map move event\r\n     * @param func - callback function\r\n     * @param context - the context to use for this function\r\n     * @param delay=50 the delay before call load\r\n     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n     * @param functionId optional id to reference the function later for outside triggering\r\n     */\r\n    addCallback(func: mapMoveCallbackFunction, context?: any, delay?: number, triggerOnAdd? : boolean, functionId?: string) {\r\n\r\n        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n            console.log('this function already added to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        if (!functionId){\r\n            functionId = makeGuid();\r\n        }\r\n\r\n        this._mapMoveCallbacks.push(func);\r\n        this._mapMoveCallbacksLookup[functionId] = functionId;\r\n        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n        this._mapMoveCallbackTimeout.push(null);\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n        }\r\n    }\r\n}\r\n\r\nnm.MapMoveCls = MapMoveCls;\r\nexport default MapMoveCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapMoveCls.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport propertiesZoomStyle from '../olHelpers/propertiesZoomStyle';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport {LayerBaseVector} from \"../layers/LayerBaseVector\";\r\nimport LayerEsriMapServer from \"../layers/LayerEsriMapServer\";\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface popupChangedFunction {\r\n    ($popContent: JQuery): any;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport interface popupCallback {\r\n    /**\r\n     * Callback function for the popup\r\n     * @param featureProperties\r\n     * @param jqRef\r\n     */\r\n    (featureProperties: Object, jqRef?: JQuery): string | boolean;\r\n}\r\n\r\ninterface mapEvent {\r\n    coordinate: ol.Coordinate;\r\n    pixel: ol.Pixel;\r\n    dragging: boolean|any;\r\n    originalEvent: Event;\r\n}\r\n\r\n\r\nexport class FeatureLayerProperties {\r\n\r\n    feature: ol.Feature;\r\n    layer: LayerBaseVector|LayerEsriMapServer;\r\n    layerIndex: number;\r\n    selectionLayer: ol.layer.Vector;\r\n    popupContent: string;\r\n    esriLayerName: string;\r\n\r\n    /**\r\n     *\r\n     * @param feature the feature\r\n     * @param layer - the layer in the popup\r\n     * @param layerIndex - index of the layer\r\n     * @param selectionLayer - the ol selection layer\r\n     * @param [esriLayerName=undefined] - esri layer name\r\n     */\r\n    constructor(feature: ol.Feature, layer: LayerBaseVector|LayerEsriMapServer, layerIndex: number, selectionLayer: ol.layer.Vector, esriLayerName?: string) {\r\n        this.feature = feature;\r\n        this.layer = layer;\r\n        this.layerIndex = layerIndex;\r\n        this.selectionLayer = selectionLayer;\r\n        this.popupContent = '';\r\n        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n    }\r\n\r\n    get layerName() {\r\n        if (typeof this.esriLayerName == 'string') {\r\n            return this.esriLayerName;\r\n        } else {\r\n            return this.layer.name;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * map popup class\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapPopupCls extends MapInteractionBase {\r\n    private _popupOpen: boolean;\r\n    private _passThroughLayerFeatureArray: Array<FeatureLayerProperties>;\r\n    private _currentPopupIndex: number;\r\n    private _popupContentLength: number;\r\n    private _esriMapServiceLayers: Array<LayerEsriMapServer>;\r\n    private _$popupCloser: JQuery;\r\n    private _$popupContent: JQuery;\r\n    private _$popupContainer: JQuery;\r\n    private _popupOverlay: ol.Overlay;\r\n    private _arrPopupLayers: Array<LayerBaseVector>;\r\n    private _popupCoordinate: ol.Coordinate;\r\n    private _popupChangedFunctions: Array<popupChangedFunction>;\r\n    private _mapClickFunctions: Array<Function>;\r\n    private _selectionLayerLookup: Object;\r\n    private _arrPopupLayerIds: Array<string>;\r\n    private _arrPopupLayerNames: Array<string>;\r\n    private _arrPopupOlLayers: Array<ol.layer.Vector>;\r\n    private _arrPopupContentFunction: Array<popupCallback>;\r\n    private _selectionLayers: Array<ol.layer.Vector>;\r\n\r\n    /**\r\n     * Definition for openlayers style function\r\n     * @callback olStyleFunction\r\n     * &param feature the openlayers vector feature\r\n     * $param\r\n     */\r\n\r\n\r\n    /**\r\n     * map popup constructor\r\n     */\r\n    constructor() {\r\n        super('map popup');\r\n        this._arrPopupLayerIds = [];\r\n        this._arrPopupLayerNames = [];\r\n        this._arrPopupLayers = [];\r\n        this._arrPopupOlLayers = [];\r\n        this._arrPopupContentFunction = [];\r\n        this._$popupContainer = undefined;\r\n        this._$popupContent = undefined;\r\n        this._$popupCloser = undefined;\r\n        this._popupOverlay = undefined;\r\n        this._selectionLayers = [];\r\n        this._selectionLayerLookup = {};\r\n        this._mapClickFunctions = [];\r\n\r\n        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n        //this._popupChangedLookup = {'a': a};\r\n        this._popupChangedFunctions = [];\r\n        this._esriMapServiceLayers = [];\r\n\r\n        this._popupOpen = false;\r\n        this._popupCoordinate = null;\r\n\r\n        this._passThroughLayerFeatureArray = [];\r\n\r\n        this._currentPopupIndex = -1;\r\n        this._popupContentLength = 0;\r\n\r\n    }\r\n\r\n    /**\r\n     * map popup initialization\r\n     * @param {ol.Map} theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map) {\r\n        super.init(theMap);\r\n\r\n        let $map;\r\n        let target = this.map.getTarget();\r\n\r\n        if (typeof target == 'string') {\r\n            $map = $('#' + target);\r\n        }\r\n        else {\r\n            $map = $(target);\r\n        }\r\n\r\n        $map.append(\r\n            '<div class=\"ol-popup\">' +\r\n            '<span class=\"ol-popup-closer\">X</span>' +\r\n            '<div class=\"popup-content\"></div>' +\r\n            '</div>'\r\n        );\r\n\r\n        this._$popupContainer = $map.find('.ol-popup');\r\n        this._$popupContent = $map.find('.popup-content');\r\n        this._$popupCloser = $map.find('.ol-popup-closer');\r\n\r\n        let _ease = (n: number): number => {\r\n            return ol.easing.inAndOut(n);\r\n        };\r\n\r\n\r\n        this._popupOverlay = new ol.Overlay({\r\n            element: this._$popupContainer[0],\r\n            autoPan: true,\r\n            autoPanAnimation: {\r\n                duration: 250,\r\n                source: theMap.getView().getCenter(),\r\n                easing: _ease\r\n            }\r\n        });\r\n\r\n        this._map.addOverlay(this._popupOverlay);\r\n\r\n        this._$popupCloser.click((evt) => {\r\n            this.closePopup();\r\n        });\r\n\r\n        // display popup on click\r\n        this._map.on('singleclick', (evt) => {\r\n\r\n            this.closePopup();\r\n            this._popupCoordinate = evt['coordinate'];\r\n\r\n            // esri map service layers\r\n            if (this._esriMapServiceLayers.length > 0) {\r\n\r\n                let queryParams = {\r\n                    geometry: evt['coordinate'].join(','),\r\n                    geometryType: 'esriGeometryPoint',\r\n                    layers: 'all',\r\n                    sr: this._map.getView().getProjection().getCode().split(':')[1],\r\n                    mapExtent: (this._map.getView().calculateExtent(this._map.getSize()) as number[]).join(','),\r\n                    imageDisplay: (this._map.getSize() as number[]).join(',') + ',96',\r\n                    returnGeometry: true,\r\n                    tolerance: 15,\r\n                    f: 'pjson'\r\n                };\r\n\r\n                for (let l of this._esriMapServiceLayers) {\r\n                    l.getPopupInfo(queryParams);\r\n                }\r\n            }\r\n\r\n            let layerFeatureObjectArray = this._featuresAtPixel(evt['pixel']);\r\n\r\n            this._passThroughLayerFeatureArray = [];\r\n            this._currentPopupIndex = -1;\r\n\r\n            for (let i = 0; i < layerFeatureObjectArray.length; i++) {\r\n                let featObj = layerFeatureObjectArray[i];\r\n\r\n                let props = featObj.feature.getProperties();\r\n\r\n                let popupContentResponse = this._arrPopupContentFunction[featObj.layerIndex](props, this._$popupContent);\r\n\r\n                //skip if return was false\r\n                if (popupContentResponse === false) {\r\n                    //continue;\r\n                } else if (typeof popupContentResponse == 'string') {\r\n                    featObj.popupContent = popupContentResponse as string;\r\n                    this._passThroughLayerFeatureArray.push(featObj);\r\n                } else {\r\n                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n                }\r\n            }\r\n\r\n            this._popupContentLength = this._passThroughLayerFeatureArray.length;\r\n\r\n            this._currentPopupIndex = -1;\r\n\r\n            let popupHtml = '<div class=\"ol-popup-nav\">';\r\n            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n            popupHtml += `<span class=\"current-popup-item-number\" style=\"font-weight: bold;\"></span>`;\r\n            popupHtml += `<span>&nbsp;of&nbsp;</span>`;\r\n            popupHtml += `<span class=\"popup-content-length\" style=\"font-weight: bold;\">${this._popupContentLength}</span>`;\r\n            popupHtml += `<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>`;\r\n            popupHtml += `<span class=\"current-popup-layer-name\"></span>`;\r\n            popupHtml += '</div>';\r\n            popupHtml += '<div class=\"ol-popup-inner\">';\r\n\r\n            popupHtml += '</div>';\r\n\r\n            this._$popupContent.html(popupHtml);\r\n\r\n            this._$popupContent.find('.previous-popup').click(() => {\r\n                if (this._popupContentLength == 1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == 0) {\r\n                    this._currentPopupIndex = this._popupContentLength - 1;\r\n                } else {\r\n                    this._currentPopupIndex--;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n            let nextPopup = this._$popupContent.find('.next-popup');\r\n\r\n            nextPopup.click(() => {\r\n                if (this._popupContentLength == 1 && this._currentPopupIndex > -1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == this._popupContentLength - 1) {\r\n                    this._currentPopupIndex = 0;\r\n                } else {\r\n                    this._currentPopupIndex++;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n\r\n            if (this._popupContentLength > 0) {\r\n                nextPopup.trigger('click');\r\n                this._popupOverlay.setPosition(this._popupCoordinate);\r\n                this._$popupContent.scrollTop(0);\r\n                this._popupOpen = true;\r\n            }\r\n        });\r\n\r\n        //change mouse cursor when over marker\r\n        this._map.on('pointermove', (evt) => {\r\n            if (evt['dragging']) {\r\n                return;\r\n            }\r\n            let pixel = this.map.getEventPixel(evt['originalEvent']);\r\n            let hit = this.map.hasFeatureAtPixel(pixel, (lyrCandidate) => {\r\n                for (let olLayer of this._arrPopupOlLayers) {\r\n                    if (lyrCandidate == olLayer) {\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            });\r\n            let mapElement = this.map.getTargetElement() as HTMLElement;\r\n            mapElement.style.cursor = hit ? 'pointer' : '';\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * helper to select features\r\n     * @private\r\n     */\r\n    _triggerFeatSelect() {\r\n        let $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n        let $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n        let $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n        this.clearSelection();\r\n        let lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n        $layerNameSpan.html(lyrFeatObj.layerName);\r\n        $innerPopup.html(lyrFeatObj.popupContent);\r\n        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n        for (let f of this._popupChangedFunctions) {\r\n            f(this._$popupContent);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param feature - the ol feature\r\n     * @param {LayerEsriMapServer} lyr - the map server layer\r\n     * @param {string} popupContent - popup content\r\n     * @param {string} esriName - esri layer name\r\n     */\r\n    addMapServicePopupContent(feature: ol.Feature, lyr: LayerEsriMapServer, popupContent: string, esriName: string) {\r\n\r\n        let featLayerObject = new FeatureLayerProperties(\r\n            feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName\r\n        );\r\n        featLayerObject.popupContent = popupContent;\r\n\r\n        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n        this._popupContentLength++;\r\n\r\n        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n\r\n        if (!this._popupOpen) {\r\n            this._$popupContent.find('.next-popup').trigger('click');\r\n\r\n            this._popupOverlay.setPosition(this._popupCoordinate);\r\n            this._$popupContent.scrollTop(0);\r\n            this._popupOpen = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param  pixel - the ol pixel\r\n     * @returns  feature layer properties\r\n     * @private\r\n     */\r\n    _featuresAtPixel(pixel: ol.Pixel): Array<FeatureLayerProperties> {\r\n        let layerFeatureObjectArray = [];\r\n\r\n        this.map.forEachFeatureAtPixel(pixel, (feature: ol.Feature, layer: ol.layer.Vector) => {\r\n            let lyrIndex = this._arrPopupOlLayers.indexOf(layer);\r\n\r\n            if (lyrIndex > -1) {\r\n                layerFeatureObjectArray.push(\r\n                    new FeatureLayerProperties(\r\n                        feature, this._arrPopupLayers[lyrIndex], lyrIndex, this._selectionLayers[lyrIndex]));\r\n            }\r\n        });\r\n\r\n        return layerFeatureObjectArray;\r\n    }\r\n\r\n    closePopup() {\r\n        this._checkInit();\r\n        this._popupOpen = false;\r\n        this._popupOverlay.setPosition(undefined);\r\n        this._$popupCloser[0].blur();\r\n        this.clearSelection();\r\n        this._$popupContent.html('');\r\n\r\n        return false;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param chgFunction - popup change function\r\n     */\r\n    addPopupChangedFunction(chgFunction: popupChangedFunction) {\r\n        this._popupChangedFunctions.push(chgFunction);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - the layer being acted on\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns  the new selection layer\r\n     * @private\r\n     */\r\n    _addPopupLayer(lyr: LayerBaseVector, selectionStyle: {color?: string, width?: number, olStyle?: ol.style.Style}): ol.layer.Vector {\r\n        this._checkInit();\r\n\r\n        selectionStyle = selectionStyle || {};\r\n        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n        selectionStyle.width = selectionStyle.width || 10;\r\n\r\n        let theStyle;\r\n\r\n        if (selectionStyle.olStyle) {\r\n            theStyle = selectionStyle.olStyle;\r\n        } else {\r\n            theStyle = new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: selectionStyle.color,\r\n                    width: selectionStyle.width\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 7,\r\n                    fill: new ol.style.Fill({color: selectionStyle.color}),\r\n                    stroke: new ol.style.Stroke({color: selectionStyle.color, width: 1})\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: selectionStyle.color\r\n                })\r\n            });\r\n        }\r\n\r\n        let selectionLayer = new ol.layer.Vector(\r\n            {\r\n                source: new ol.source.Vector(),\r\n                style: theStyle\r\n            }\r\n        );\r\n\r\n        selectionLayer.setZIndex(100);\r\n\r\n        this._selectionLayers.push(selectionLayer);\r\n        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n        this.map.addLayer(selectionLayer);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add popup to the map\r\n     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addVectorPopup(lyr: LayerBaseVector, popupContentFunction: popupCallback,\r\n                   selectionStyle?: {color?: string, width?: number, olStyle?: ol.style.Style}) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._arrPopupLayerIds.push(lyr.id);\r\n        this._arrPopupLayerNames.push(lyr.name);\r\n        this._arrPopupLayers.push(lyr);\r\n        this._arrPopupOlLayers.push(lyr.olLayer);\r\n        this._arrPopupContentFunction.push(popupContentFunction);\r\n\r\n        return selectionLayer;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase} lyr - layer\r\n     */\r\n    removeVectorPopup(lyr) {\r\n        let idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n\r\n        if (idx > -1) {\r\n            this._arrPopupLayerIds.splice(idx, 1);\r\n            this._arrPopupLayerNames.splice(idx, 1);\r\n            this._arrPopupLayers.splice(idx, 1);\r\n            this._arrPopupOlLayers.splice(idx, 1);\r\n            this._arrPopupContentFunction.splice(idx, 1);\r\n            this._selectionLayers.splice(idx, 1);\r\n            delete this._selectionLayerLookup[lyr.id];\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerEsriMapServer} lyr - map server layer\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addMapServicePopup(lyr, selectionStyle?: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._esriMapServiceLayers.push(lyr);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n    clearSelection() {\r\n        this._checkInit();\r\n        for (let i = 0; i < this._selectionLayers.length; i++) {\r\n            this._selectionLayers[i].getSource().clear();\r\n        }\r\n        for (let f of this._mapClickFunctions) {\r\n            f();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add a function to be called when the map is clicked but before any popups are implemented\r\n     * @param {function} func - the map click function\r\n     */\r\n    addMapClickFunction(func: Function) {\r\n        this._mapClickFunctions.push(func);\r\n    }\r\n}\r\nnm.MapPopupCls = MapPopupCls;\r\nexport default MapPopupCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapPopupCls.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport {quickMapOptions, quickMapBase} from './quickMapBase';\r\nimport provide from '../util/provide';\r\nimport mapMove from './mapMove';\r\nimport mapPopup from './mapPopup';\r\nimport ol = require('custom-ol');\r\nlet nm = provide('olHelpers');\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param {object} [options={}] config options\r\n * @param {string} [options.divId=map] map div id\r\n * @param {object} [options.center={}] center config object\r\n * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n * @param {number} [options.zoom=7] zoom level\r\n * @param {number} [options.minZoom=undefined] min zoom\r\n * @param {number} [options.maxZoom=undefined] max zoom\r\n * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n * @returns {ol.Map} the ol map\r\n */\r\nexport function quickMap(options? : quickMapOptions): ol.Map {\r\n    let m = quickMapBase(options);\r\n    mapMove.init(m);\r\n    mapPopup.init(m);\r\n\r\n    return m;\r\n}\r\n\r\n\r\nnm.quickMap = quickMap;\r\nexport default quickMap;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/quickMap.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface quickMapOptions {\r\n    divId?: string;\r\n    center?: {x: number, y: number};\r\n    zoom?: number;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    baseSwitcher?: boolean;\r\n    fullScreen?: boolean;\r\n}\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param [options={}] config options\r\n * @param [options.divId=map] map div id\r\n * @param [options.center={}] center config object\r\n * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param [options.center.y=5574910] center y, web mercator y or lat\r\n * @param [options.zoom=7] zoom level\r\n * @param [options.minZoom=undefined] min zoom\r\n * @param [options.maxZoom=undefined] max zoom\r\n * @param [options.baseSwitcher=true] if add base map switcher\r\n * @param [options.fullScreen=false] if add base map switcher\r\n * @returns the ol map\r\n */\r\nexport function quickMapBase(options?: quickMapOptions): ol.Map {\r\n    options = options || {} as quickMapOptions;\r\n    options.divId = options.divId || 'map';\r\n    options.center = options.center || {x: -10018378, y: 5574910};\r\n    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n\r\n\r\n    let $mapDiv = $('#' + options.divId);\r\n    $mapDiv.css('position', 'relative');\r\n\r\n    let osmLayer = new ol.layer.Tile({source: new ol.source.OSM()});\r\n    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n\r\n    let osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n    let aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n\r\n    if (options.baseSwitcher) {\r\n        //  let switcherContent = '<div class=\"base-map-switcher\" title=\"Toggle Base Layer\" style=\"';\r\n        //  switcherContent += 'position: absolute; top: 70px; left: 4px; border: solid black 1px; ';\r\n        //  switcherContent += `height: 50px; width: 50px; z-index: 10; border-radius: 4px; background: ${aerialCss};`;\r\n        //  switcherContent += '\"></div>';\r\n        //  $mapDiv.append(switcherContent);\r\n        //\r\n        // $mapDiv.find('.base-map-switcher').click(function() {\r\n        //      \"use strict\";\r\n        //      osmLayer.setVisible(!osmLayer.getVisible());\r\n        //      satLayer.setVisible(!satLayer.getVisible());\r\n        //\r\n        //      if (osmLayer.getVisible()){\r\n        //          $(this).css('background', aerialCss);\r\n        //      } else {\r\n        //          $(this).css('background', osmCss);\r\n        //      }\r\n        //  });\r\n    }\r\n\r\n    if (options.zoom < 0 || options.zoom > 28) {\r\n        throw 'zoom out of range';\r\n    }\r\n\r\n    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n        let p = new ol.geom.Point([options.center.x, options.center.y]);\r\n        new ol.proj.Projection({code: \"EPSG:4326\"});\r\n\r\n        p.transform(new ol.proj.Projection({code: \"EPSG:4326\"}), new ol.proj.Projection({code: \"EPSG:3857\"}));\r\n        let coordinates = p.getCoordinates();\r\n        options.center.x = coordinates[0];\r\n        options.center.y = coordinates[1];\r\n    }\r\n\r\n    const controls = ol.control.defaults({\r\n            attributionOptions: {collapsible: false}\r\n        }\r\n    );\r\n\r\n    const view = new ol.View({\r\n        center: [options.center.x, options.center.y],\r\n        zoom: options.zoom,\r\n        minZoom: options.minZoom,\r\n        maxZoom: options.maxZoom\r\n    });\r\n\r\n    let map = new ol.Map({\r\n        layers: [osmLayer],\r\n        target: options.divId,\r\n        controls: controls,\r\n        view: view\r\n    });\r\n\r\n    if (options.fullScreen) {\r\n        map.addControl(new ol.control.FullScreen({}));\r\n    }\r\n\r\n    return map;\r\n}\r\n\r\nnm.quickMapBase = quickMapBase;\r\nexport default quickMapBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/quickMapBase.ts","/**\r\n * Created by gavorhes on 12/14/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nconst nm = provide('olHelpers.zoomResolutionConvert');\r\n\r\nlet _zoomResLookup = [\r\n    156543.03392804097, //0\r\n    78271.51696402048, //1\r\n    39135.75848201024, //2\r\n    19567.87924100512, //3\r\n    9783.93962050256, //4\r\n    4891.96981025128, //5\r\n    2445.98490512564, //6\r\n    1222.99245256282, //7\r\n    611.49622628141, //8\r\n    305.748113140705, //9\r\n    152.8740565703525, //10\r\n    76.43702828517625, //11\r\n    38.21851414258813, //12\r\n    19.109257071294063, //13\r\n    9.554628535647032, //14\r\n    4.777314267823516, //15\r\n    2.388657133911758, //16\r\n    1.194328566955879, //17\r\n    0.5971642834779395, //18\r\n    0.29858214173896974, //19\r\n    0.14929107086948487, //20\r\n    0.07464553543474244, //21\r\n    0.03732276771737122, //22\r\n    0.01866138385868561, //23\r\n    0.009330691929342804, //24\r\n    0.004665345964671402, //25\r\n    0.002332672982335701, //26\r\n    0.0011663364911678506, //27\r\n    0.0005831682455839253 //28\r\n];\r\n\r\n/**\r\n * Get the resolution given the zoom level\r\n * @param {number} zoomLevel - the zoom level\r\n * @returns {number|*} the map resolution\r\n */\r\nexport function zoomToResolution(zoomLevel) {\r\n    \"use strict\";\r\n\r\n    if (typeof zoomLevel == 'number') {\r\n        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n            return _zoomResLookup[zoomLevel];\r\n        } else {\r\n            console.log(`invalid zoom level provided: ${zoomLevel}`);\r\n\r\n            return undefined;\r\n        }\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\nnm.zoomToResolution = zoomToResolution;\r\n\r\n\r\n/**\r\n * Get resolution from the zoom level\r\n * @param {number} resolution - the resolution\r\n * @returns {number|*} the zoom level\r\n */\r\nexport function resolutionToZoom(resolution){\r\n    for (let i = 0; i < _zoomResLookup.length; i++){\r\n        if (resolution >= _zoomResLookup[i] ){\r\n            return i;\r\n        }\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nnm.resolutionToZoom = resolutionToZoom;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/zoomResolutionConvert.ts","/**\r\n * Created by gavorhes on 1/4/2016.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers.esriToOlStyle');\r\n\r\n/**\r\n * This callback is displayed as part of the Requester class.\r\n * @callback styleFunc\r\n * @param {ol.Feature} feat - openlayers feature\r\n * @param {number} resolution - map resolution\r\n */\r\n\r\n/**\r\n *\r\n * @param {Array<number>} colorArray - input color array\r\n * @param {number} opacity - the opacity 0 to 1\r\n * @returns {string} rgba string\r\n * @private\r\n */\r\nfunction _colorArrayToRgba(colorArray, opacity) {\r\n    \"use strict\";\r\n\r\n    return `rgba(${colorArray[0]},${colorArray[1]},${colorArray[2]},${opacity})`;\r\n}\r\n\r\n/**\r\n * escape html charcters\r\n * @param {string} str - input string\r\n * @returns {string} escaped string\r\n */\r\nfunction htmlEscape(str) {\r\n    return String(str)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#39;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;');\r\n}\r\n\r\nnm.htmlEscape = htmlEscape;\r\n\r\n\r\nexport interface EsriResponse{\r\n    drawingInfo: {\r\n        renderer: EsriRenderer\r\n    },\r\n    geometryType: string\r\n}\r\n\r\nexport interface EsriRenderer{\r\n    type: string;\r\n    symbol: EsriSymbol;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: EsriSymbol}>;\r\n}\r\n\r\nexport interface EsriSymbol{\r\n    size: number;\r\n    type: string;\r\n    outline:{\r\n        color: string;\r\n        width: number;\r\n    },\r\n    color: string;\r\n    width: number;\r\n}\r\n\r\n\r\nclass CommonSymbol {\r\n    legendHtml: string;\r\n    opacity: number;\r\n    symbolObj: EsriSymbol;\r\n    olStyle: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction;\r\n\r\n    /**\r\n     *\r\n     * @param symbolObj\r\n     * @param {number} opacity\r\n     */\r\n    constructor(symbolObj: EsriSymbol, opacity: number) {\r\n        this.symbolObj = symbolObj;\r\n        this.opacity = opacity;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\ninterface ICommonSymbol{\r\n    new (symbolObj: EsriSymbol, opacity: number): CommonSymbol\r\n}\r\n\r\n\r\nclass PointSymbol extends CommonSymbol {\r\n    constructor(symbolObj: EsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSMS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n                let radius = this.symbolObj.size;\r\n\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        fill: new ol.style.Fill({\r\n                            color: innerColor\r\n                        }),\r\n                        stroke: new ol.style.Stroke({color: outerColor, width: outlineWidth})\r\n                    })\r\n                });\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" style=\"color: ${innerColor}\">&#9679;</span>`;\r\n                break;\r\n            case 'esriPMS':\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Icon({src: `data:image/png;base64,${this.symbolObj['imageData']}`})\r\n                });\r\n                this.legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${this.symbolObj['imageData']}\">`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Point symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass LineSymbol extends CommonSymbol {\r\n    constructor(symbolObj: EsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSLS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let lineWidth = this.symbolObj.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: innerColor,\r\n                        //lineDash: [4],\r\n                        width: lineWidth\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 4px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: -1px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Line symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass PolygonSymbol extends CommonSymbol {\r\n    constructor(symbolObj: EsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj['type']) {\r\n            case 'esriSFS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: outerColor,\r\n                        //lineDash: [4],\r\n                        width: outlineWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: innerColor\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `border: solid ${outerColor} 1px;`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 9px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: 2px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Polygon symbol does handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass SymbolGenerator {\r\n    opacity: number;\r\n    renderer: EsriRenderer;\r\n    legendHtml: string;\r\n    olStyle: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction;\r\n\r\n    constructor(esriResponse: EsriResponse) {\r\n        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n        this.renderer = esriResponse.drawingInfo.renderer;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\nclass SingleSymbol extends SymbolGenerator {\r\n    symbol: EsriSymbol;\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the symbol class to use\r\n     */\r\n    constructor(esriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.symbol = this.renderer.symbol;\r\n        let symbolObj = new SymbolClass(this.symbol, this.opacity);\r\n        this.olStyle = symbolObj.olStyle;\r\n        this.legendHtml = symbolObj.legendHtml;\r\n    }\r\n}\r\n\r\nclass UniqueValueSymbol extends SymbolGenerator {\r\n\r\n    propertyName: string;\r\n    defaultSymbol: EsriSymbol;\r\n    defaultStyle: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction;\r\n    defaultLabelHtml: string;\r\n    labelArray: Array<string>;\r\n    legendArray: Array<string>;\r\n    propertyStyleLookup: Object;\r\n    valueArray: Array<any>;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: EsriSymbol}>;\r\n\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the Symbol class definition\r\n     */\r\n    constructor(esriResponse: EsriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.uniqueValueInfos = this.renderer['uniqueValueInfos'];\r\n        this.propertyName = this.renderer['field1'];\r\n        this.defaultSymbol = this.renderer['defaultSymbol'];\r\n\r\n\r\n        if (this.defaultSymbol) {\r\n            let symbolObj = new SymbolClass(this.defaultSymbol, this.opacity);\r\n            this.defaultStyle = symbolObj.olStyle;\r\n            this.defaultLabelHtml = `<span class=\"legend-layer-subitem\">${htmlEscape(this.renderer['defaultLabel'])}</span>` + symbolObj.legendHtml;\r\n        } else {\r\n            this.defaultStyle = undefined;\r\n            this.defaultLabelHtml = 'other';\r\n        }\r\n\r\n        this.valueArray = [];\r\n        this.labelArray = [];\r\n        this.legendArray = [];\r\n        this.propertyStyleLookup = {};\r\n\r\n        for (let uniqueVal of this.uniqueValueInfos) {\r\n            this.labelArray.push(uniqueVal['label']);\r\n            this.valueArray.push(uniqueVal['value']);\r\n            let uniqueSym = new SymbolClass(uniqueVal.symbol, this.opacity);\r\n            this.legendArray.push(`<span class=\"legend-layer-subitem\">${htmlEscape(uniqueVal['label'])}</span>` + uniqueSym.legendHtml);\r\n            this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n        }\r\n\r\n\r\n        this.olStyle = (feature: ol.Feature) => {\r\n            let checkProperties = feature.getProperties();\r\n            let checkProperty = checkProperties[this.propertyName];\r\n\r\n            let returnValue;\r\n            if (this.propertyStyleLookup[checkProperty] !== undefined) {\r\n                returnValue = [this.propertyStyleLookup[checkProperty]];\r\n            } else {\r\n               returnValue = [this.defaultStyle];\r\n            }\r\n\r\n            return returnValue;\r\n        };\r\n\r\n        if (this.defaultLabelHtml !== null) {\r\n            this.legendArray.push(this.defaultLabelHtml);\r\n        }\r\n\r\n        this.legendHtml = '<ul>';\r\n        for (let h of this.legendArray) {\r\n            this.legendHtml += `<li>${h}</li>`;\r\n        }\r\n        this.legendHtml += '</ul>';\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * style and legend object\r\n * @typedef {object} styleAndLegend\r\n * @property {styleFunc} style - style function\r\n * @property {string} legend - legend content\r\n */\r\n\r\n/**\r\n *\r\n * @param {object} esriResponse - layer info\r\n * @returns {styleAndLegend} style and legend object\r\n */\r\nexport function makeFeatureServiceLegendAndSymbol(esriResponse: EsriResponse) {\r\n    \"use strict\";\r\n    let renderer = esriResponse.drawingInfo.renderer;\r\n    let symbolLegendOut: SymbolGenerator = null;\r\n\r\n    switch (renderer.type) {\r\n        case 'simple':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse.geometryType + ' not handled');\r\n            }\r\n            break;\r\n        case 'uniqueValue':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse['geometryType'] + ' not handled');\r\n            }\r\n            break;\r\n        default:\r\n            alert('not handled renderer type: ' + renderer['type']);\r\n    }\r\n\r\n    if (symbolLegendOut == null) {\r\n        return {style: undefined, legend: ''};\r\n    } else {\r\n        return {style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml};\r\n    }\r\n}\r\n\r\nnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n\r\n\r\n/**\r\n *\r\n * @param {object} lyrObject - the layer as defined in the response\r\n * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n * @returns {string} legend html\r\n */\r\nfunction mapServiceLegendItem(lyrObject, skipLayerNameAndExpander: boolean = false) {\r\n\r\n\r\n    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n    let layerName = lyrObject['layerName'];\r\n    let legendItems = lyrObject['legend'];\r\n    let legendHtml = '';\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml += `<span class=\"legend-layer-subitem\">${layerName}</span>`;\r\n    }\r\n\r\n    if (legendItems.length == 1) {\r\n        legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[0]['imageData']}\">`;\r\n    } else {\r\n        if (!skipLayerNameAndExpander) {\r\n            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n        }\r\n        legendHtml += '<ul>';\r\n        for (let i = 0; i < legendItems.length; i++) {\r\n            legendHtml += `<li>`;\r\n            legendHtml += `<span class=\"legend-layer-subitem\">${htmlEscape(legendItems[i]['label'])}</span>`;\r\n            legendHtml += `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[i]['imageData']}\">`;\r\n            legendHtml += `</li>`;\r\n        }\r\n        legendHtml += '</ul>';\r\n    }\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml = `<span class=\"legend-layer-subitem\">${layerName}</span>` + legendHtml;\r\n    }\r\n\r\n    return legendHtml;\r\n}\r\n\r\n/**\r\n * make map service legent\r\n * @param {object} esriResponse - layer info\r\n * @returns {string} legend content\r\n */\r\nexport function makeMapServiceLegend(esriResponse) {\r\n    \"use strict\";\r\n\r\n    let newLegendHtml = '';\r\n\r\n    let layers = esriResponse['layers'];\r\n\r\n    if (layers.length == 1) {\r\n        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n    } else {\r\n        newLegendHtml += '<ul>';\r\n        for (let i = 0; i < layers.length; i++) {\r\n            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n        }\r\n        newLegendHtml += '</ul>';\r\n    }\r\n\r\n    return newLegendHtml;\r\n}\r\n\r\nnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/esriToOlStyle.ts","/**\r\n * Created by gavorhes on 12/7/2015.\r\n */\r\nimport {LayerBase, LayerBaseOptions} from './LayerBase';\r\nimport * as esriToOl from '../olHelpers/esriToOlStyle';\r\nimport mapPopup from '../olHelpers/mapPopup';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\nexport interface LayerEsriMapServerOptions extends LayerBaseOptions {\r\n    addPopup?: boolean;\r\n    showLayers?: Array<number>;\r\n}\r\n\r\n/**\r\n * esri mapserver layer\r\n * @augments LayerBase\r\n */\r\nexport class LayerEsriMapServer extends LayerBase {\r\n    _esriFormat: ol.format.EsriJSON;\r\n    _popupRequest: JQueryXHR;\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - resource url\r\n     * @param {object} [options] - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n     */\r\n    constructor(url, options: LayerEsriMapServerOptions = {}) {\r\n\r\n        super(url, options);\r\n        this._source = new ol.source.TileArcGISRest(\r\n            {\r\n                url: this.url == '' ? undefined : this.url,\r\n                params: typeof options.showLayers == 'undefined' ? undefined : {layers: 'show:' + options.showLayers.join(',')}\r\n            }\r\n        );\r\n\r\n        this._olLayer = new ol.layer.Tile({\r\n            source: this._source as ol.source.Tile,\r\n            visible: this.visible,\r\n            opacity: this.opacity,\r\n            minResolution: this._minResolution,\r\n            maxResolution: this._maxResolution\r\n        });\r\n\r\n        this._olLayer.setZIndex(this._zIndex);\r\n\r\n        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n\r\n        this._esriFormat = new ol.format.EsriJSON();\r\n        this._popupRequest = null;\r\n\r\n        this.addLegendContent();\r\n\r\n        if (options.addPopup) {\r\n            mapPopup.addMapServicePopup(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=''] additional content for legend\r\n     */\r\n    addLegendContent(additionalContent?: string) {\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'legend?f=pjson&callback=?';\r\n\r\n        $.get(urlCopy, {}, (d) => {\r\n            let newHtml = esriToOl.makeMapServiceLegend(d);\r\n            super.addLegendContent(newHtml);\r\n        }, 'json');\r\n    }\r\n\r\n\r\n    getPopupInfo(queryParams) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] != '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'identify?callback=?';\r\n\r\n        let __this = this;\r\n\r\n        if (this._popupRequest != null) {\r\n            this._popupRequest.abort();\r\n        }\r\n\r\n\r\n        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n            for (let r of d['results']) {\r\n\r\n                let popupHtml = '<table class=\"esri-popup-table\">';\r\n\r\n                for (let a in r['attributes']) {\r\n                    if (r['attributes'].hasOwnProperty(a)) {\r\n                        let attrVal = r['attributes'][a];\r\n\r\n                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n                            continue;\r\n                        }\r\n\r\n                        let attr = a;\r\n                        if (attr.length > 14) {\r\n                            attr = attr.slice(0, 11) + '...';\r\n                        }\r\n\r\n                        popupHtml += `<tr><td>${attr}</td><td>${attrVal}</td></tr>`;\r\n                    }\r\n                }\r\n\r\n                popupHtml += '</table>';\r\n\r\n                mapPopup.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n            }\r\n        }, 'json');\r\n\r\n        this._popupRequest.always(function () {\r\n            __this._popupRequest = null;\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ol.source.TileArcGISRest} the vector source\r\n     */\r\n    get source(): ol.source.TileArcGISRest {\r\n        return super.getSource() as ol.source.TileArcGISRest;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Tile {\r\n        return super.getOlLayer() as ol.layer.Tile;\r\n    }\r\n}\r\nnm.LayerEsriMapServer = LayerEsriMapServer;\r\nexport default LayerEsriMapServer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/LayerEsriMapServer.ts","/**\r\n * Created by gavorhes on 6/1/2016.\r\n */\r\n\r\n\r\nimport provide from '../util/provide';\r\nimport {LayerBase} from \"../layers/LayerBase\";\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nlet nm = provide('collections.layerSwipe');\r\n\r\n\r\nclass LayerSwipe {\r\n    leftLayers: Array<LayerBase>;\r\n    rightLayers: Array<LayerBase>;\r\n    _percentRight: number;\r\n    _map: ol.Map;\r\n    $mapElement: JQuery;\r\n    $swiper: JQuery;\r\n    dragging: boolean;\r\n    offset: number;\r\n    /**\r\n     *\r\n     * @param {ol.Map} map - the map\r\n     * @param {string} [sliderContent=''] - additional html to be added inside the slider div\r\n     */\r\n    constructor(map: ol.Map, sliderContent: string = '') {\r\n\r\n        sliderContent = sliderContent || '';\r\n        /**\r\n         *\r\n         * @type {Array<LayerBase>}\r\n         */\r\n        this.leftLayers = [];\r\n\r\n        /**\r\n         *\r\n         * @type {Array<LayerBase>}\r\n         */\r\n        this.rightLayers = [];\r\n\r\n        this._percentRight = 50;\r\n        this.offset = null;\r\n\r\n        this._map = map;\r\n        this.$mapElement = $(map.getTargetElement());\r\n        this.$mapElement.append(`<div class=\"layer-swiper\">${sliderContent}</div>`);\r\n\r\n\r\n        this.$swiper = this.$mapElement.find('.layer-swiper');\r\n        this.percentRight = this.percentRight;\r\n\r\n        this.dragging = false;\r\n\r\n        this.$mapElement.mouseleave(() => {\r\n            this.dragging = false;\r\n        });\r\n\r\n        this.$swiper.bind('mousewheel DOMMouseScroll', function(evt){\r\n            evt.preventDefault();\r\n        });\r\n\r\n        this.$swiper.mousedown((evt) => {\r\n            this.dragging = true;\r\n            this.offset = evt.offsetX;\r\n        });\r\n\r\n        $(window).mouseup(() => {\r\n            this.dragging = false;\r\n        });\r\n\r\n        this.$mapElement.mousemove((evt) => {\r\n            if (this.dragging) {\r\n                let mapLeft = this.$mapElement.position().left;\r\n                let mapWidth = this.$mapElement.width();\r\n\r\n                this.percentRight = 100 * (evt.pageX - this.offset - mapLeft) / mapWidth;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - layer to be added to left side\r\n     */\r\n    addLeftLayer(lyr) {\r\n\r\n        if (this.leftLayers.indexOf(lyr) != -1){\r\n            return;\r\n        }\r\n\r\n        lyr.olLayer.on('precompose', (event) => {\r\n            let ctx = event['context'];\r\n            let width = ctx.canvas.width * (this.percentRight / 100);\r\n\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.rect(0, 0, width, ctx.canvas.height);\r\n            ctx.clip();\r\n        });\r\n\r\n        lyr.olLayer.on('postcompose', function (event) {\r\n            let ctx = event['context'];\r\n            ctx.restore();\r\n        });\r\n\r\n\r\n        this.leftLayers.push(lyr);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - layer to be added to right side\r\n     */\r\n    addRightLayer(lyr) {\r\n\r\n        if (this.rightLayers.indexOf(lyr) != -1){\r\n            return;\r\n        }\r\n\r\n        lyr.olLayer.on('precompose', (event) => {\r\n            let ctx = event['context'];\r\n            let width = ctx.canvas.width * (this.percentRight / 100);\r\n\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.rect(width, 0, ctx.canvas.width - width, ctx.canvas.height);\r\n            ctx.clip();\r\n        });\r\n\r\n        lyr.olLayer.on('postcompose', function (event) {\r\n            let ctx = event['context'];\r\n            ctx.restore();\r\n        });\r\n\r\n        this.rightLayers.push(lyr);\r\n    }\r\n\r\n    get percentRight() : number{\r\n        return this._percentRight;\r\n    }\r\n\r\n    set percentRight(percent: number) {\r\n        let maxed = this.$swiper.position().left + this.$swiper.width() > this.$mapElement.width();\r\n\r\n        if (percent < 0) {\r\n            return;\r\n        } else if (maxed && percent > this.percentRight) {\r\n            return;\r\n        }\r\n\r\n        this._percentRight = percent;\r\n        this.$swiper.css('left', `${this._percentRight.toFixed(2)}%`);\r\n        this._map.render();\r\n    }\r\n}\r\n\r\nnm.LayerSwipe = LayerSwipe;\r\nexport default LayerSwipe;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/layerSwipe.ts"],"sourceRoot":""}