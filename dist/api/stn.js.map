{"version":3,"file":"stn.js","sourceRoot":"","sources":["../../src/api/stn.ts"],"names":[],"mappings":"AAAA;;GAEG;;;AAGH,8BAAgC;AAChC,iCAA8B;AAEjB,QAAA,SAAS,GAAG,eAAO,GAAG,MAAM,CAAC;AAE1C,sBAAsB,CAAiB;IACnC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;AACL,CAAC;AAWD,mBAA0B,EAAU,EACX,GAAW,EACX,GAAW,EACX,QAA6B,EAC7B,KACC;IADD,sBAAA,EAAA;IACA,CAAC;IAEtB,GAAG,CAAC,GAAG,CAAC,iBAAS,GAAG,SAAS,EAAE,UAAC,CAAU;QAClC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,KAAK,CAAC,CAAC,CAAC,CAAA;QACZ,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,QAAQ,CAAC,CAAC,CAAC,CAAA;QACf,CAAC;IAEL,CAAC,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAC,EAAE,KAAK,CAAC,CAAC;AAElD,CAAC;AAhBD,8BAgBC;AAED,yBAAgC,EAAU,EACjB,OAAe,EACf,GAAW,EACX,GAAW,EACX,QAAoB,EACpB,KACC;IADD,sBAAA,EAAA;IACA,CAAC;IAEtB,GAAG,CAAC,GAAG,CAAC,iBAAS,GAAG,UAAU,EAAE,UAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACb,KAAK,CAAC,CAAC,CAAC,CAAA;QACZ,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,QAAQ,CAAC,CAAC,CAAC,CAAA;QACf,CAAC;IAEL,CAAC,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAC,EAAE,KAAK,CAAC,CAAC;AAClE,CAAC;AAhBD,0CAgBC;AAED,uBAA8B,EAAU,EACf,OAAe,EACf,QAAgB,EAChB,QAAgB,EAChB,MAAc,EACd,MAAc,EACd,QAAoB,EACpB,KACC;IADD,sBAAA,EAAA;IACA,CAAC;IAEtB,GAAG,CAAC,GAAG,CAAC,iBAAS,GAAG,UAAU,EAAE,UAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACb,KAAK,CAAC,CAAC,CAAC,CAAA;QACZ,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,QAAQ,CAAC,CAAC,CAAC,CAAA;QACf,CAAC;IAEL,CAAC,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAC,EAAE,KAAK,CAAC,CAAC;AAEtH,CAAC;AAnBD,sCAmBC","sourcesContent":["/**\r\n * Created by glenn on 6/13/2017.\r\n */\r\n\r\nimport $ = require('jquery');\r\nimport * as ajx from './_axios';\r\nimport apiRoot from './_host';\r\n\r\nexport const stnApiUrl = apiRoot + '/stn';\r\n\r\nfunction _abortHelper(x: XMLHttpRequest) {\r\n    if (x && x['abort']) {\r\n        x.abort();\r\n    }\r\n}\r\n\r\n\r\nexport interface iError {\r\n    error?: string;\r\n}\r\n\r\nexport interface iRoutes extends iError{\r\n    routes: {[s: string]: number}\r\n}\r\n\r\nexport function getRoutes(yr: number,\r\n                         lon: number,\r\n                         lat: number,\r\n                         callback: (d: iRoutes) => any,\r\n                         error: (e: iError) => any = () => {\r\n                         }) {\r\n\r\n    ajx.get(stnApiUrl + '/routes', (d: iRoutes) => {\r\n            if (d.error) {\r\n                error(d)\r\n            } else {\r\n                callback(d)\r\n            }\r\n\r\n        }, {year: yr, lon: lon, lat: lat}, error);\r\n\r\n}\r\n\r\nexport function getSnappedPoint(yr: number,\r\n                         routeId: number,\r\n                         lon: number,\r\n                         lat: number,\r\n                         callback: (d) => any,\r\n                         error: (e: iError) => any = () => {\r\n                         }) {\r\n\r\n    ajx.get(stnApiUrl + '/snapped', (d) => {\r\n            if (d['error']) {\r\n                error(d)\r\n            } else {\r\n                callback(d)\r\n            }\r\n\r\n        }, {year: yr, route: routeId, lon: lon, lat: lat}, error);\r\n}\r\n\r\nexport function getStnSegment(yr: number,\r\n                         routeId: number,\r\n                         lonStart: number,\r\n                         latStart: number,\r\n                         lonEnd: number,\r\n                         latEnd: number,\r\n                         callback: (d) => any,\r\n                         error: (e: iError) => any = () => {\r\n                         }) {\r\n\r\n    ajx.get(stnApiUrl + '/segment', (d) => {\r\n            if (d['error']) {\r\n                error(d)\r\n            } else {\r\n                callback(d)\r\n            }\r\n\r\n        }, {year: yr, route: routeId, lonStart: lonStart, latStart: latStart, lonEnd: lonEnd, latEnd: latEnd}, error);\r\n\r\n}\r\n"]}