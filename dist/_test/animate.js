"use strict";
var quickMap_1 = require("../olHelpers/quickMap");
var LayerRealEarthTile_1 = require("../layers/LayerRealEarthTile");
var media_control_1 = require("../domUtil/media-control");
var $ = require("jquery");
var LayerBaseVectorEsri_1 = require("../layers/LayerBaseVectorEsri");
var LayerEsriMapServer_1 = require("../layers/LayerEsriMapServer");
var nexrhresStatic = new LayerRealEarthTile_1.default({
    products: 'nexrhres',
    id: 'nexrhres-static',
    opacity: 0.6,
    animate: true,
    name: 'Hybrid Reflectivity',
    // maxZoom: 10,
    timeLoadCallback: function (f) {
        console.log(f);
    }
});
var d = new Date();
var endTime = d.getTime();
d.setHours(d.getHours() - 4);
var startTime = d.getTime();
var rangeStep = Math.round((endTime - startTime) / 8);
var media = new media_control_1.MediaControl($('#control'), function (v) {
    nexrhresStatic.setLayerTime(v);
}, {
    min: startTime,
    max: endTime,
    val: endTime,
    step: rangeStep,
    playInterval: 750,
    showAsDate: true
});
var map = quickMap_1.quickMap();
map.addLayer(nexrhresStatic.olLayer);
var coordinationLayer = new LayerBaseVectorEsri_1.LayerBaseVectorEsri('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/GLRTOC/GlrtocCoordination/MapServer/0', {
    visible: true,
    autoLoad: true,
    name: 'Coordination',
    useEsriStyle: true
});
map.addLayer(coordinationLayer.olLayer);
var oakRidgeLayers = [
    ['Cameras', 'cameras33'],
    ['HAR', 'HAR33'],
    ['DMS', 'MessageSigns33'],
    //['State Summary', 'statesummary'],
    ['Traffic Control', 'TrafficControl33'],
    ['Traffic Detection', 'TrafficDetectionMulti'],
    ['Weather', 'Weather33']
];
for (var i = 0; i < oakRidgeLayers.length; i++) {
    var oakRidgeLayer = new LayerEsriMapServer_1.LayerEsriMapServer("http://itsdpro.ornl.gov/arcgis/rest/services/ITSPublic/" + oakRidgeLayers[i][1] + "/MapServer", {
        id: oakRidgeLayers[i][1],
        name: oakRidgeLayers[i][0],
        visible: true,
        minZoom: 7,
        zIndex: 20,
        addPopup: true,
        legendCollapse: true
    });
    map.addLayer(oakRidgeLayer.olLayer);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbWF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fdGVzdC9hbmltYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxrREFBK0M7QUFDL0MsbUVBQThEO0FBQzlELDBEQUFzRTtBQUN0RSwwQkFBNkI7QUFDN0IscUVBQWtFO0FBQ2xFLG1FQUFnRTtBQUdoRSxJQUFJLGNBQWMsR0FBRyxJQUFJLDRCQUFrQixDQUFDO0lBQ3BDLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLEVBQUUsRUFBRSxpQkFBaUI7SUFDckIsT0FBTyxFQUFFLEdBQUc7SUFDWixPQUFPLEVBQUUsSUFBSTtJQUNiLElBQUksRUFBRSxxQkFBcUI7SUFDM0IsZUFBZTtJQUNmLGdCQUFnQixFQUFFLFVBQVUsQ0FBQztRQUN6QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ25CLENBQUM7Q0FDSixDQUNKLENBQUM7QUFHRixJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0FBQ25CLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMxQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM3QixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDNUIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUV0RCxJQUFJLEtBQUssR0FBRyxJQUFJLDRCQUFZLENBQ3hCLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFDYixVQUFDLENBQVM7SUFDTixjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLENBQUMsRUFDRDtJQUNJLEdBQUcsRUFBRSxTQUFTO0lBQ2QsR0FBRyxFQUFFLE9BQU87SUFDWixHQUFHLEVBQUUsT0FBTztJQUNaLElBQUksRUFBRSxTQUFTO0lBQ2YsWUFBWSxFQUFFLEdBQUc7SUFDakIsVUFBVSxFQUFFLElBQUk7Q0FDbkIsQ0FDSixDQUFDO0FBR0YsSUFBSSxHQUFHLEdBQUcsbUJBQVEsRUFBRSxDQUFDO0FBQ3JCLEdBQUcsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBR3JDLElBQUksaUJBQWlCLEdBQUcsSUFBSSx5Q0FBbUIsQ0FDM0MsMEdBQTBHLEVBQzFHO0lBQ0ksT0FBTyxFQUFFLElBQUk7SUFDYixRQUFRLEVBQUUsSUFBSTtJQUNkLElBQUksRUFBRSxjQUFjO0lBQ3BCLFlBQVksRUFBRSxJQUFJO0NBQ3JCLENBQ0osQ0FBQztBQUVGLEdBQUcsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUM7QUFFcEMsSUFBSSxjQUFjLEdBQUc7SUFDakIsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDO0lBQ3hCLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQztJQUNoQixDQUFDLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQztJQUN6QixvQ0FBb0M7SUFDcEMsQ0FBQyxpQkFBaUIsRUFBRSxrQkFBa0IsQ0FBQztJQUN2QyxDQUFDLG1CQUFtQixFQUFFLHVCQUF1QixDQUFDO0lBQzlDLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQztDQUMzQixDQUFDO0FBR0YsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxjQUFjLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDN0MsSUFBSSxhQUFhLEdBQUcsSUFBSSx1Q0FBa0IsQ0FDdEMsNERBQTBELGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBWSxFQUMxRjtRQUNJLEVBQUUsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLElBQUksRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLE9BQU8sRUFBRSxJQUFJO1FBQ2IsT0FBTyxFQUFFLENBQUM7UUFDVixNQUFNLEVBQUUsRUFBRTtRQUNWLFFBQVEsRUFBRSxJQUFJO1FBQ2QsY0FBYyxFQUFFLElBQUk7S0FDdkIsQ0FDSixDQUFDO0lBQ0YsR0FBRyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDeEMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cXVpY2tNYXB9IGZyb20gJy4uL29sSGVscGVycy9xdWlja01hcCc7XHJcbmltcG9ydCBMYXllclJlYWxFYXJ0aFRpbGUgZnJvbSBcIi4uL2xheWVycy9MYXllclJlYWxFYXJ0aFRpbGVcIjtcclxuaW1wb3J0IHtNZWRpYUNvbnRyb2wsIGNoYW5nZUZ1bmN0aW9ufSBmcm9tIFwiLi4vZG9tVXRpbC9tZWRpYS1jb250cm9sXCI7XHJcbmltcG9ydCAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbmltcG9ydCB7TGF5ZXJCYXNlVmVjdG9yRXNyaX0gZnJvbSBcIi4uL2xheWVycy9MYXllckJhc2VWZWN0b3JFc3JpXCI7XHJcbmltcG9ydCB7TGF5ZXJFc3JpTWFwU2VydmVyfSBmcm9tIFwiLi4vbGF5ZXJzL0xheWVyRXNyaU1hcFNlcnZlclwiO1xyXG5cclxuXHJcbmxldCBuZXhyaHJlc1N0YXRpYyA9IG5ldyBMYXllclJlYWxFYXJ0aFRpbGUoe1xyXG4gICAgICAgIHByb2R1Y3RzOiAnbmV4cmhyZXMnLFxyXG4gICAgICAgIGlkOiAnbmV4cmhyZXMtc3RhdGljJyxcclxuICAgICAgICBvcGFjaXR5OiAwLjYsXHJcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcclxuICAgICAgICBuYW1lOiAnSHlicmlkIFJlZmxlY3Rpdml0eScsXHJcbiAgICAgICAgLy8gbWF4Wm9vbTogMTAsXHJcbiAgICAgICAgdGltZUxvYWRDYWxsYmFjazogZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuXHJcbmxldCBkID0gbmV3IERhdGUoKTtcclxubGV0IGVuZFRpbWUgPSBkLmdldFRpbWUoKTtcclxuZC5zZXRIb3VycyhkLmdldEhvdXJzKCkgLSA0KTtcclxubGV0IHN0YXJ0VGltZSA9IGQuZ2V0VGltZSgpO1xyXG5sZXQgcmFuZ2VTdGVwID0gTWF0aC5yb3VuZCgoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyA4KTtcclxuXHJcbmxldCBtZWRpYSA9IG5ldyBNZWRpYUNvbnRyb2woXHJcbiAgICAkKCcjY29udHJvbCcpLFxyXG4gICAgKHY6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIG5leHJocmVzU3RhdGljLnNldExheWVyVGltZSh2KTtcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWluOiBzdGFydFRpbWUsXHJcbiAgICAgICAgbWF4OiBlbmRUaW1lLFxyXG4gICAgICAgIHZhbDogZW5kVGltZSxcclxuICAgICAgICBzdGVwOiByYW5nZVN0ZXAsXHJcbiAgICAgICAgcGxheUludGVydmFsOiA3NTAsXHJcbiAgICAgICAgc2hvd0FzRGF0ZTogdHJ1ZVxyXG4gICAgfVxyXG4pO1xyXG5cclxuXHJcbmxldCBtYXAgPSBxdWlja01hcCgpO1xyXG5tYXAuYWRkTGF5ZXIobmV4cmhyZXNTdGF0aWMub2xMYXllcik7XHJcblxyXG5cclxubGV0IGNvb3JkaW5hdGlvbkxheWVyID0gbmV3IExheWVyQmFzZVZlY3RvckVzcmkoXHJcbiAgICAnaHR0cDovL3RyYW5zcG9ydGFsLmNlZS53aXNjLmVkdS9hcHBsaWNhdGlvbnMvYXJjZ2lzMi9yZXN0L3NlcnZpY2VzL0dMUlRPQy9HbHJ0b2NDb29yZGluYXRpb24vTWFwU2VydmVyLzAnLFxyXG4gICAge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYXV0b0xvYWQ6IHRydWUsXHJcbiAgICAgICAgbmFtZTogJ0Nvb3JkaW5hdGlvbicsXHJcbiAgICAgICAgdXNlRXNyaVN0eWxlOiB0cnVlXHJcbiAgICB9XHJcbik7XHJcblxyXG5tYXAuYWRkTGF5ZXIoY29vcmRpbmF0aW9uTGF5ZXIub2xMYXllcik7XHJcblxyXG4gICAgbGV0IG9ha1JpZGdlTGF5ZXJzID0gW1xyXG4gICAgICAgIFsnQ2FtZXJhcycsICdjYW1lcmFzMzMnXSxcclxuICAgICAgICBbJ0hBUicsICdIQVIzMyddLFxyXG4gICAgICAgIFsnRE1TJywgJ01lc3NhZ2VTaWduczMzJ10sXHJcbiAgICAgICAgLy9bJ1N0YXRlIFN1bW1hcnknLCAnc3RhdGVzdW1tYXJ5J10sXHJcbiAgICAgICAgWydUcmFmZmljIENvbnRyb2wnLCAnVHJhZmZpY0NvbnRyb2wzMyddLFxyXG4gICAgICAgIFsnVHJhZmZpYyBEZXRlY3Rpb24nLCAnVHJhZmZpY0RldGVjdGlvbk11bHRpJ10sXHJcbiAgICAgICAgWydXZWF0aGVyJywgJ1dlYXRoZXIzMyddXHJcbiAgICBdO1xyXG5cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9ha1JpZGdlTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IG9ha1JpZGdlTGF5ZXIgPSBuZXcgTGF5ZXJFc3JpTWFwU2VydmVyKFxyXG4gICAgICAgICAgICBgaHR0cDovL2l0c2Rwcm8ub3JubC5nb3YvYXJjZ2lzL3Jlc3Qvc2VydmljZXMvSVRTUHVibGljLyR7b2FrUmlkZ2VMYXllcnNbaV1bMV19L01hcFNlcnZlcmAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkOiBvYWtSaWRnZUxheWVyc1tpXVsxXSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IG9ha1JpZGdlTGF5ZXJzW2ldWzBdLFxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1pblpvb206IDcsXHJcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDIwLFxyXG4gICAgICAgICAgICAgICAgYWRkUG9wdXA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsZWdlbmRDb2xsYXBzZTogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBtYXAuYWRkTGF5ZXIob2FrUmlkZ2VMYXllci5vbExheWVyKTtcclxuICAgIH1cclxuXHJcbiJdfQ==