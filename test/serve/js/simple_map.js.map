{"version":3,"sources":["webpack:///simple_map.js","webpack:///webpack/bootstrap 99693f14fcb3e83c98ca?ad23*","webpack:///./src/util/provide.ts?5c82*","webpack:///external \"$\"?57aa*","webpack:///./src/layers/LayerBase.ts?bf94*","webpack:///./src/olHelpers/geocode.ts?5a2f*","webpack:///./src/olHelpers/mapMoveCls.ts?cd45*","webpack:///./src/olHelpers/mapPopupCls.ts?e3f7*","webpack:///./src/olHelpers/quickMapBase.ts?fb65*","webpack:///./src/olHelpers/zoomResolutionConvert.ts?dd4b*","webpack:///external \"ol\"?81ed*","webpack:///./src/layers/LayerEsriMapServer.ts?9c85","webpack:///./src/olHelpers/esriToOlStyle.ts?9363","webpack:///./src/util/makeGuid.ts?e80e*","webpack:///./src/olHelpers/mapPopup.ts?5d6c*","webpack:///./src/collections/LayerLegend.ts?9de6","webpack:///./src/olHelpers/mapInteractionBase.ts?f419*","webpack:///./src/olHelpers/quickMap.ts?1069*","webpack:///./src/olHelpers/mapMove.ts?6a2b*","webpack:///./src/_tests/demos/simple_map.ts","webpack:///./src/olHelpers/projections.ts?804b*","webpack:///./src/util/checkDefined.ts?bcd7*"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","0","provide","namespace","window","gv","parts","split","nameSpace","length","util","default","1","$","10","zoomResolutionConvert","provide_1","makeGuid_1","nm","LayerBase","url","options","this","_url","_params","params","_legendCollapse","legendCollapse","_legendCheckbox","legendCheckbox","id","_name","animate","_opacity","opacity","_visible","visible","_source","undefined","_olLayer","_loaded","_maxResolution","zoomToResolution","minZoom","_minResolution","maxZoom","_minZoom","_maxZoom","_zIndex","zIndex","loadCallback","_legendContent","_$legendDiv","_applyCollapseCalled","_addLegendContent","legendContent","_load","loaded","getLegendDiv","additionalContent","indexOf","append","applyCollapse","addLegendContent","console","log","$expander","find","click","$this","siblings","slideToggle","hasClass","removeClass","html","addClass","trigger","refresh","source","_id","set","newId","_animate","newVal","newParams","visibility","setVisible","olLayer","setOpacity","newName","getSource","newZ","setZIndex","getOlLayer","11","ol","projections_1","invalidClass","geocoderLoadingClass","Geocode","mapDiv","map","_this","inputGuid","makeGuid","buttonGuid","indicationLayer","layer","Vector","style","Style","image","Circle","radius","fill","Fill","color","stroke","Stroke","width","addLayer","theButton","document","getElementById","theInput","reset","$theButton","$theInput","evt","preventDefault","disabled","clear","lat","parseFloat","lon","title","v","getView","geom","Point","feat","Feature","addFeature","transform","proj4326","proj3857","setCenter","getCoordinates","setZoom","keyup","keyCode","12","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","mapInteractionBase_1","checkDefined","MapMoveCls","_super","_arrLyrRequest","_arrLyrTimeout","_arrLayer","_lookupLayer","_mapMoveCallbacks","_mapMoveCallbacksLookup","_mapMoveCallbackDelays","_mapMoveCallbackContext","_mapMoveCallbackTimeout","_mapExtent","_zoomLevel","init","theMap","on","e","_updateMapExtent","triggerLyrLoad","type","triggerMoveCallback","theView","getZoom","extentArray","calculateExtent","getSize","minX","minY","maxX","maxY","lyr","index","eventType","undefinedOrNull","definedAndNotNull","clearTimeout","abort","callbackFunc","mapMoveBefore","mapMoveMakeGetParams","__this_1","innerFunction","theLayer","theIndex","_innerThis","mapMoveParams","mapMoveCallback","fail","jqXHR","statusText","always","setTimeout","onDemandDelay","ind","functionId","ctx","theFunc","__this","f","addVectorLayer","triggerOnAdd","_checkInit","push","addCallback","func","context","delay","13","FeatureLayerProperties","feature","layerIndex","selectionLayer","esriLayerName","popupContent","MapPopupCls","_arrPopupLayerIds","_arrPopupLayers","_arrPopupContentFunction","_$popupContainer","_$popupContent","_$popupCloser","_popupOverlay","_selectionLayers","_selectionLayerLookup","_mapClickFunctions","_popupChangedFunctions","_esriMapServiceLayers","_popupOpen","_popupCoordinate","_passThroughLayerFeatureArray","_currentPopupIndex","_popupContentLength","$map","target","getTarget","_ease","easing","inAndOut","Overlay","element","autoPan","autoPanAnimation","duration","getCenter","_map","addOverlay","closePopup","queryParams","geometry","join","geometryType","layers","sr","getProjection","getCode","mapExtent","imageDisplay","returnGeometry","tolerance","_i","_a","getPopupInfo","layerFeatureObjectArray","_featuresAtPixel","featObj","props","getProperties","popupContentResponse","popupHtml","_triggerFeatSelect","nextPopup","setPosition","scrollTop","pixel","getEventPixel","hit","forEachFeatureAtPixel","vLyr","getTargetElement","cursor","$currentPopupItemNumber","$innerPopup","$layerNameSpan","clearSelection","lyrFeatObj","toFixed","layerName","addMapServicePopupContent","esriName","featLayerObject","j","hasLyr","blur","addPopupChangedFunction","chgFunction","_addPopupLayer","selectionStyle","theStyle","olStyle","addVectorPopup","popupContentFunction","removeVectorPopup","idx","splice","addMapServicePopup","addMapClickFunction","14","quickMapBase","divId","center","x","y","zoom","baseSwitcher","fullScreen","addGeocode","css","osmLayer","Tile","OSM","proj","Projection","code","coordinates","controls","control","defaults","attributionOptions","collapsible","view","View","Map","addControl","FullScreen","geocode_1","17","zoomLevel","_zoomResLookup","resolutionToZoom","resolution","2","25","makeServiceUrl","folder","service","localCacheUrl","loc","location","href","toLowerCase","LayerBase_1","esriToOl","mapPopup_1","LayerEsriMapServer","TileArcGISRest","showLayers","_showLayers","minResolution","maxResolution","addPopup","_esriFormat","format","EsriJSON","_popupRequest","getLegend","urlCopy","newHtml","makeMapServiceLegend","r","a","attrVal","toString","attr","slice","readFeature","27","_colorArrayToRgba","colorArray","htmlEscape","str","String","replace","makeFeatureServiceLegendAndSymbol","esriResponse","renderer","drawingInfo","symbolLegendOut","SingleSymbol","PointSymbol","LineSymbol","PolygonSymbol","alert","UniqueValueSymbol","legend","legendHtml","mapServiceLegendItem","lyrObject","skipLayerNameAndExpander","legendItems","newLegendHtml","CommonSymbol","symbolObj","innerColor","outerColor","outline","outlineWidth","size","Icon","src","lineWidth","SymbolGenerator","SymbolClass","symbol","uniqueValueInfos","propertyName","field1","defaultSymbol","defaultStyle","defaultLabelHtml","valueArray","labelArray","legendArray","propertyStyleLookup","uniqueVal","uniqueSym","checkProperties","checkProperty","_b","_c","h","3","Math","random","4","mapPopupCls_1","mapPopup","46","mapMove_1","LayerGroup","groupConfig","parent","groupLayers","groupLayersLookup","groupGroups","groupGroupsLookup","itemIdArray","groupId","groupName","allGroupLookup","root","allGroupArray","allLayerArray","allLayerLookup","layerParentLookup","collapse","addCheck","addGroup","parents","parentGroup","newGroup","addLegendLayer","newLayer","getLegendHtml","legendId","legendTitle","_buildLegend","layerDivClasses","itemIds","theGroup","theHml","itemId","otherGroup","LayerLegend","legendItems_1","scaleDependent","checkInit","$divElement","_legendItems","layerGroup","_buildTree","ext","$lyrLi","change","legendLayerLis","checked","lyrId","prop","oneItem","groupItem","items","layerItem","5","MapInteractionBase","subtype","_initialized","_subtype","initialized","msg","6","quickMap","quickMapBase_1","7","mapMoveCls_1","mapMove","77","quickMap_1","LayerEsriMapServer_1","LayerLegend_1","wisDotRegions","sixYearPlan","layerArray","8","proj3070","9","input"],"mappings":"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","file":"simple_map.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 77);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace) {\r\n    \"use strict\";\r\n    if (typeof window.gv == 'undefined') {\r\n        window.gv = {};\r\n    }\r\n    var parts = namespace.split('.');\r\n    var nameSpace = window.gv;\r\n    for (var i = 0; i < parts.length; i++) {\r\n        var newObject = nameSpace[parts[i]];\r\n        if (typeof newObject == 'undefined') {\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n    return nameSpace;\r\n}\r\nprovide('util');\r\nwindow.gv.util.provide = provide;\r\nexports.default = provide;\r\n\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\nmodule.exports = $;\n\n/***/ }),\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar zoomResolutionConvert = __webpack_require__(17);\r\nvar provide_1 = __webpack_require__(0);\r\nvar makeGuid_1 = __webpack_require__(3);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * The base layer class\r\n * @abstract\r\n */\r\nvar LayerBase = (function () {\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - url for source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id=makeGuid()] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] - the z index for the layer\r\n     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n     */\r\n    function LayerBase(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        options = options || {};\r\n        if (typeof url !== 'string') {\r\n            throw 'Invalid URL';\r\n        }\r\n        this._url = url;\r\n        this._params = typeof options.params == 'object' ? options.params : {};\r\n        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n        this.id = options.id || makeGuid_1.default();\r\n        this._name = options.name || 'Unnamed Layer';\r\n        this.animate = false;\r\n        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1;\r\n        }\r\n        else if (this._opacity < 0) {\r\n            this._opacity = 0;\r\n        }\r\n        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n        this._source = undefined;\r\n        /**\r\n         *\r\n         * @protected\r\n         */\r\n        this._olLayer = undefined;\r\n        this._loaded = false;\r\n        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n        if (typeof this._maxResolution !== 'undefined') {\r\n            this._maxResolution += 0.00001;\r\n        }\r\n        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n        };\r\n        this._legendContent = '';\r\n        if (this._legendCheckbox) {\r\n            this._legendContent += \"<input type=\\\"checkbox\\\" \" + (this.visible ? 'checked' : '') + \" \" +\r\n                (\"class=\\\"legend-check\\\" id=\\\"\" + this.id + \"-legend-layer-check\\\"><span></span>\");\r\n            this._legendContent += \"<label for=\\\"\" + this.id + \"-legend-layer-check\\\" class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n        }\r\n        else {\r\n            this._legendContent += \"<label class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n        }\r\n        this._$legendDiv = null;\r\n        this._applyCollapseCalled = false;\r\n        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n    }\r\n    /**\r\n     * base load function, sets _loaded = true if it is not already\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    LayerBase.prototype._load = function () {\r\n        if (this.loaded == true) {\r\n            return true;\r\n        }\r\n        else {\r\n            this._loaded = true;\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Get the legend html, be sure to only add to the DOM once\r\n     * @returns {string} html for layer wrapped in a div\r\n     */\r\n    LayerBase.prototype.getLegendDiv = function () {\r\n        return \"<div class=\\\"legend-layer-div\\\" id=\\\"\" + this.id + \"-legend-layer-div\\\">\" + this._legendContent + \"</div>\";\r\n    };\r\n    /**\r\n     *\r\n     * @param additionalContent - additional content to add to legend\r\n     * @private\r\n     */\r\n    LayerBase.prototype._addLegendContent = function (additionalContent) {\r\n        if (additionalContent === void 0) { additionalContent = ''; }\r\n        var addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n        if (addCollapse) {\r\n            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n        }\r\n        this._legendContent += additionalContent;\r\n        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n        if (this._$legendDiv.length > 0) {\r\n            this._$legendDiv.append(additionalContent);\r\n            this.applyCollapse();\r\n        }\r\n    };\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=] - additonal content to add\r\n     */\r\n    LayerBase.prototype.addLegendContent = function (additionalContent) {\r\n        this._addLegendContent(additionalContent);\r\n    };\r\n    LayerBase.prototype.applyCollapse = function () {\r\n        if (this._applyCollapseCalled) {\r\n            console.log('collapse already applied');\r\n            return undefined;\r\n        }\r\n        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n        if (this._$legendDiv.length > 0) {\r\n            var $expander = this._$legendDiv.find('.legend-items-expander');\r\n            if ($expander.length > 0) {\r\n                this._applyCollapseCalled = true;\r\n                $expander.click(function () {\r\n                    var $this = $(this);\r\n                    $this.siblings('ul').slideToggle();\r\n                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                        $this.removeClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9660;');\r\n                    }\r\n                    else {\r\n                        $this.addClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9654;');\r\n                    }\r\n                });\r\n                if (this._legendCollapse) {\r\n                    $expander.trigger('click');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * trick to refresh the layer\r\n     */\r\n    LayerBase.prototype.refresh = function () {\r\n        if (this.source) {\r\n            this.source.refresh();\r\n        }\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"id\", {\r\n        get: function () {\r\n            return this._id;\r\n        },\r\n        set: function (newId) {\r\n            this._id = newId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"animate\", {\r\n        get: function () {\r\n            return this._animate;\r\n        },\r\n        set: function (animate) {\r\n            this._animate = animate;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"legendContent\", {\r\n        /**\r\n         * get the legend content\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._legendContent;\r\n        },\r\n        /**\r\n         * set the legend content directly\r\n         * @param {string} newVal - new content\r\n         * @protected\r\n         */\r\n        set: function (newVal) {\r\n            this._legendContent = newVal;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"params\", {\r\n        /**\r\n         * get the map get params\r\n         * @type {object}\r\n         */\r\n        get: function () {\r\n            return this._params;\r\n        },\r\n        /**\r\n         * set the map get params\r\n         * @param {object} newParams - new get params\r\n         * @protected\r\n         */\r\n        set: function (newParams) {\r\n            this._params = newParams;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"minResolution\", {\r\n        /**\r\n         * get the minimum resolution\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._minResolution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"maxResolution\", {\r\n        /**\r\n         * get the maximum resolution\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._maxResolution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"minZoom\", {\r\n        /**\r\n         * get min zoom\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._minZoom;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"maxZoom\", {\r\n        /**\r\n         * get max zoom\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._maxZoom;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"url\", {\r\n        /**\r\n         * get the url\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._url;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"visible\", {\r\n        /**\r\n         * Get the layer visibility\r\n         * @type {boolean}\r\n         */\r\n        get: function () {\r\n            return this._visible;\r\n        },\r\n        /**\r\n         * set the visibility\r\n         * @param visibility\r\n         */\r\n        set: function (visibility) {\r\n            this.setVisible(visibility);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.setVisible = function (visibility) {\r\n        this._visible = visibility;\r\n        if (this.olLayer) {\r\n            this.olLayer.setVisible(this._visible);\r\n            if (visibility && !this._loaded) {\r\n                this._load();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"opacity\", {\r\n        /**\r\n         * Get the layer opacity\r\n         * @type {number}\r\n         */\r\n        get: function () {\r\n            return this._opacity;\r\n        },\r\n        /**\r\n         * Set the layer opacity\r\n         * @param {number} opacity - layer opacity\r\n         */\r\n        set: function (opacity) {\r\n            this._opacity = opacity;\r\n            if (this.olLayer) {\r\n                this.olLayer.setOpacity(this._opacity);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"name\", {\r\n        /**\r\n         * Get the layer name\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        /**\r\n         * set the layer name\r\n         * @param {string} newName - the new name\r\n         */\r\n        set: function (newName) {\r\n            this._name = newName;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"loaded\", {\r\n        /**\r\n         * Check if the layer is loaded\r\n         * @type {boolean}\r\n         */\r\n        get: function () {\r\n            return this._loaded;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"source\", {\r\n        /**\r\n         * get the layer source\r\n         * @type {*}\r\n         */\r\n        get: function () {\r\n            return this.getSource();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.getSource = function () {\r\n        return this._source;\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"zIndex\", {\r\n        /**\r\n         * get the z index\r\n         */\r\n        get: function () {\r\n            return this._zIndex;\r\n        },\r\n        /**\r\n         * set the z index\r\n         */\r\n        set: function (newZ) {\r\n            this._zIndex = newZ;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.setZIndex = function (newZ) {\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"olLayer\", {\r\n        /**\r\n         * the the ol layer\r\n         */\r\n        get: function () {\r\n            return this.getOlLayer();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.getOlLayer = function () {\r\n        return this._olLayer;\r\n    };\r\n    return LayerBase;\r\n}());\r\nexports.LayerBase = LayerBase;\r\nnm.LayerBase = LayerBase;\r\nexports.default = LayerBase;\r\n\n\n/***/ }),\n\n/***/ 11:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar $ = __webpack_require__(1);\r\nvar makeGuid_1 = __webpack_require__(3);\r\nvar ol = __webpack_require__(2);\r\nvar projections_1 = __webpack_require__(8);\r\nvar invalidClass = 'geocoder-invalid';\r\nvar geocoderLoadingClass = 'geocoder-loading';\r\n// let testAddress = '65 7th Street, Prairie du Sac, WI';\r\nvar Geocode = (function () {\r\n    function Geocode(mapDiv, map) {\r\n        var _this = this;\r\n        var inputGuid = makeGuid_1.makeGuid();\r\n        var buttonGuid = makeGuid_1.makeGuid();\r\n        this.map = map;\r\n        this.indicationLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: new ol.style.Style({\r\n                image: new ol.style.Circle({\r\n                    radius: 12,\r\n                    fill: new ol.style.Fill({ color: 'rgba(255,0,0,0.5)' }),\r\n                    stroke: new ol.style.Stroke({ color: 'red', width: 1 })\r\n                })\r\n            })\r\n        });\r\n        this.map.addLayer(this.indicationLayer);\r\n        $(mapDiv).append('<div class=\"geocoder-el\">' +\r\n            (\"<input type=\\\"text\\\" id=\\\"\" + inputGuid + \"\\\">\") +\r\n            (\"<button id=\\\"\" + buttonGuid + \"\\\">Search</button>\") +\r\n            '</div>');\r\n        this.theButton = document.getElementById(buttonGuid);\r\n        this.theInput = document.getElementById(inputGuid);\r\n        this.reset();\r\n        var $theButton = $(this.theButton);\r\n        var $theInput = $(this.theInput);\r\n        $theButton.click(function (evt) {\r\n            evt.preventDefault();\r\n            $theButton.addClass(geocoderLoadingClass);\r\n            _this.theButton.disabled = true;\r\n            _this.indicationLayer.getSource().clear();\r\n            $.get(\"https://geocode.xyz/\" + _this.theInput.value + \"?geoit=json\", {}, function (d) {\r\n                var lat = parseFloat(d['latt']);\r\n                var lon = parseFloat(d['longt']);\r\n                if ((lat == 0 && lon == 0) || d['error']) {\r\n                    $theInput.addClass(invalidClass);\r\n                    _this.theInput.title = 'Specified Location Invalid';\r\n                    _this.theButton.title = 'Specified Location Invalid';\r\n                }\r\n                else {\r\n                    var v = _this.map.getView();\r\n                    var p = new ol.geom.Point([lon, lat]);\r\n                    var feat = new ol.Feature(p);\r\n                    _this.indicationLayer.getSource().addFeature(feat);\r\n                    p.transform(projections_1.proj4326, projections_1.proj3857);\r\n                    v.setCenter(p.getCoordinates());\r\n                    v.setZoom(13);\r\n                }\r\n                $theButton.removeClass(geocoderLoadingClass);\r\n                _this.theButton.disabled = false;\r\n            }, 'json');\r\n        });\r\n        $(this.theInput).keyup(function (evt) {\r\n            evt.preventDefault();\r\n            _this.theButton.disabled = _this.theInput.value.length == 0;\r\n            $theInput.removeClass(invalidClass);\r\n            _this.theInput.title = '';\r\n            _this.theButton.title = '';\r\n            if (!_this.theButton.disabled && evt.keyCode == 13) {\r\n                $theButton.click();\r\n            }\r\n        });\r\n    }\r\n    Geocode.prototype.reset = function () {\r\n        this.theButton.disabled = true;\r\n        this.theInput.value = '';\r\n    };\r\n    return Geocode;\r\n}());\r\nexports.Geocode = Geocode;\r\n\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapInteractionBase_1 = __webpack_require__(5);\r\nvar checkDefined = __webpack_require__(9);\r\nvar provide_1 = __webpack_require__(0);\r\nvar makeGuid_1 = __webpack_require__(3);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * assists with map move interactions, trigger callback functions\r\n * @augments MapInteractionBase\r\n */\r\nvar MapMoveCls = (function (_super) {\r\n    __extends(MapMoveCls, _super);\r\n    /**\r\n     * constructor called implicitly\r\n     */\r\n    function MapMoveCls() {\r\n        var _this = _super.call(this, 'map move') || this;\r\n        _this._arrLyrRequest = [];\r\n        _this._arrLyrTimeout = [];\r\n        _this._arrLayer = [];\r\n        _this._lookupLayer = {};\r\n        _this._mapMoveCallbacks = [];\r\n        _this._mapMoveCallbacksLookup = {};\r\n        _this._mapMoveCallbackDelays = [];\r\n        _this._mapMoveCallbackContext = [];\r\n        _this._mapMoveCallbackTimeout = [];\r\n        _this._mapExtent = undefined;\r\n        _this._zoomLevel = undefined;\r\n        return _this;\r\n    }\r\n    /**\r\n     * initialize the map move object\r\n     * @param theMap - the ol map\r\n     */\r\n    MapMoveCls.prototype.init = function (theMap) {\r\n        var _this = this;\r\n        _super.prototype.init.call(this, theMap);\r\n        this.map.getView().on(['change:center', 'change:resolution'], function (e) {\r\n            _this._updateMapExtent();\r\n            // trigger the layer updates\r\n            for (var i = 0; i < _this._arrLayer.length; i++) {\r\n                _this.triggerLyrLoad(_this._arrLayer[i], i, e.type);\r\n            }\r\n            // trigger the map callbacks\r\n            for (var i = 0; i < _this._mapMoveCallbacks.length; i++) {\r\n                _this.triggerMoveCallback(i, e.type);\r\n            }\r\n        });\r\n    };\r\n    MapMoveCls.prototype._updateMapExtent = function () {\r\n        var theView = this.map.getView();\r\n        this._zoomLevel = theView.getZoom();\r\n        var extentArray = theView.calculateExtent(this.map.getSize());\r\n        this._mapExtent = {\r\n            minX: extentArray[0],\r\n            minY: extentArray[1],\r\n            maxX: extentArray[2],\r\n            maxY: extentArray[3]\r\n        };\r\n    };\r\n    Object.defineProperty(MapMoveCls.prototype, \"mapExtent\", {\r\n        /**\r\n         * return the map extent\r\n         */\r\n        get: function () {\r\n            if (!this._mapExtent) {\r\n                this._updateMapExtent();\r\n            }\r\n            return this._mapExtent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Trigger the layer load\r\n     * @param lyr the layer being acted on\r\n     * @param index index of the layer\r\n     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n     */\r\n    MapMoveCls.prototype.triggerLyrLoad = function (lyr, index, eventType) {\r\n        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            throw 'need to define lyr or index';\r\n        }\r\n        else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            index = this._arrLayer.indexOf(lyr);\r\n        }\r\n        else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n            lyr = this._arrLayer[index];\r\n        }\r\n        // clear the timeout\r\n        if (this._arrLyrTimeout[index] != null) {\r\n            clearTimeout(this._arrLyrTimeout[index]);\r\n            this._arrLyrTimeout[index] = null;\r\n        }\r\n        // abort if necessary and clear the request\r\n        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n            this._arrLyrRequest[index].abort();\r\n            this._arrLyrRequest[index] = null;\r\n        }\r\n        // dummy callback used if before load returns false\r\n        var callbackFunc = function () { };\r\n        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n            var __this_1 = this;\r\n            callbackFunc = function () {\r\n                function innerFunction(theLayer, theIndex) {\r\n                    var _innerThis = this;\r\n                    this._arrLyrRequest[theIndex] = $.get(theLayer.url, theLayer.mapMoveParams, function (d) {\r\n                        /**\r\n                         * @type {LayerBaseVector}\r\n                         */\r\n                        theLayer.mapMoveCallback(d);\r\n                        theLayer.loadCallback();\r\n                    }, 'json').fail(function (jqXHR) {\r\n                        if (jqXHR.statusText != 'abort') {\r\n                            console.log('failed');\r\n                            console.log(theLayer.url);\r\n                            console.log(theLayer.mapMoveParams);\r\n                        }\r\n                    }).always(function () {\r\n                        _innerThis._arrLyrTimeout[theIndex] = null;\r\n                        _innerThis._arrLyrRequest[theIndex] = null;\r\n                    });\r\n                }\r\n                innerFunction.call(__this_1, lyr, index);\r\n            };\r\n        }\r\n        else {\r\n            lyr.clear();\r\n        }\r\n        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n    };\r\n    /**\r\n     * trigger the map move call back at the given index\r\n     * @param ind - the index of the layer\r\n     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n     * @param functionId=undefined the function id used to reference the added callback function\r\n     */\r\n    MapMoveCls.prototype.triggerMoveCallback = function (ind, eventType, functionId) {\r\n        if (typeof ind == 'undefined' && typeof functionId == 'undefined') {\r\n            throw 'either the function index or the id must be defined';\r\n        }\r\n        if (typeof ind !== 'number') {\r\n            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n        }\r\n        if (ind < 0) {\r\n            console.log('function not found');\r\n            return;\r\n        }\r\n        // clear the timeout\r\n        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n            this._mapMoveCallbackTimeout[ind] = null;\r\n        }\r\n        var ctx = this._mapMoveCallbackContext[ind];\r\n        var theFunc = this._mapMoveCallbacks[ind];\r\n        var __this = this;\r\n        var f = function () {\r\n            if (ctx !== null) {\r\n                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n            else {\r\n                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n        };\r\n        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n    };\r\n    /**\r\n     * Add a layer to the interaction\r\n     * @param  lyr - layer to add\r\n     * @param triggerOnAdd - if the layer should be loaded on add\r\n     */\r\n    MapMoveCls.prototype.addVectorLayer = function (lyr, triggerOnAdd) {\r\n        if (triggerOnAdd === void 0) { triggerOnAdd = true; }\r\n        if (this._arrLayer.indexOf(lyr) > -1) {\r\n            console.log('already added ' + lyr.name + ' to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        this._arrLyrRequest.push(null);\r\n        this._arrLyrTimeout.push(null);\r\n        this._arrLayer.push(lyr);\r\n        this._lookupLayer[lyr.id] = lyr;\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n        }\r\n    };\r\n    /**\r\n     * add a callback to the map move event\r\n     * @param func - callback function\r\n     * @param context - the context to use for this function\r\n     * @param delay=50 the delay before call load\r\n     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n     * @param functionId optional id to reference the function later for outside triggering\r\n     */\r\n    MapMoveCls.prototype.addCallback = function (func, context, delay, triggerOnAdd, functionId) {\r\n        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n            console.log('this function already added to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        if (!functionId) {\r\n            functionId = makeGuid_1.default();\r\n        }\r\n        this._mapMoveCallbacks.push(func);\r\n        this._mapMoveCallbacksLookup[functionId] = func;\r\n        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n        this._mapMoveCallbackTimeout.push(null);\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n        }\r\n    };\r\n    return MapMoveCls;\r\n}(mapInteractionBase_1.default));\r\nexports.MapMoveCls = MapMoveCls;\r\nnm.MapMoveCls = MapMoveCls;\r\nexports.default = MapMoveCls;\r\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapInteractionBase_1 = __webpack_require__(5);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('olHelpers');\r\nvar FeatureLayerProperties = (function () {\r\n    /**\r\n     *\r\n     * @param feature the feature\r\n     * @param layer - the layer in the popup\r\n     * @param layerIndex - index of the layer\r\n     * @param selectionLayer - the ol selection layer\r\n     * @param [esriLayerName=undefined] - esri layer name\r\n     */\r\n    function FeatureLayerProperties(feature, layer, layerIndex, selectionLayer, esriLayerName) {\r\n        this.feature = feature;\r\n        this.layer = layer;\r\n        this.layerIndex = layerIndex;\r\n        this.selectionLayer = selectionLayer;\r\n        this.popupContent = '';\r\n        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n    }\r\n    Object.defineProperty(FeatureLayerProperties.prototype, \"layerName\", {\r\n        get: function () {\r\n            if (typeof this.esriLayerName == 'string') {\r\n                return this.esriLayerName;\r\n            }\r\n            else {\r\n                return this.layer.name;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FeatureLayerProperties;\r\n}());\r\nexports.FeatureLayerProperties = FeatureLayerProperties;\r\n/**\r\n * map popup class\r\n * @augments MapInteractionBase\r\n */\r\nvar MapPopupCls = (function (_super) {\r\n    __extends(MapPopupCls, _super);\r\n    /**\r\n     * Definition for openlayers style function\r\n     * @callback olStyleFunction\r\n     * &param feature the openlayers vector feature\r\n     * $param\r\n     */\r\n    /**\r\n     * map popup constructor\r\n     */\r\n    function MapPopupCls() {\r\n        var _this = _super.call(this, 'map popup') || this;\r\n        _this._arrPopupLayerIds = [];\r\n        _this._arrPopupLayers = [];\r\n        // this._arrPopupOlLayers = [];\r\n        _this._arrPopupContentFunction = [];\r\n        _this._$popupContainer = undefined;\r\n        _this._$popupContent = undefined;\r\n        _this._$popupCloser = undefined;\r\n        _this._popupOverlay = undefined;\r\n        _this._selectionLayers = [];\r\n        _this._selectionLayerLookup = {};\r\n        _this._mapClickFunctions = [];\r\n        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n        //this._popupChangedLookup = {'a': a};\r\n        _this._popupChangedFunctions = [];\r\n        _this._esriMapServiceLayers = [];\r\n        _this._popupOpen = false;\r\n        _this._popupCoordinate = null;\r\n        _this._passThroughLayerFeatureArray = [];\r\n        _this._currentPopupIndex = -1;\r\n        _this._popupContentLength = 0;\r\n        return _this;\r\n    }\r\n    /**\r\n     * map popup initialization\r\n     * @param {ol.Map} theMap - the ol map\r\n     */\r\n    MapPopupCls.prototype.init = function (theMap) {\r\n        var _this = this;\r\n        _super.prototype.init.call(this, theMap);\r\n        var $map;\r\n        var target = this.map.getTarget();\r\n        if (typeof target == 'string') {\r\n            $map = $('#' + target);\r\n        }\r\n        else {\r\n            $map = $(target);\r\n        }\r\n        $map.append('<div class=\"ol-popup\">' +\r\n            '<span class=\"ol-popup-closer\">X</span>' +\r\n            '<div class=\"popup-content\"></div>' +\r\n            '</div>');\r\n        this._$popupContainer = $map.find('.ol-popup');\r\n        this._$popupContent = $map.find('.popup-content');\r\n        this._$popupCloser = $map.find('.ol-popup-closer');\r\n        var _ease = function (n) {\r\n            return ol.easing.inAndOut(n);\r\n        };\r\n        this._popupOverlay = new ol.Overlay({\r\n            element: this._$popupContainer[0],\r\n            autoPan: true,\r\n            autoPanAnimation: {\r\n                duration: 250,\r\n                source: theMap.getView().getCenter(),\r\n                easing: _ease\r\n            }\r\n        });\r\n        this._map.addOverlay(this._popupOverlay);\r\n        this._$popupCloser.click(function (evt) {\r\n            _this.closePopup();\r\n        });\r\n        // display popup on click\r\n        this._map.on('singleclick', function (evt) {\r\n            _this.closePopup();\r\n            _this._popupCoordinate = evt['coordinate'];\r\n            // esri map service layers\r\n            if (_this._esriMapServiceLayers.length > 0) {\r\n                var queryParams = {\r\n                    geometry: evt['coordinate'].join(','),\r\n                    geometryType: 'esriGeometryPoint',\r\n                    layers: 'all',\r\n                    sr: _this._map.getView().getProjection().getCode().split(':')[1],\r\n                    mapExtent: _this._map.getView().calculateExtent(_this._map.getSize()).join(','),\r\n                    imageDisplay: _this._map.getSize().join(',') + ',96',\r\n                    returnGeometry: true,\r\n                    tolerance: 15,\r\n                    f: 'pjson'\r\n                };\r\n                for (var _i = 0, _a = _this._esriMapServiceLayers; _i < _a.length; _i++) {\r\n                    var l = _a[_i];\r\n                    l.getPopupInfo(queryParams);\r\n                }\r\n            }\r\n            var layerFeatureObjectArray = _this._featuresAtPixel(evt['pixel']);\r\n            _this._passThroughLayerFeatureArray = [];\r\n            _this._currentPopupIndex = -1;\r\n            for (var i = 0; i < layerFeatureObjectArray.length; i++) {\r\n                var featObj = layerFeatureObjectArray[i];\r\n                var props = featObj.feature.getProperties();\r\n                var popupContentResponse = _this._arrPopupContentFunction[featObj.layerIndex](props, _this._$popupContent);\r\n                //skip if return was false\r\n                if (popupContentResponse === false) {\r\n                    //continue;\r\n                }\r\n                else if (typeof popupContentResponse == 'string') {\r\n                    featObj.popupContent = popupContentResponse;\r\n                    _this._passThroughLayerFeatureArray.push(featObj);\r\n                }\r\n                else {\r\n                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n                }\r\n            }\r\n            _this._popupContentLength = _this._passThroughLayerFeatureArray.length;\r\n            _this._currentPopupIndex = -1;\r\n            var popupHtml = '<div class=\"ol-popup-nav\">';\r\n            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n            popupHtml += \"<span class=\\\"current-popup-item-number\\\" style=\\\"font-weight: bold;\\\"></span>\";\r\n            popupHtml += \"<span>&nbsp;of&nbsp;</span>\";\r\n            popupHtml += \"<span class=\\\"popup-content-length\\\" style=\\\"font-weight: bold;\\\">\" + _this._popupContentLength + \"</span>\";\r\n            popupHtml += \"<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>\";\r\n            popupHtml += \"<span class=\\\"current-popup-layer-name\\\"></span>\";\r\n            popupHtml += '</div>';\r\n            popupHtml += '<div class=\"ol-popup-inner\">';\r\n            popupHtml += '</div>';\r\n            _this._$popupContent.html(popupHtml);\r\n            _this._$popupContent.find('.previous-popup').click(function () {\r\n                if (_this._popupContentLength == 1) {\r\n                    return;\r\n                }\r\n                if (_this._currentPopupIndex == 0) {\r\n                    _this._currentPopupIndex = _this._popupContentLength - 1;\r\n                }\r\n                else {\r\n                    _this._currentPopupIndex--;\r\n                }\r\n                _this._triggerFeatSelect();\r\n            });\r\n            var nextPopup = _this._$popupContent.find('.next-popup');\r\n            nextPopup.click(function () {\r\n                if (_this._popupContentLength == 1 && _this._currentPopupIndex > -1) {\r\n                    return;\r\n                }\r\n                if (_this._currentPopupIndex == _this._popupContentLength - 1) {\r\n                    _this._currentPopupIndex = 0;\r\n                }\r\n                else {\r\n                    _this._currentPopupIndex++;\r\n                }\r\n                _this._triggerFeatSelect();\r\n            });\r\n            if (_this._popupContentLength > 0) {\r\n                nextPopup.trigger('click');\r\n                _this._popupOverlay.setPosition(_this._popupCoordinate);\r\n                _this._$popupContent.scrollTop(0);\r\n                _this._popupOpen = true;\r\n            }\r\n        });\r\n        //change mouse cursor when over marker\r\n        this._map.on('pointermove', function (evt) {\r\n            if (evt['dragging']) {\r\n                return;\r\n            }\r\n            var pixel = _this.map.getEventPixel(evt['originalEvent']);\r\n            var hit = false;\r\n            _this.map.forEachFeatureAtPixel(pixel, function (f, l) {\r\n                if (hit) {\r\n                    return;\r\n                }\r\n                for (var _i = 0, _a = _this._arrPopupLayers; _i < _a.length; _i++) {\r\n                    var vLyr = _a[_i];\r\n                    if (vLyr.olLayer == l) {\r\n                        hit = true;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            var mapElement = _this.map.getTargetElement();\r\n            mapElement.style.cursor = hit ? 'pointer' : '';\r\n        });\r\n    };\r\n    /**\r\n     * helper to select features\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._triggerFeatSelect = function () {\r\n        var $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n        var $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n        var $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n        this.clearSelection();\r\n        var lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n        $layerNameSpan.html(lyrFeatObj.layerName);\r\n        $innerPopup.html(lyrFeatObj.popupContent);\r\n        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n        for (var _i = 0, _a = this._popupChangedFunctions; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f(this._$popupContent);\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param feature - the ol feature\r\n     * @param {LayerEsriMapServer} lyr - the map server layer\r\n     * @param {string} popupContent - popup content\r\n     * @param {string} esriName - esri layer name\r\n     */\r\n    MapPopupCls.prototype.addMapServicePopupContent = function (feature, lyr, popupContent, esriName) {\r\n        var featLayerObject = new FeatureLayerProperties(feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName);\r\n        featLayerObject.popupContent = popupContent;\r\n        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n        this._popupContentLength++;\r\n        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n        if (!this._popupOpen) {\r\n            this._$popupContent.find('.next-popup').trigger('click');\r\n            this._popupOverlay.setPosition(this._popupCoordinate);\r\n            this._$popupContent.scrollTop(0);\r\n            this._popupOpen = true;\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param  pixel - the ol pixel\r\n     * @returns  feature layer properties\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._featuresAtPixel = function (pixel) {\r\n        var _this = this;\r\n        var layerFeatureObjectArray = [];\r\n        this.map.forEachFeatureAtPixel(pixel, function (feature, layer) {\r\n            var hasLyr = false;\r\n            var j;\r\n            var lyr = null;\r\n            for (j = 0; j < _this._arrPopupLayers.length; j++) {\r\n                lyr = _this._arrPopupLayers[j];\r\n                if (lyr.olLayer === layer) {\r\n                    hasLyr = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (hasLyr) {\r\n                layerFeatureObjectArray.push(new FeatureLayerProperties(feature, lyr, j, _this._selectionLayers[j]));\r\n            }\r\n        });\r\n        return layerFeatureObjectArray;\r\n    };\r\n    MapPopupCls.prototype.closePopup = function () {\r\n        this._checkInit();\r\n        this._popupOpen = false;\r\n        this._popupOverlay.setPosition(undefined);\r\n        this._$popupCloser[0].blur();\r\n        this.clearSelection();\r\n        this._$popupContent.html('');\r\n        return false;\r\n    };\r\n    ;\r\n    /**\r\n     *\r\n     * @param chgFunction - popup change function\r\n     */\r\n    MapPopupCls.prototype.addPopupChangedFunction = function (chgFunction) {\r\n        this._popupChangedFunctions.push(chgFunction);\r\n    };\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - the layer being acted on\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns  the new selection layer\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._addPopupLayer = function (lyr, selectionStyle) {\r\n        this._checkInit();\r\n        selectionStyle = selectionStyle || {};\r\n        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n        selectionStyle.width = selectionStyle.width || 10;\r\n        var theStyle;\r\n        if (selectionStyle.olStyle) {\r\n            theStyle = selectionStyle.olStyle;\r\n        }\r\n        else {\r\n            theStyle = new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: selectionStyle.color,\r\n                    width: selectionStyle.width\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 7,\r\n                    fill: new ol.style.Fill({ color: selectionStyle.color }),\r\n                    stroke: new ol.style.Stroke({ color: selectionStyle.color, width: 1 })\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: selectionStyle.color\r\n                })\r\n            });\r\n        }\r\n        var selectionLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: theStyle\r\n        });\r\n        selectionLayer.setZIndex(100);\r\n        this._selectionLayers.push(selectionLayer);\r\n        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n        this.map.addLayer(selectionLayer);\r\n        return selectionLayer;\r\n    };\r\n    /**\r\n     * Add popup to the map\r\n     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    MapPopupCls.prototype.addVectorPopup = function (lyr, popupContentFunction, selectionStyle) {\r\n        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._arrPopupLayerIds.push(lyr.id);\r\n        this._arrPopupLayers.push(lyr);\r\n        // this._arrPopupOlLayers.push(lyr.olLayer);\r\n        this._arrPopupContentFunction.push(popupContentFunction);\r\n        return selectionLayer;\r\n    };\r\n    ;\r\n    /**\r\n     *\r\n     * @param {LayerBase} lyr - layer\r\n     */\r\n    MapPopupCls.prototype.removeVectorPopup = function (lyr) {\r\n        var idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n        if (idx > -1) {\r\n            this._arrPopupLayerIds.splice(idx, 1);\r\n            this._arrPopupLayers.splice(idx, 1);\r\n            // this._arrPopupOlLayers.splice(idx, 1);\r\n            this._arrPopupContentFunction.splice(idx, 1);\r\n            this._selectionLayers.splice(idx, 1);\r\n            delete this._selectionLayerLookup[lyr.id];\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {LayerEsriMapServer} lyr - map server layer\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    MapPopupCls.prototype.addMapServicePopup = function (lyr, selectionStyle) {\r\n        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._esriMapServiceLayers.push(lyr);\r\n        return selectionLayer;\r\n    };\r\n    MapPopupCls.prototype.clearSelection = function () {\r\n        this._checkInit();\r\n        for (var i = 0; i < this._selectionLayers.length; i++) {\r\n            this._selectionLayers[i].getSource().clear();\r\n        }\r\n        for (var _i = 0, _a = this._mapClickFunctions; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f();\r\n        }\r\n    };\r\n    ;\r\n    /**\r\n     * Add a function to be called when the map is clicked but before any popups are implemented\r\n     * @param {function} func - the map click function\r\n     */\r\n    MapPopupCls.prototype.addMapClickFunction = function (func) {\r\n        this._mapClickFunctions.push(func);\r\n    };\r\n    return MapPopupCls;\r\n}(mapInteractionBase_1.default));\r\nexports.MapPopupCls = MapPopupCls;\r\nnm.MapPopupCls = MapPopupCls;\r\nexports.default = MapPopupCls;\r\n\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar geocode_1 = __webpack_require__(11);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param [options={}] config options\r\n * @param [options.divId=map] map div id\r\n * @param [options.center={}] center config object\r\n * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param [options.center.y=5574910] center y, web mercator y or lat\r\n * @param [options.zoom=7] zoom level\r\n * @param [options.minZoom=undefined] min zoom\r\n * @param [options.maxZoom=undefined] max zoom\r\n * @param [options.baseSwitcher=true] if add base map switcher\r\n * @param [options.fullScreen=false] if add base map switcher\r\n * @returns the ol map\r\n */\r\nfunction quickMapBase(options) {\r\n    if (options === void 0) { options = {}; }\r\n    options.divId = options.divId || 'map';\r\n    options.center = options.center || { x: -10018378, y: 5574910 };\r\n    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n    options.addGeocode = options.addGeocode || false;\r\n    var $mapDiv = $('#' + options.divId);\r\n    $mapDiv.css('position', 'relative');\r\n    var osmLayer = new ol.layer.Tile({ source: new ol.source.OSM() });\r\n    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n    var osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n    var aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n    if (options.baseSwitcher) {\r\n        //  let switcherContent = '<div class=\"base-map-switcher\" title=\"Toggle Base Layer\" style=\"';\r\n        //  switcherContent += 'position: absolute; top: 70px; left: 4px; border: solid black 1px; ';\r\n        //  switcherContent += `height: 50px; width: 50px; z-index: 10; border-radius: 4px; background: ${aerialCss};`;\r\n        //  switcherContent += '\"></div>';\r\n        //  $mapDiv.append(switcherContent);\r\n        //\r\n        // $mapDiv.find('.base-map-switcher').click(function() {\r\n        //      \"use strict\";\r\n        //      osmLayer.setVisible(!osmLayer.getVisible());\r\n        //      satLayer.setVisible(!satLayer.getVisible());\r\n        //\r\n        //      if (osmLayer.getVisible()){\r\n        //          $(this).css('background', aerialCss);\r\n        //      } else {\r\n        //          $(this).css('background', osmCss);\r\n        //      }\r\n        //  });\r\n    }\r\n    if (options.zoom < 0 || options.zoom > 28) {\r\n        throw 'zoom out of range';\r\n    }\r\n    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n        var p = new ol.geom.Point([options.center.x, options.center.y]);\r\n        new ol.proj.Projection({ code: \"EPSG:4326\" });\r\n        p.transform(new ol.proj.Projection({ code: \"EPSG:4326\" }), new ol.proj.Projection({ code: \"EPSG:3857\" }));\r\n        var coordinates = p.getCoordinates();\r\n        options.center.x = coordinates[0];\r\n        options.center.y = coordinates[1];\r\n    }\r\n    var controls = ol.control.defaults({\r\n        attributionOptions: { collapsible: false }\r\n    });\r\n    var view = new ol.View({\r\n        center: [options.center.x, options.center.y],\r\n        zoom: options.zoom,\r\n        minZoom: options.minZoom,\r\n        maxZoom: options.maxZoom\r\n    });\r\n    var map = new ol.Map({\r\n        layers: [osmLayer],\r\n        target: options.divId,\r\n        controls: controls,\r\n        view: view\r\n    });\r\n    if (options.fullScreen) {\r\n        map.addControl(new ol.control.FullScreen({}));\r\n    }\r\n    if (options.addGeocode) {\r\n        new geocode_1.Geocode(document.getElementById(options.divId), map);\r\n    }\r\n    return map;\r\n}\r\nexports.quickMapBase = quickMapBase;\r\nnm.quickMapBase = quickMapBase;\r\nexports.default = quickMapBase;\r\n\n\n/***/ }),\n\n/***/ 17:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/14/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('olHelpers.zoomResolutionConvert');\r\nvar _zoomResLookup = [\r\n    156543.03392804097,\r\n    78271.51696402048,\r\n    39135.75848201024,\r\n    19567.87924100512,\r\n    9783.93962050256,\r\n    4891.96981025128,\r\n    2445.98490512564,\r\n    1222.99245256282,\r\n    611.49622628141,\r\n    305.748113140705,\r\n    152.8740565703525,\r\n    76.43702828517625,\r\n    38.21851414258813,\r\n    19.109257071294063,\r\n    9.554628535647032,\r\n    4.777314267823516,\r\n    2.388657133911758,\r\n    1.194328566955879,\r\n    0.5971642834779395,\r\n    0.29858214173896974,\r\n    0.14929107086948487,\r\n    0.07464553543474244,\r\n    0.03732276771737122,\r\n    0.01866138385868561,\r\n    0.009330691929342804,\r\n    0.004665345964671402,\r\n    0.002332672982335701,\r\n    0.0011663364911678506,\r\n    0.0005831682455839253 //28\r\n];\r\n/**\r\n * Get the resolution given the zoom level\r\n * @param {number} zoomLevel - the zoom level\r\n * @returns {number|*} the map resolution\r\n */\r\nfunction zoomToResolution(zoomLevel) {\r\n    \"use strict\";\r\n    if (typeof zoomLevel == 'number') {\r\n        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n            return _zoomResLookup[zoomLevel];\r\n        }\r\n        else {\r\n            console.log(\"invalid zoom level provided: \" + zoomLevel);\r\n            return undefined;\r\n        }\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexports.zoomToResolution = zoomToResolution;\r\nnm.zoomToResolution = zoomToResolution;\r\n/**\r\n * Get resolution from the zoom level\r\n * @param {number} resolution - the resolution\r\n * @returns {number|*} the zoom level\r\n */\r\nfunction resolutionToZoom(resolution) {\r\n    for (var i = 0; i < _zoomResLookup.length; i++) {\r\n        if (resolution >= _zoomResLookup[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return 0;\r\n}\r\nexports.resolutionToZoom = resolutionToZoom;\r\nnm.resolutionToZoom = resolutionToZoom;\r\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports) {\n\nmodule.exports = ol;\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 12/7/2015.\r\n */\r\nvar LayerBase_1 = __webpack_require__(10);\r\nvar esriToOl = __webpack_require__(27);\r\nvar mapPopup_1 = __webpack_require__(4);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * Helper to return the url to the service on the production server\r\n * @param {string} folder\r\n * @param {string} service\r\n * @returns {string}\r\n */\r\nfunction makeServiceUrl(folder, service) {\r\n    return \"https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/\" + folder + \"/\" + service + \"/MapServer\";\r\n}\r\nexports.makeServiceUrl = makeServiceUrl;\r\nfunction localCacheUrl(folder, service) {\r\n    var loc = window.location.href;\r\n    var url = \"/mapserver/\" + folder + \"/\" + service;\r\n    if (loc.indexOf('transportal.cee.wisc.edu') > -1) {\r\n        if (loc.toLowerCase().indexOf('webmapsstage') > -1) {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmapsstage' + url;\r\n        }\r\n        else {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmaps' + url;\r\n        }\r\n    }\r\n    return url;\r\n}\r\nexports.localCacheUrl = localCacheUrl;\r\n/**\r\n * esri mapserver layer\r\n * @augments LayerBase\r\n */\r\nvar LayerEsriMapServer = (function (_super) {\r\n    __extends(LayerEsriMapServer, _super);\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - resource url\r\n     * @param {object} [options] - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n     */\r\n    function LayerEsriMapServer(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, url, options) || this;\r\n        _this._source = new ol.source.TileArcGISRest({\r\n            url: _this.url == '' ? undefined : _this.url,\r\n            params: typeof options.showLayers == 'undefined' ? undefined : { layers: 'show:' + options.showLayers.join(',') }\r\n        });\r\n        _this._showLayers = options.showLayers || [];\r\n        _this._olLayer = new ol.layer.Tile({\r\n            source: _this._source,\r\n            visible: _this.visible,\r\n            opacity: _this.opacity,\r\n            minResolution: _this._minResolution,\r\n            maxResolution: _this._maxResolution\r\n        });\r\n        _this._olLayer.setZIndex(_this._zIndex);\r\n        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n        _this._esriFormat = new ol.format.EsriJSON();\r\n        _this._popupRequest = null;\r\n        options.getLegend = typeof options.getLegend === 'boolean' ? options.getLegend : true;\r\n        if (options.getLegend) {\r\n            _this.addLegendContent();\r\n        }\r\n        if (options.addPopup) {\r\n            mapPopup_1.default.addMapServicePopup(_this);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=''] additional content for legend\r\n     */\r\n    LayerEsriMapServer.prototype.addLegendContent = function (additionalContent) {\r\n        var _this = this;\r\n        var urlCopy = this.url;\r\n        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n            urlCopy += '/';\r\n        }\r\n        urlCopy += 'legend?f=pjson&callback=?';\r\n        $.get(urlCopy, {}, function (d) {\r\n            var newHtml = esriToOl.makeMapServiceLegend(d, _this._showLayers);\r\n            _super.prototype.addLegendContent.call(_this, newHtml);\r\n        }, 'json');\r\n    };\r\n    LayerEsriMapServer.prototype.getPopupInfo = function (queryParams) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        var urlCopy = this.url;\r\n        if (urlCopy[urlCopy.length - 1] != '/') {\r\n            urlCopy += '/';\r\n        }\r\n        urlCopy += 'identify?callback=?';\r\n        var __this = this;\r\n        if (this._popupRequest != null) {\r\n            this._popupRequest.abort();\r\n        }\r\n        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n            for (var _i = 0, _a = d['results']; _i < _a.length; _i++) {\r\n                var r = _a[_i];\r\n                var popupHtml = '<table class=\"esri-popup-table\">';\r\n                for (var a in r['attributes']) {\r\n                    if (r['attributes'].hasOwnProperty(a)) {\r\n                        var attrVal = r['attributes'][a];\r\n                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n                            continue;\r\n                        }\r\n                        var attr = a;\r\n                        if (attr.length > 14) {\r\n                            attr = attr.slice(0, 11) + '...';\r\n                        }\r\n                        popupHtml += \"<tr><td>\" + attr + \"</td><td>\" + attrVal + \"</td></tr>\";\r\n                    }\r\n                }\r\n                popupHtml += '</table>';\r\n                mapPopup_1.default.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n            }\r\n        }, 'json');\r\n        this._popupRequest.always(function () {\r\n            __this._popupRequest = null;\r\n        });\r\n    };\r\n    Object.defineProperty(LayerEsriMapServer.prototype, \"source\", {\r\n        /**\r\n         *\r\n         * @returns {ol.source.TileArcGISRest} the vector source\r\n         */\r\n        get: function () {\r\n            return _super.prototype.getSource.call(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerEsriMapServer.prototype, \"olLayer\", {\r\n        /**\r\n         *\r\n         * @returns the ol layer\r\n         */\r\n        get: function () {\r\n            return _super.prototype.getOlLayer.call(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LayerEsriMapServer;\r\n}(LayerBase_1.LayerBase));\r\nexports.LayerEsriMapServer = LayerEsriMapServer;\r\nnm.LayerEsriMapServer = LayerEsriMapServer;\r\nexports.default = LayerEsriMapServer;\r\n\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 1/4/2016.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar nm = provide_1.default('olHelpers.esriToOlStyle');\r\n/**\r\n *\r\n * @param {Array<number>} colorArray - input color array\r\n * @param {number} opacity - the opacity 0 to 1\r\n * @returns {string} rgba string\r\n * @private\r\n */\r\nfunction _colorArrayToRgba(colorArray, opacity) {\r\n    \"use strict\";\r\n    return \"rgba(\" + colorArray[0] + \",\" + colorArray[1] + \",\" + colorArray[2] + \",\" + opacity + \")\";\r\n}\r\n/**\r\n * escape html charcters\r\n * @param {string} str - input string\r\n * @returns {string} escaped string\r\n */\r\nfunction htmlEscape(str) {\r\n    return String(str)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#39;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;');\r\n}\r\nnm.htmlEscape = htmlEscape;\r\nvar CommonSymbol = (function () {\r\n    /**\r\n     *\r\n     * @param symbolObj\r\n     * @param {number} opacity\r\n     */\r\n    function CommonSymbol(symbolObj, opacity) {\r\n        this.symbolObj = symbolObj;\r\n        this.opacity = opacity;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n    return CommonSymbol;\r\n}());\r\nvar PointSymbol = (function (_super) {\r\n    __extends(PointSymbol, _super);\r\n    function PointSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj.type) {\r\n            case 'esriSMS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n                var outlineWidth = _this.symbolObj.outline.width;\r\n                var radius = _this.symbolObj.size;\r\n                _this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        fill: new ol.style.Fill({\r\n                            color: innerColor\r\n                        }),\r\n                        stroke: new ol.style.Stroke({ color: outerColor, width: outlineWidth })\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" style=\\\"color: \" + innerColor + \"\\\">&#9679;</span>\";\r\n                break;\r\n            case 'esriPMS':\r\n                _this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Icon({ src: \"data:image/png;base64,\" + _this.symbolObj['imageData'] })\r\n                });\r\n                _this.legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + _this.symbolObj['imageData'] + \"\\\">\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Point symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return PointSymbol;\r\n}(CommonSymbol));\r\nvar LineSymbol = (function (_super) {\r\n    __extends(LineSymbol, _super);\r\n    function LineSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj.type) {\r\n            case 'esriSLS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var lineWidth = _this.symbolObj.width;\r\n                _this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: innerColor,\r\n                        //lineDash: [4],\r\n                        width: lineWidth\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n                _this.legendHtml += \"style=\\\"\";\r\n                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n                _this.legendHtml += \"width: 40px;\";\r\n                _this.legendHtml += \"height: 4px;\";\r\n                _this.legendHtml += \"position: relative;\";\r\n                _this.legendHtml += \"display: inline-block;\";\r\n                _this.legendHtml += \"top: -1px;\";\r\n                _this.legendHtml += \"\\\"></span>\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Line symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return LineSymbol;\r\n}(CommonSymbol));\r\nvar PolygonSymbol = (function (_super) {\r\n    __extends(PolygonSymbol, _super);\r\n    function PolygonSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj['type']) {\r\n            case 'esriSFS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n                var outlineWidth = _this.symbolObj.outline.width;\r\n                _this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: outerColor,\r\n                        //lineDash: [4],\r\n                        width: outlineWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: innerColor\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n                _this.legendHtml += \"style=\\\"\";\r\n                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n                _this.legendHtml += \"border: solid \" + outerColor + \" 1px;\";\r\n                _this.legendHtml += \"width: 40px;\";\r\n                _this.legendHtml += \"height: 9px;\";\r\n                _this.legendHtml += \"position: relative;\";\r\n                _this.legendHtml += \"display: inline-block;\";\r\n                _this.legendHtml += \"top: 2px;\";\r\n                _this.legendHtml += \"\\\"></span>\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Polygon symbol does handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return PolygonSymbol;\r\n}(CommonSymbol));\r\nvar SymbolGenerator = (function () {\r\n    function SymbolGenerator(esriResponse) {\r\n        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n        this.renderer = esriResponse.drawingInfo.renderer;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n    return SymbolGenerator;\r\n}());\r\nvar SingleSymbol = (function (_super) {\r\n    __extends(SingleSymbol, _super);\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the symbol class to use\r\n     */\r\n    function SingleSymbol(esriResponse, SymbolClass) {\r\n        var _this = _super.call(this, esriResponse) || this;\r\n        _this.symbol = _this.renderer.symbol;\r\n        var symbolObj = new SymbolClass(_this.symbol, _this.opacity);\r\n        _this.olStyle = symbolObj.olStyle;\r\n        _this.legendHtml = symbolObj.legendHtml;\r\n        return _this;\r\n    }\r\n    return SingleSymbol;\r\n}(SymbolGenerator));\r\nvar UniqueValueSymbol = (function (_super) {\r\n    __extends(UniqueValueSymbol, _super);\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the Symbol class definition\r\n     */\r\n    function UniqueValueSymbol(esriResponse, SymbolClass) {\r\n        var _this = _super.call(this, esriResponse) || this;\r\n        _this.uniqueValueInfos = _this.renderer.uniqueValueInfos;\r\n        _this.propertyName = _this.renderer.field1;\r\n        _this.defaultSymbol = _this.renderer.defaultSymbol;\r\n        if (_this.defaultSymbol) {\r\n            var symbolObj = new SymbolClass(_this.defaultSymbol, _this.opacity);\r\n            _this.defaultStyle = symbolObj.olStyle;\r\n            _this.defaultLabelHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(_this.renderer['defaultLabel']) + \"</span>\" + symbolObj.legendHtml;\r\n        }\r\n        else {\r\n            _this.defaultStyle = undefined;\r\n            _this.defaultLabelHtml = 'other';\r\n        }\r\n        _this.valueArray = [];\r\n        _this.labelArray = [];\r\n        _this.legendArray = [];\r\n        _this.propertyStyleLookup = {};\r\n        for (var _i = 0, _a = _this.uniqueValueInfos; _i < _a.length; _i++) {\r\n            var uniqueVal = _a[_i];\r\n            _this.labelArray.push(uniqueVal['label']);\r\n            _this.valueArray.push(uniqueVal['value']);\r\n            var uniqueSym = new SymbolClass(uniqueVal.symbol, _this.opacity);\r\n            _this.legendArray.push(\"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(uniqueVal['label']) + \"</span>\" + uniqueSym.legendHtml);\r\n            _this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n        }\r\n        _this.olStyle = function (feature) {\r\n            var checkProperties = feature.getProperties();\r\n            var checkProperty = checkProperties[_this.propertyName];\r\n            if (_this.propertyStyleLookup[checkProperty] !== undefined) {\r\n                return [_this.propertyStyleLookup[checkProperty]];\r\n            }\r\n            else {\r\n                return [_this.defaultStyle];\r\n            }\r\n        };\r\n        if (_this.defaultLabelHtml !== null) {\r\n            _this.legendArray.push(_this.defaultLabelHtml);\r\n        }\r\n        _this.legendHtml = '<ul>';\r\n        for (var _b = 0, _c = _this.legendArray; _b < _c.length; _b++) {\r\n            var h = _c[_b];\r\n            _this.legendHtml += \"<li>\" + h + \"</li>\";\r\n        }\r\n        _this.legendHtml += '</ul>';\r\n        return _this;\r\n    }\r\n    return UniqueValueSymbol;\r\n}(SymbolGenerator));\r\nfunction makeFeatureServiceLegendAndSymbol(esriResponse) {\r\n    \"use strict\";\r\n    var renderer = esriResponse.drawingInfo.renderer;\r\n    var symbolLegendOut = null;\r\n    switch (renderer.type) {\r\n        case 'simple':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse.geometryType + ' not handled');\r\n            }\r\n            break;\r\n        case 'uniqueValue':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse['geometryType'] + ' not handled');\r\n            }\r\n            break;\r\n        default:\r\n            alert('not handled renderer type: ' + renderer['type']);\r\n    }\r\n    if (symbolLegendOut == null) {\r\n        return { style: undefined, legend: '' };\r\n    }\r\n    else {\r\n        return { style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml };\r\n    }\r\n}\r\nexports.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\nnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n/**\r\n *\r\n * @param {object} lyrObject - the layer as defined in the response\r\n * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n * @returns {string} legend html\r\n */\r\nfunction mapServiceLegendItem(lyrObject, skipLayerNameAndExpander) {\r\n    if (skipLayerNameAndExpander === void 0) { skipLayerNameAndExpander = false; }\r\n    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n    var layerName = lyrObject['layerName'];\r\n    var legendItems = lyrObject['legend'];\r\n    var legendHtml = '';\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\";\r\n    }\r\n    if (legendItems.length == 1) {\r\n        legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[0]['imageData'] + \"\\\">\";\r\n    }\r\n    else {\r\n        if (!skipLayerNameAndExpander) {\r\n            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n        }\r\n        legendHtml += '<ul>';\r\n        for (var i = 0; i < legendItems.length; i++) {\r\n            legendHtml += \"<li>\";\r\n            legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(legendItems[i]['label']) + \"</span>\";\r\n            legendHtml += \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[i]['imageData'] + \"\\\">\";\r\n            legendHtml += \"</li>\";\r\n        }\r\n        legendHtml += '</ul>';\r\n    }\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\" + legendHtml;\r\n    }\r\n    return legendHtml;\r\n}\r\n/**\r\n * make map service legent\r\n * @param {object} esriResponse - layer info\r\n * @param  showLayers - limited number of layers to show in map service\r\n * @returns {string} legend content\r\n */\r\nfunction makeMapServiceLegend(esriResponse, showLayers) {\r\n    \"use strict\";\r\n    if (showLayers === void 0) { showLayers = []; }\r\n    var newLegendHtml = '';\r\n    var layers = esriResponse['layers'];\r\n    if (layers.length == 1) {\r\n        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n    }\r\n    else {\r\n        newLegendHtml += '<ul>';\r\n        for (var i = 0; i < layers.length; i++) {\r\n            if (showLayers.length > 0 && showLayers.indexOf(i) < 0) {\r\n                continue;\r\n            }\r\n            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n        }\r\n        newLegendHtml += '</ul>';\r\n    }\r\n    return newLegendHtml;\r\n}\r\nexports.makeMapServiceLegend = makeMapServiceLegend;\r\nnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util');\r\n/**\r\n * guids are used to uniquely identify groups and features\r\n * @returns {string} a new guid\r\n */\r\nfunction makeGuid() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n        .replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\nexports.makeGuid = makeGuid;\r\nnm.makeGuid = makeGuid;\r\nexports.default = makeGuid;\r\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapPopupCls_1 = __webpack_require__(13);\r\n/**\r\n * The single popup object catch is that it is common to multimap pages\r\n * @type {MapPopupCls}\r\n */\r\nexports.mapPopup = new mapPopupCls_1.default();\r\nexports.default = exports.mapPopup;\r\n\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/16/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar makeGuid_1 = __webpack_require__(3);\r\nvar mapMove_1 = __webpack_require__(7);\r\nvar nm = provide_1.default('collections');\r\nvar $ = __webpack_require__(1);\r\nvar LayerGroup = (function () {\r\n    /**\r\n     *\r\n     * @param {object} [groupConfig={}] - group configuration object\r\n     * @param {string} groupConfig.groupName - the group name\r\n     * @param {boolean} [groupConfig.collapse=false] - if the group should be collapsed initially\r\n     * @param {boolean} [groupConfig.addCheck=true] - if the group should have a checkbox controlling visibility of all layers\r\n     * @param {LayerGroup} [parent=undefined] - the parent group\r\n     */\r\n    function LayerGroup(groupConfig, parent) {\r\n        this.groupLayers = [];\r\n        this.groupLayersLookup = {};\r\n        this.groupGroups = [];\r\n        this.groupGroupsLookup = {};\r\n        this.itemIdArray = [];\r\n        if (typeof groupConfig == 'undefined') {\r\n            this.parent = null;\r\n            this.groupId = 'root';\r\n            this.groupName = 'root';\r\n            this.allGroupLookup = { root: this };\r\n            this.allGroupArray = [this];\r\n            this.allLayerArray = [];\r\n            this.allLayerLookup = {};\r\n            this.layerParentLookup = {};\r\n            this.collapse = false;\r\n            this.addCheck = false;\r\n        }\r\n        else {\r\n            this.groupId = makeGuid_1.default();\r\n            this.parent = parent;\r\n            this.groupName = groupConfig.groupName;\r\n            this.collapse = typeof groupConfig.collapse == 'boolean' ? groupConfig.collapse : false;\r\n            this.addCheck = typeof groupConfig.addCheck == 'boolean' ? groupConfig.addCheck : true;\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param {object} groupConfig - configuration object\r\n     * @param {string} groupConfig.groupName - the group name\r\n     * @param {boolean} groupConfig.collapse if the group should be collapsed initially\r\n     * @param {boolean} groupConfig.addCheck if the group should have a checkbox controlling visibility of all layers\r\n     * @param {Array<LayerGroup>} parents parent groups\r\n     * @returns {LayerGroup} the layer group just added\r\n     */\r\n    LayerGroup.prototype.addGroup = function (groupConfig, parents) {\r\n        var parent;\r\n        if (parents.length > 0) {\r\n            parent = parents[parents.length - 1];\r\n        }\r\n        else {\r\n            parent = 'root';\r\n        }\r\n        /**\r\n         * @type {LayerGroup}\r\n         */\r\n        var parentGroup = this.allGroupLookup[parent];\r\n        var newGroup = new LayerGroup(groupConfig, parentGroup);\r\n        this.allGroupLookup[newGroup.groupId] = newGroup;\r\n        this.allGroupArray.push(newGroup);\r\n        parentGroup.groupGroups.push(newGroup);\r\n        parentGroup.groupGroupsLookup[newGroup.groupId] = newGroup;\r\n        if (parentGroup.itemIdArray.indexOf(newGroup.groupId) > 0) {\r\n            console.log(newGroup.groupId);\r\n            throw 'layer and group ids must be unique';\r\n        }\r\n        parentGroup.itemIdArray.push(newGroup.groupId);\r\n        return newGroup;\r\n    };\r\n    /**\r\n     *\r\n     * @param {LayerBase} newLayer the layer to be added\r\n     * @param {Array} parents array\r\n     */\r\n    LayerGroup.prototype.addLegendLayer = function (newLayer, parents) {\r\n        var parent;\r\n        if (parents.length > 0) {\r\n            parent = parents[parents.length - 1];\r\n        }\r\n        else {\r\n            parent = 'root';\r\n        }\r\n        this.allLayerLookup[newLayer.id] = newLayer;\r\n        this.allLayerArray.push(newLayer);\r\n        /**\r\n         * @type {LayerGroup}\r\n         */\r\n        var parentGroup = this.allGroupLookup[parent];\r\n        parentGroup.groupLayers.push(newLayer);\r\n        parentGroup.groupLayersLookup[newLayer.id] = newLayer;\r\n        if (parentGroup.itemIdArray.indexOf(newLayer.id) > 0) {\r\n            console.log(newLayer.id);\r\n            throw 'layer and group ids must be unique';\r\n        }\r\n        parentGroup.itemIdArray.push(newLayer.id);\r\n        this.layerParentLookup[newLayer.id] = parentGroup;\r\n    };\r\n    LayerGroup.prototype.getLegendHtml = function (legendId, options) {\r\n        var legendHtml = \"<ul id=\\\"\" + legendId + \"\\\" class=\\\"legend-container\\\">\";\r\n        legendHtml += \"<li>\" + options.legendTitle + \"<input type=\\\"checkbox\\\" checked id=\\\"suppress-by-extent-\" + legendId + \"\\\" class=\\\"suppress-by-extent\\\">\" +\r\n            (\"<label title=\\\"Suppress layers not visible at this zoom level\\\" for=\\\"suppress-by-extent-\" + legendId + \"\\\">\") +\r\n            \"<span></span>\" +\r\n            \"</label></li>\";\r\n        legendHtml += this._buildLegend(this.itemIdArray, this, options.layerDivClasses) + '</ul>';\r\n        return legendHtml;\r\n    };\r\n    /**\r\n     * @param {Array} itemIds the items to process\r\n     * @param {LayerGroup} theGroup new group\r\n     * @param {Array} [layerDivClasses=[]] optional classes to apply to the layer divs\r\n     * @static\r\n     * @returns {string} html string\r\n     */\r\n    LayerGroup.prototype._buildLegend = function (itemIds, theGroup, layerDivClasses) {\r\n        if (itemIds.length == 0) {\r\n            return '';\r\n        }\r\n        var theHml = '';\r\n        var itemId = itemIds[0];\r\n        if (theGroup.groupLayersLookup[itemId]) {\r\n            /**\r\n             * @type {LayerBase}\r\n             */\r\n            var lyr = theGroup.groupLayersLookup[itemId];\r\n            theHml += \"<li id=\\\"\" + lyr.id + \"-layer-li\\\" class=\\\"legend-layer-li \" + layerDivClasses.join(' ') + \"\\\">\" + lyr.getLegendDiv() + '</li>';\r\n        }\r\n        else if (theGroup.groupGroupsLookup[itemId]) {\r\n            /**\r\n             * type {LayerGroup}\r\n             */\r\n            var otherGroup = theGroup.groupGroupsLookup[itemId];\r\n            theHml += \"<li>\";\r\n            theHml += \"<div id=\\\"\" + otherGroup.groupId + \"-legend-layer-div\\\" \" +\r\n                (\"class=\\\"legend-layer-group  \" + layerDivClasses.join(' ') + \"\\\">\");\r\n            if (otherGroup.addCheck) {\r\n                theHml += \"<input type=\\\"checkbox\\\" checked id=\\\"\" + otherGroup.groupId + \"-group-chck\\\">\" +\r\n                    (\"<label for=\\\"\" + otherGroup.groupId + \"-group-chck\\\" title=\\\"Click arrow to expand or collapse\\\">\" + otherGroup.groupName + \"</label>\");\r\n            }\r\n            else {\r\n                theHml += \"<label title=\\\"Click arrow to expand or collapse\\\">\" + otherGroup.groupName + \"</label>\";\r\n            }\r\n            theHml += \"<span title=\\\"Expand/Collapse\\\" class=\\\"layer-group-expander\";\r\n            theHml += (otherGroup.collapse ? ' legend-layer-group-initial-collapse' : '') + \"\\\">\";\r\n            theHml += otherGroup.collapse ? '&#9654;' : '&#9660;';\r\n            theHml += '</span>';\r\n            //parents.push(groupId);\r\n            theHml += '<ul>' + this._buildLegend(otherGroup.itemIdArray, otherGroup, layerDivClasses) + '</ul>';\r\n            theHml += '</div>';\r\n            theHml += '</li>';\r\n        }\r\n        return theHml + this._buildLegend(itemIds.slice(1), theGroup, layerDivClasses);\r\n    };\r\n    return LayerGroup;\r\n}());\r\n/**\r\n * a wrapper to make a legend\r\n */\r\nvar LayerLegend = (function () {\r\n    /**``\r\n     *\r\n     * @param {Array} legendItems array of layers or objects with {groupName:  {string}, collapse: {boolean}, addCheck: {boolean}, items: {Array}}\r\n     * @param {string} divId the div where the legend should be added\r\n     * @param {object} options for legend\r\n     * @param {Array} [options.layerDivClasses=[]] optional array of classes to be applied to the layer legend divs for custom styling\r\n     * @param {string} [options.legendTitle=Legend] the legend title\r\n     * @param {boolean} [options.scaleDependent=true] if legend display is scale dependent\r\n     */\r\n    function LayerLegend(legendItems, divId, options) {\r\n        if (options === void 0) { options = {}; }\r\n        for (var _i = 0, legendItems_1 = legendItems; _i < legendItems_1.length; _i++) {\r\n            var i = legendItems_1[_i];\r\n            if (typeof i == 'undefined') {\r\n                throw 'undefined item passed in array to legend constructor';\r\n            }\r\n        }\r\n        options.legendTitle = typeof options.legendTitle == 'string' ? options.legendTitle : 'Legend';\r\n        options.scaleDependent = typeof options.scaleDependent == 'boolean' ? options.scaleDependent : true;\r\n        options.layerDivClasses = options.layerDivClasses || [];\r\n        // if legend display is scale dependent, make sure the mapMove object is initialized first\r\n        if (options.scaleDependent) {\r\n            mapMove_1.default.checkInit();\r\n        }\r\n        this.$divElement = $('#' + divId);\r\n        this._legendItems = legendItems;\r\n        this.layerGroup = new LayerGroup();\r\n        this._buildTree(legendItems);\r\n        this.legendId = makeGuid_1.default();\r\n        this.$divElement.append(this.layerGroup.getLegendHtml(this.legendId, options));\r\n        for (var _a = 0, _b = this.layerGroup.allLayerArray; _a < _b.length; _a++) {\r\n            var l = _b[_a];\r\n            l.applyCollapse();\r\n        }\r\n        var _this = this;\r\n        //// if legend display is scale dependent, make sure the mapMove object is initialized first\r\n        if (options.scaleDependent) {\r\n            mapMove_1.default.checkInit();\r\n            mapMove_1.default.addCallback(function (ext, zoom, evt) {\r\n                if (typeof evt == 'undefined' || evt == 'change:resolution') {\r\n                    for (var _i = 0, _a = this.layerGroup.allLayerArray; _i < _a.length; _i++) {\r\n                        var lyr = _a[_i];\r\n                        var $lyrLi = $('#' + lyr.id + '-layer-li');\r\n                        if (zoom > lyr.maxZoom || zoom < lyr.minZoom) {\r\n                            $lyrLi.addClass('layer-not-visible');\r\n                        }\r\n                        else {\r\n                            $lyrLi.removeClass('layer-not-visible');\r\n                        }\r\n                    }\r\n                }\r\n            }, this, 100, true, 'legend1');\r\n        }\r\n        // <editor-fold desc=\"add event listeners\">\r\n        this.$divElement.find(\".suppress-by-extent\").change(function () {\r\n            var legendLayerLis = $('.legend-layer-li');\r\n            if (this.checked) {\r\n                legendLayerLis.removeClass('layer-force-show');\r\n            }\r\n            else {\r\n                legendLayerLis.addClass('layer-force-show');\r\n            }\r\n        });\r\n        this.$divElement.find('.legend-check').change(function () {\r\n            var lyrId = this.id.replace('-legend-layer-check', '');\r\n            _this.layerGroup.allLayerLookup[lyrId].visible = this.checked;\r\n        });\r\n        this.$divElement.find('.legend-layer-group > input[type=checkbox]').change(function () {\r\n            $(this).siblings('ul').find('input[type=checkbox]').prop('checked', this.checked).trigger('change');\r\n        });\r\n        this.$divElement.find('.layer-group-expander').click(function () {\r\n            var $this = $(this);\r\n            $this.removeClass('legend-layer-group-initial-collapse');\r\n            $this.siblings('ul').slideToggle();\r\n            if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                $this.removeClass('legend-layer-group-collapsed');\r\n                $this.html('&#9660;');\r\n            }\r\n            else {\r\n                $this.addClass('legend-layer-group-collapsed');\r\n                $this.html('&#9654;');\r\n            }\r\n        });\r\n        this.$divElement.find('.legend-layer-group-initial-collapse').trigger('click');\r\n        // </editor-fold>\r\n    }\r\n    /**\r\n     * @param {Array} [legendItems=this._layerConfig] the legend items\r\n     * @param {Array} [parents=[]] the ordered list of groups in which this item is a member\r\n     * @private\r\n     */\r\n    LayerLegend.prototype._buildTree = function (legendItems, parents) {\r\n        if (legendItems.length == 0) {\r\n            return;\r\n        }\r\n        var oneItem = legendItems[0];\r\n        //reset the parent if the item is in the base array\r\n        if (this._legendItems.indexOf(oneItem) > -1 || typeof parents == 'undefined') {\r\n            parents = [];\r\n        }\r\n        if (typeof oneItem.groupName !== 'undefined') {\r\n            var groupItem = legendItems[0];\r\n            var newGroup = this.layerGroup.addGroup(groupItem, parents);\r\n            parents.push(newGroup.groupId);\r\n            this._buildTree(oneItem.items, parents);\r\n        }\r\n        else {\r\n            /**\r\n             * @type {LayerBase}\r\n             */\r\n            var layerItem = legendItems[0];\r\n            this.layerGroup.addLegendLayer(layerItem, parents);\r\n        }\r\n        this._buildTree(legendItems.slice(1), parents);\r\n    };\r\n    return LayerLegend;\r\n}());\r\nexports.LayerLegend = LayerLegend;\r\nnm.LayerLegend = LayerLegend;\r\nexports.default = LayerLegend;\r\n\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 12/8/2015.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * base interaction\r\n */\r\nvar MapInteractionBase = (function () {\r\n    /**\r\n     * map interaction base\r\n     * @param subtype - the interaction subtype\r\n     */\r\n    function MapInteractionBase(subtype) {\r\n        this._map = null;\r\n        this._initialized = false;\r\n        this._subtype = subtype;\r\n    }\r\n    /**\r\n     * base initializer, returns true for already initialized\r\n     * @param theMap - the ol Map\r\n     * @returns true for already initialized\r\n     */\r\n    MapInteractionBase.prototype.init = function (theMap) {\r\n        if (!this._initialized) {\r\n            this._map = theMap;\r\n            this._initialized = true;\r\n        }\r\n    };\r\n    Object.defineProperty(MapInteractionBase.prototype, \"map\", {\r\n        /**\r\n         * get reference to the ol map object\r\n         * @returns {ol.Map} the map object\r\n         */\r\n        get: function () {\r\n            return this._map;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MapInteractionBase.prototype, \"initialized\", {\r\n        /**\r\n         * get if is initialized\r\n         * @returns {boolean} is initialized\r\n         */\r\n        get: function () {\r\n            return this._initialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     * @protected\r\n     */\r\n    MapInteractionBase.prototype._checkInit = function () {\r\n        if (!this.initialized) {\r\n            var msg = this._subtype + \" object not initialized\";\r\n            alert(msg);\r\n            console.log(msg);\r\n            throw msg;\r\n        }\r\n    };\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     */\r\n    MapInteractionBase.prototype.checkInit = function () {\r\n        this._checkInit();\r\n    };\r\n    return MapInteractionBase;\r\n}());\r\nexports.MapInteractionBase = MapInteractionBase;\r\nnm.MapInteractionBase = MapInteractionBase;\r\nexports.default = MapInteractionBase;\r\n\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar quickMapBase_1 = __webpack_require__(14);\r\nvar provide_1 = __webpack_require__(0);\r\nvar mapMove_1 = __webpack_require__(7);\r\nvar mapPopup_1 = __webpack_require__(4);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param {object} [options={}] config options\r\n * @param {string} [options.divId=map] map div id\r\n * @param {object} [options.center={}] center config object\r\n * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n * @param {number} [options.zoom=7] zoom level\r\n * @param {number} [options.minZoom=undefined] min zoom\r\n * @param {number} [options.maxZoom=undefined] max zoom\r\n * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n * @returns {ol.Map} the ol map\r\n */\r\nfunction quickMap(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var m = quickMapBase_1.quickMapBase(options);\r\n    mapMove_1.default.init(m);\r\n    mapPopup_1.default.init(m);\r\n    return m;\r\n}\r\nexports.quickMap = quickMap;\r\nnm.quickMap = quickMap;\r\nexports.default = quickMap;\r\n\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapMoveCls_1 = __webpack_require__(12);\r\n/**\r\n * The single map move object catch is that it is common to multimap pages\r\n * @type {MapMoveCls}\r\n */\r\nexports.mapMove = new mapMoveCls_1.default();\r\nexports.default = exports.mapMove;\r\n\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 9/23/2016.\r\n */\r\nvar quickMap_1 = __webpack_require__(6);\r\nvar LayerEsriMapServer_1 = __webpack_require__(25);\r\nvar LayerLegend_1 = __webpack_require__(46);\r\nvar map = quickMap_1.quickMap();\r\nvar wisDotRegions = new LayerEsriMapServer_1.LayerEsriMapServer('https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/Metamanager_regions/MapServer');\r\nvar sixYearPlan = new LayerEsriMapServer_1.LayerEsriMapServer('https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/SixYearPlan/MapServer', { name: 'Six Year Plan', legendCollapse: true });\r\nmap.addLayer(wisDotRegions.olLayer);\r\nmap.addLayer(sixYearPlan.olLayer);\r\nvar layerArray = [\r\n    wisDotRegions,\r\n    sixYearPlan\r\n    // tipConfig.tipSegmentLayer,\r\n    // tipConfig.metamanagerSegments,\r\n    // {\r\n    //     groupName: 'ITS Inventory Layers',\r\n    //     collapse: true,\r\n    //     addCheck: false,\r\n    //     items: tipConfig.itsLayerCollection.layers\r\n    // }\r\n];\r\nvar legend = new LayerLegend_1.default(layerArray, 'legend-container', {});\r\n\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 10/3/2016.\r\n */\r\nvar ol = __webpack_require__(2);\r\nexports.proj4326 = new ol.proj.Projection({ code: 'EPSG:4326' });\r\nexports.proj3857 = new ol.proj.Projection({ code: 'EPSG:3857' });\r\nexports.proj3070 = new ol.proj.Projection({ code: 'EPSG:3070' });\r\n\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util.checkDefined');\r\n/**\r\n * check if the input is undefined or null\r\n * @param input - input pointer\r\n * @returns true undefined or null\r\n */\r\nfunction undefinedOrNull(input) {\r\n    \"use strict\";\r\n    return (typeof input === 'undefined' || input === null);\r\n}\r\nexports.undefinedOrNull = undefinedOrNull;\r\nnm.undefinedOrNull = undefinedOrNull;\r\n/**\r\n * check if the input is defined and not null\r\n * @param input - input pointer\r\n * @returns true defined and not null\r\n */\r\nfunction definedAndNotNull(input) {\r\n    \"use strict\";\r\n    return !(undefinedOrNull(input));\r\n}\r\nexports.definedAndNotNull = definedAndNotNull;\r\nnm.definedAndNotNull = definedAndNotNull;\r\n\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// simple_map.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 77);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 99693f14fcb3e83c98ca","/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\ndeclare const window: Window;\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace: string){\r\n    \"use strict\";\r\n    if (typeof (<any>window).gv == 'undefined'){\r\n        (<any>window).gv = {};\r\n    }\r\n\r\n    let parts = namespace.split('.');\r\n    let nameSpace = (<any>window).gv;\r\n\r\n    for (let i=0; i< parts.length; i++){\r\n        let newObject = nameSpace[parts[i]];\r\n\r\n        if (typeof newObject == 'undefined'){\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n\r\n    return nameSpace;\r\n}\r\n\r\nprovide('util');\r\n(<any>window).gv.util.provide = provide;\r\n\r\nexport default provide;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/provide.ts","module.exports = $;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 1\n// module chunks = 0 1 2 4 5 6 7 8 9 10 11","import * as zoomResolutionConvert from '../olHelpers/zoomResolutionConvert';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport makeGuid from '../util/makeGuid';\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\nexport interface LayerBaseOptions{\r\n    id?: string;\r\n    name?: string;\r\n    opacity?: number;\r\n    visible?: boolean;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    params?: any;\r\n    zIndex?: number;\r\n    loadCallback?: Function;\r\n    legendCollapse?: boolean;\r\n    legendCheckbox?: boolean;\r\n    legendContent?: string;\r\n}\r\n\r\n\r\n/**\r\n * The base layer class\r\n * @abstract\r\n */\r\nexport abstract class LayerBase {\r\n\r\n    protected _legendCheckbox: boolean;\r\n    protected _url: string;\r\n    protected _opacity: number;\r\n    protected _minZoom: number;\r\n    protected _maxZoom: number;\r\n    protected _visible: boolean;\r\n    protected _loaded: boolean;\r\n    protected _zIndex: number;\r\n    protected _legendContent: string;\r\n    protected _params: any;\r\n    protected _id: string;\r\n    protected _name: string;\r\n    protected _source: ol.source.Source;\r\n    protected _animate: boolean;\r\n    protected _legendCollapse: boolean;\r\n    protected _maxResolution: number;\r\n    protected _minResolution: number;\r\n    protected  _$legendDiv: JQuery;\r\n    loadCallback: Function;\r\n    protected _olLayer: ol.layer.Layer;\r\n    protected _applyCollapseCalled: boolean;\r\n\r\n\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - url for source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id=makeGuid()] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] - the z index for the layer\r\n     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n     */\r\n    constructor(url: string, options: LayerBaseOptions = {}) {\r\n        options = options || {} as LayerBaseOptions;\r\n\r\n        if (typeof url !== 'string') {\r\n            throw 'Invalid URL';\r\n        }\r\n        this._url = url;\r\n\r\n\r\n        this._params = typeof options.params == 'object' ? options.params : {};\r\n        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n\r\n        this.id = options.id || makeGuid();\r\n        this._name = options.name || 'Unnamed Layer';\r\n        this.animate = false;\r\n        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1;\r\n        } else if (this._opacity < 0) {\r\n            this._opacity = 0;\r\n        }\r\n\r\n        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n\r\n        this._source = undefined;\r\n\r\n        /**\r\n         *\r\n         * @protected\r\n         */\r\n        this._olLayer = undefined;\r\n        this._loaded = false;\r\n\r\n        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n        if (typeof this._maxResolution !== 'undefined') {\r\n            this._maxResolution += 0.00001;\r\n        }\r\n        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n\r\n        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n\r\n        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n        };\r\n\r\n\r\n        this._legendContent = '';\r\n\r\n        if (this._legendCheckbox) {\r\n            this._legendContent += `<input type=\"checkbox\" ${this.visible ? 'checked' : ''} ` +\r\n                `class=\"legend-check\" id=\"${this.id}-legend-layer-check\"><span></span>`;\r\n            this._legendContent += `<label for=\"${this.id}-legend-layer-check\" class=\"legend-layer-name\">${this.name}</label>`;\r\n        } else {\r\n            this._legendContent += `<label class=\"legend-layer-name\">${this.name}</label>`;\r\n        }\r\n\r\n        this._$legendDiv = null;\r\n        this._applyCollapseCalled = false;\r\n        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n    }\r\n\r\n    /**\r\n     * base load function, sets _loaded = true if it is not already\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    _load() {\r\n        if (this.loaded == true) {\r\n            return true;\r\n        } else {\r\n            this._loaded = true;\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the legend html, be sure to only add to the DOM once\r\n     * @returns {string} html for layer wrapped in a div\r\n     */\r\n    getLegendDiv() {\r\n        return `<div class=\"legend-layer-div\" id=\"${this.id}-legend-layer-div\">${this._legendContent}</div>`;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param additionalContent - additional content to add to legend\r\n     * @private\r\n     */\r\n    _addLegendContent(additionalContent='') {\r\n\r\n        let addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n\r\n        if (addCollapse) {\r\n            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n        }\r\n\r\n        this._legendContent += additionalContent;\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n            this._$legendDiv.append(additionalContent);\r\n            this.applyCollapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=] - additonal content to add\r\n     */\r\n    addLegendContent(additionalContent: string) {\r\n        this._addLegendContent(additionalContent);\r\n    }\r\n\r\n    applyCollapse(): void {\r\n        if (this._applyCollapseCalled) {\r\n            console.log('collapse already applied');\r\n\r\n            return undefined;\r\n        }\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n\r\n            let $expander = this._$legendDiv.find('.legend-items-expander');\r\n\r\n            if ($expander.length > 0) {\r\n                this._applyCollapseCalled = true;\r\n\r\n                $expander.click(function () {\r\n                    let $this = $(this);\r\n\r\n                    $this.siblings('ul').slideToggle();\r\n\r\n                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                        $this.removeClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9660;');\r\n                    } else {\r\n                        $this.addClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9654;');\r\n                    }\r\n                });\r\n\r\n                if (this._legendCollapse) {\r\n                    $expander.trigger('click');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * trick to refresh the layer\r\n     */\r\n    refresh() {\r\n        if (this.source) {\r\n            this.source.refresh();\r\n        }\r\n    }\r\n\r\n    get id(): string{\r\n        return this._id;\r\n    }\r\n\r\n    set id(newId: string){\r\n        this._id = newId;\r\n    }\r\n\r\n    get animate(): boolean{\r\n        return this._animate;\r\n    }\r\n\r\n    set animate(animate: boolean){\r\n        this._animate = animate;\r\n    }\r\n\r\n    /**\r\n     * get the legend content\r\n     * @type {string}\r\n     */\r\n    get legendContent(): string {\r\n        return this._legendContent;\r\n    }\r\n\r\n    /**\r\n     * set the legend content directly\r\n     * @param {string} newVal - new content\r\n     * @protected\r\n     */\r\n    set legendContent(newVal: string) {\r\n        this._legendContent = newVal;\r\n    }\r\n\r\n    /**\r\n     * get the map get params\r\n     * @type {object}\r\n     */\r\n    get params(): {[s: string]: any} {\r\n        return this._params;\r\n    }\r\n\r\n    /**\r\n     * set the map get params\r\n     * @param {object} newParams - new get params\r\n     * @protected\r\n     */\r\n    set params(newParams: {[s: string]: any}) {\r\n        this._params = newParams;\r\n    }\r\n\r\n    /**\r\n     * get the minimum resolution\r\n     * @type {number|*}\r\n     */\r\n    get minResolution(): number {\r\n        return this._minResolution;\r\n    }\r\n\r\n    /**\r\n     * get the maximum resolution\r\n     * @type {number|*}\r\n     */\r\n    get maxResolution(): number {\r\n        return this._maxResolution;\r\n    }\r\n\r\n    /**\r\n     * get min zoom\r\n     * @type {number|*}\r\n     */\r\n    get minZoom(): number {\r\n        return this._minZoom;\r\n    }\r\n\r\n    /**\r\n     * get max zoom\r\n     * @type {number|*}\r\n     */\r\n    get maxZoom(): number {\r\n        return this._maxZoom;\r\n    }\r\n\r\n    /**\r\n     * get the url\r\n     * @type {string}\r\n     */\r\n    get url(): string {\r\n        return this._url;\r\n    }\r\n\r\n    /**\r\n     * Get the layer visibility\r\n     * @type {boolean}\r\n     */\r\n    get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    /**\r\n     * set the visibility\r\n     * @param visibility\r\n     */\r\n    set visible(visibility: boolean) {\r\n        this.setVisible(visibility);\r\n    }\r\n\r\n    protected setVisible(visibility: boolean) {\r\n        this._visible = visibility;\r\n        if (this.olLayer) {\r\n            this.olLayer.setVisible(this._visible);\r\n            if (visibility && !this._loaded) {\r\n                this._load();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Get the layer opacity\r\n     * @type {number}\r\n     */\r\n    get opacity(): number {\r\n        return this._opacity;\r\n    }\r\n\r\n    /**\r\n     * Set the layer opacity\r\n     * @param {number} opacity - layer opacity\r\n     */\r\n    set opacity(opacity: number) {\r\n        this._opacity = opacity;\r\n        if (this.olLayer) {\r\n            this.olLayer.setOpacity(this._opacity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the layer name\r\n     * @type {string}\r\n     */\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    /**\r\n     * set the layer name\r\n     * @param {string} newName - the new name\r\n     */\r\n    set name(newName: string) {\r\n        this._name = newName;\r\n    }\r\n\r\n    /**\r\n     * Check if the layer is loaded\r\n     * @type {boolean}\r\n     */\r\n    get loaded():boolean {\r\n        return this._loaded;\r\n    }\r\n\r\n    /**\r\n     * get the layer source\r\n     * @type {*}\r\n     */\r\n    get source(): ol.source.Source {\r\n        return this.getSource();\r\n    }\r\n\r\n\r\n    protected getSource(): ol.source.Source{\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * get the z index\r\n     */\r\n    get zIndex(): number {\r\n        return this._zIndex;\r\n    }\r\n\r\n    /**\r\n     * set the z index\r\n     */\r\n    set zIndex(newZ: number) {\r\n        this._zIndex = newZ;\r\n    }\r\n\r\n    protected setZIndex(newZ: number){\r\n\r\n    }\r\n\r\n    /**\r\n     * the the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Layer {\r\n        return this.getOlLayer();\r\n    }\r\n\r\n    protected getOlLayer(): ol.layer.Layer{\r\n        return this._olLayer;\r\n    }\r\n}\r\n\r\nnm.LayerBase = LayerBase;\r\nexport default LayerBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/LayerBase.ts","import $ = require('jquery')\r\nimport {makeGuid} from '../util/makeGuid';\r\nimport ol = require('custom-ol');\r\nimport {proj3857, proj4326} from './projections';\r\n\r\n\r\nlet invalidClass = 'geocoder-invalid';\r\nlet geocoderLoadingClass = 'geocoder-loading';\r\n\r\n// let testAddress = '65 7th Street, Prairie du Sac, WI';\r\n\r\n\r\nexport class Geocode {\r\n    private theButton: HTMLButtonElement;\r\n    private theInput: HTMLInputElement;\r\n    private map: ol.Map;\r\n    private indicationLayer;\r\n\r\n    constructor(mapDiv: HTMLDivElement, map: ol.Map) {\r\n        let inputGuid = makeGuid();\r\n        let buttonGuid = makeGuid();\r\n\r\n        this.map = map;\r\n        this.indicationLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: new ol.style.Style({\r\n                image: new ol.style.Circle({\r\n                    radius: 12,\r\n                    fill: new ol.style.Fill({color: 'rgba(255,0,0,0.5)'}),\r\n                    stroke: new ol.style.Stroke({color: 'red', width: 1})\r\n                })\r\n            })\r\n        });\r\n        this.map.addLayer(this.indicationLayer);\r\n\r\n        $(mapDiv).append('<div class=\"geocoder-el\">' +\r\n            `<input type=\"text\" id=\"${inputGuid}\">` +\r\n            `<button id=\"${buttonGuid}\">Search</button>` +\r\n            '</div>');\r\n\r\n        this.theButton = document.getElementById(buttonGuid) as HTMLButtonElement;\r\n        this.theInput = document.getElementById(inputGuid) as HTMLInputElement;\r\n\r\n        this.reset();\r\n\r\n        let $theButton = $(this.theButton);\r\n        let $theInput = $(this.theInput);\r\n\r\n        $theButton.click((evt) => {\r\n\r\n            evt.preventDefault();\r\n\r\n            $theButton.addClass(geocoderLoadingClass);\r\n            this.theButton.disabled = true;\r\n            this.indicationLayer.getSource().clear();\r\n\r\n            $.get(\r\n                `https://geocode.xyz/${this.theInput.value}?geoit=json`,\r\n                {},\r\n                (d) => {\r\n                    let lat = parseFloat(d['latt']);\r\n                    let lon = parseFloat(d['longt']);\r\n\r\n                    if ((lat == 0 && lon == 0) || d['error']) {\r\n                        $theInput.addClass(invalidClass);\r\n                        this.theInput.title = 'Specified Location Invalid';\r\n                        this.theButton.title = 'Specified Location Invalid';\r\n\r\n                    } else {\r\n                        let v = this.map.getView();\r\n                        let p = new ol.geom.Point([lon, lat]);\r\n                        let feat = new ol.Feature(p);\r\n                        this.indicationLayer.getSource().addFeature(feat);\r\n                        p.transform(proj4326, proj3857);\r\n\r\n                        v.setCenter(p.getCoordinates());\r\n                        v.setZoom(13);\r\n                    }\r\n\r\n                    $theButton.removeClass(geocoderLoadingClass);\r\n                    this.theButton.disabled = false;\r\n                },\r\n                'json');\r\n        });\r\n\r\n        $(this.theInput).keyup((evt) => {\r\n            evt.preventDefault();\r\n            this.theButton.disabled = this.theInput.value.length == 0;\r\n            $theInput.removeClass(invalidClass);\r\n            this.theInput.title = '';\r\n            this.theButton.title = '';\r\n\r\n            if (!this.theButton.disabled && evt.keyCode == 13) {\r\n                $theButton.click();\r\n            }\r\n        })\r\n    }\r\n\r\n    private reset() {\r\n        this.theButton.disabled = true;\r\n        this.theInput.value = '';\r\n    }\r\n\r\n\r\n// https://geocode.xyz/65%2075h%20street%20prairie%20du%20sac%20wi?geoit=json\r\n\r\n// error\r\n// geocoder-invalid\r\n\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/geocode.ts","import LayerBaseVector from \"../layers/LayerBaseVector\";\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport * as checkDefined from '../util/checkDefined';\r\nimport provide from '../util/provide';\r\nimport makeGuid from '../util/makeGuid';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\nexport interface extentObject{\r\n    minX: number;\r\n    minY: number;\r\n    maxX: number;\r\n    maxY: number;\r\n}\r\n\r\nexport interface mapMoveCallbackFunction{\r\n    /**\r\n     *\r\n     * @param extent extent as predefined object minX, minX, maxX, maxY\r\n     * @param zoomLevel current zoom level\r\n     * @param evtType the event type 'change:center', 'change:resolution'\r\n     */\r\n    (extent: extentObject, zoomLevel: number, evtType?: string): any\r\n}\r\n\r\n\r\n/**\r\n * assists with map move interactions, trigger callback functions\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapMoveCls extends MapInteractionBase {\r\n    _mapExtent: extentObject;\r\n    _zoomLevel: number;\r\n    _lookupLayer: {[s: string]: LayerBaseVector};\r\n    _arrLayer: Array<LayerBaseVector>;\r\n    _arrLyrTimeout: Array<number>;\r\n    _mapMoveCallbackTimeout: Array<number>;\r\n    _mapMoveCallbackDelays: Array<number>;\r\n    _mapMoveCallbacksLookup: {[s: string]: mapMoveCallbackFunction};\r\n    _mapMoveCallbackContext: Array<Object>;\r\n    _mapMoveCallbacks: Array<mapMoveCallbackFunction>;\r\n    _arrLyrRequest: Array<any>;\r\n\r\n    /**\r\n     * constructor called implicitly\r\n     */\r\n    constructor() {\r\n        super('map move');\r\n        this._arrLyrRequest = [];\r\n        this._arrLyrTimeout = [];\r\n        this._arrLayer = [];\r\n        this._lookupLayer = {};\r\n\r\n        this._mapMoveCallbacks = [];\r\n        this._mapMoveCallbacksLookup = {};\r\n        this._mapMoveCallbackDelays = [];\r\n        this._mapMoveCallbackContext = [];\r\n        this._mapMoveCallbackTimeout = [];\r\n\r\n        this._mapExtent = undefined;\r\n        this._zoomLevel = undefined;\r\n\r\n    }\r\n\r\n    /**\r\n     * initialize the map move object\r\n     * @param theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map){\r\n        super.init(theMap);\r\n\r\n        this.map.getView().on(['change:center', 'change:resolution'], (e: {type: string}) =>{\r\n\r\n           this._updateMapExtent();\r\n\r\n            // trigger the layer updates\r\n            for (let i = 0; i < this._arrLayer.length; i++) {\r\n                this.triggerLyrLoad(this._arrLayer[i], i, e.type);\r\n            }\r\n\r\n            // trigger the map callbacks\r\n            for (let i = 0; i < this._mapMoveCallbacks.length; i++) {\r\n                this.triggerMoveCallback(i, e.type);\r\n            }\r\n        });\r\n    }\r\n\r\n    _updateMapExtent() {\r\n        let theView = this.map.getView();\r\n        this._zoomLevel = theView.getZoom();\r\n\r\n        let extentArray = theView.calculateExtent(this.map.getSize());\r\n\r\n        this._mapExtent = {\r\n            minX: extentArray[0],\r\n            minY: extentArray[1],\r\n            maxX: extentArray[2],\r\n            maxY: extentArray[3]\r\n        };\r\n    }\r\n\r\n    /**\r\n     * return the map extent\r\n     */\r\n    get mapExtent() {\r\n        if (!this._mapExtent) {\r\n            this._updateMapExtent();\r\n        }\r\n\r\n        return this._mapExtent;\r\n    }\r\n\r\n    /**\r\n     * Trigger the layer load\r\n     * @param lyr the layer being acted on\r\n     * @param index index of the layer\r\n     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n     */\r\n    triggerLyrLoad(lyr: LayerBaseVector, index?: number, eventType?: string) {\r\n\r\n        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            throw 'need to define lyr or index';\r\n        } else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            index = this._arrLayer.indexOf(lyr);\r\n        } else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n            lyr = this._arrLayer[index];\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._arrLyrTimeout[index] != null) {\r\n            clearTimeout(this._arrLyrTimeout[index]);\r\n            this._arrLyrTimeout[index] = null;\r\n        }\r\n\r\n        // abort if necessary and clear the request\r\n        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n            this._arrLyrRequest[index].abort();\r\n            this._arrLyrRequest[index] = null;\r\n        }\r\n\r\n        // dummy callback used if before load returns false\r\n        let callbackFunc = function () {};\r\n\r\n        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n\r\n            let __this = this;\r\n\r\n            callbackFunc = function () {\r\n                function innerFunction(theLayer: LayerBaseVector, theIndex: number) {\r\n                    let _innerThis = this;\r\n                    this._arrLyrRequest[theIndex] = $.get(\r\n                        theLayer.url,\r\n                        theLayer.mapMoveParams,\r\n                        function (d) {\r\n                            /**\r\n                             * @type {LayerBaseVector}\r\n                             */\r\n                            theLayer.mapMoveCallback(d);\r\n                            theLayer.loadCallback();\r\n                        }, 'json').fail(\r\n                        function (jqXHR) {\r\n                            if (jqXHR.statusText != 'abort') {\r\n                                console.log('failed');\r\n                                console.log(theLayer.url);\r\n                                console.log(theLayer.mapMoveParams);\r\n                            }\r\n                        }).always(\r\n                        function () {\r\n                            _innerThis._arrLyrTimeout[theIndex] = null;\r\n                            _innerThis._arrLyrRequest[theIndex] = null;\r\n                        });\r\n                }\r\n                innerFunction.call(__this, lyr, index);\r\n            };\r\n        } else {\r\n            lyr.clear();\r\n        }\r\n        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n    }\r\n\r\n    /**\r\n     * trigger the map move call back at the given index\r\n     * @param ind - the index of the layer\r\n     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n     * @param functionId=undefined the function id used to reference the added callback function\r\n     */\r\n    triggerMoveCallback(ind: number, eventType?: string, functionId?: string) {\r\n\r\n        if (typeof ind == 'undefined' && typeof functionId == 'undefined'){\r\n            throw 'either the function index or the id must be defined';\r\n        }\r\n\r\n        if (typeof ind !== 'number'){\r\n            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n        }\r\n\r\n        if (ind < 0){\r\n            console.log('function not found');\r\n\r\n            return;\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n            this._mapMoveCallbackTimeout[ind] = null;\r\n        }\r\n\r\n        let ctx = this._mapMoveCallbackContext[ind];\r\n        let theFunc = this._mapMoveCallbacks[ind];\r\n\r\n        let __this = this;\r\n\r\n        let f = function () {\r\n            if (ctx !== null) {\r\n                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n            } else {\r\n                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n        };\r\n\r\n        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n    }\r\n\r\n    /**\r\n     * Add a layer to the interaction\r\n     * @param  lyr - layer to add\r\n     * @param triggerOnAdd - if the layer should be loaded on add\r\n     */\r\n    addVectorLayer(lyr: LayerBaseVector, triggerOnAdd: boolean = true) {\r\n        if (this._arrLayer.indexOf(lyr) > -1) {\r\n            console.log('already added ' + lyr.name + ' to map move');\r\n\r\n            return;\r\n        }\r\n        this._checkInit();\r\n\r\n        this._arrLyrRequest.push(null);\r\n        this._arrLyrTimeout.push(null);\r\n        this._arrLayer.push(lyr);\r\n        this._lookupLayer[lyr.id] = lyr;\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * add a callback to the map move event\r\n     * @param func - callback function\r\n     * @param context - the context to use for this function\r\n     * @param delay=50 the delay before call load\r\n     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n     * @param functionId optional id to reference the function later for outside triggering\r\n     */\r\n    addCallback(func: mapMoveCallbackFunction, context?: any, delay?: number, triggerOnAdd? : boolean, functionId?: string) {\r\n\r\n        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n            console.log('this function already added to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        if (!functionId){\r\n            functionId = makeGuid();\r\n        }\r\n\r\n        this._mapMoveCallbacks.push(func);\r\n        this._mapMoveCallbacksLookup[functionId] = func;\r\n        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n        this._mapMoveCallbackTimeout.push(null);\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n        }\r\n    }\r\n}\r\n\r\nnm.MapMoveCls = MapMoveCls;\r\nexport default MapMoveCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapMoveCls.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport propertiesZoomStyle from '../olHelpers/propertiesZoomStyle';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport {LayerBaseVector} from \"../layers/LayerBaseVector\";\r\nimport {LayerBase} from \"../layers/LayerBase\";\r\nimport LayerEsriMapServer from \"../layers/LayerEsriMapServer\";\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface popupChangedFunction {\r\n    ($popContent: JQuery): any;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport interface popupCallback {\r\n    /**\r\n     * Callback function for the popup\r\n     * @param featureProperties\r\n     * @param jqRef\r\n     */\r\n    (featureProperties: Object, jqRef?: JQuery): string | boolean;\r\n}\r\n\r\ninterface mapEvent {\r\n    coordinate: ol.Coordinate;\r\n    pixel: ol.Pixel;\r\n    dragging: boolean|any;\r\n    originalEvent: Event;\r\n}\r\n\r\n\r\nexport class FeatureLayerProperties {\r\n\r\n    feature: ol.Feature;\r\n    layer: LayerBaseVector|LayerEsriMapServer;\r\n    layerIndex: number;\r\n    selectionLayer: ol.layer.Vector;\r\n    popupContent: string;\r\n    esriLayerName: string;\r\n\r\n    /**\r\n     *\r\n     * @param feature the feature\r\n     * @param layer - the layer in the popup\r\n     * @param layerIndex - index of the layer\r\n     * @param selectionLayer - the ol selection layer\r\n     * @param [esriLayerName=undefined] - esri layer name\r\n     */\r\n    constructor(feature: ol.Feature, layer: LayerBaseVector|LayerEsriMapServer, layerIndex: number, selectionLayer: ol.layer.Vector, esriLayerName?: string) {\r\n        this.feature = feature;\r\n        this.layer = layer;\r\n        this.layerIndex = layerIndex;\r\n        this.selectionLayer = selectionLayer;\r\n        this.popupContent = '';\r\n        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n    }\r\n\r\n    get layerName() {\r\n        if (typeof this.esriLayerName == 'string') {\r\n            return this.esriLayerName;\r\n        } else {\r\n            return this.layer.name;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * map popup class\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapPopupCls extends MapInteractionBase {\r\n    private _popupOpen: boolean;\r\n    private _passThroughLayerFeatureArray: Array<FeatureLayerProperties>;\r\n    private _currentPopupIndex: number;\r\n    private _popupContentLength: number;\r\n    private _esriMapServiceLayers: Array<LayerEsriMapServer>;\r\n    private _$popupCloser: JQuery;\r\n    private _$popupContent: JQuery;\r\n    private _$popupContainer: JQuery;\r\n    private _popupOverlay: ol.Overlay;\r\n    private _arrPopupLayers: Array<LayerBaseVector>;\r\n    private _popupCoordinate: ol.Coordinate;\r\n    private _popupChangedFunctions: Array<popupChangedFunction>;\r\n    private _mapClickFunctions: Array<Function>;\r\n    private _selectionLayerLookup: {[s: string]: ol.layer.Vector};\r\n    private _arrPopupLayerIds: Array<string>;\r\n    // private _arrPopupOlLayers: Array<ol.layer.Vector>;\r\n    private _arrPopupContentFunction: Array<popupCallback>;\r\n    private _selectionLayers: Array<ol.layer.Vector>;\r\n\r\n    /**\r\n     * Definition for openlayers style function\r\n     * @callback olStyleFunction\r\n     * &param feature the openlayers vector feature\r\n     * $param\r\n     */\r\n\r\n\r\n    /**\r\n     * map popup constructor\r\n     */\r\n    constructor() {\r\n        super('map popup');\r\n        this._arrPopupLayerIds = [];\r\n        this._arrPopupLayers = [];\r\n        // this._arrPopupOlLayers = [];\r\n        this._arrPopupContentFunction = [];\r\n        this._$popupContainer = undefined;\r\n        this._$popupContent = undefined;\r\n        this._$popupCloser = undefined;\r\n        this._popupOverlay = undefined;\r\n        this._selectionLayers = [];\r\n        this._selectionLayerLookup = {};\r\n        this._mapClickFunctions = [];\r\n\r\n        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n        //this._popupChangedLookup = {'a': a};\r\n        this._popupChangedFunctions = [];\r\n        this._esriMapServiceLayers = [];\r\n\r\n        this._popupOpen = false;\r\n        this._popupCoordinate = null;\r\n\r\n        this._passThroughLayerFeatureArray = [];\r\n\r\n        this._currentPopupIndex = -1;\r\n        this._popupContentLength = 0;\r\n\r\n    }\r\n\r\n    /**\r\n     * map popup initialization\r\n     * @param {ol.Map} theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map) {\r\n        super.init(theMap);\r\n\r\n        let $map;\r\n        let target = this.map.getTarget();\r\n\r\n        if (typeof target == 'string') {\r\n            $map = $('#' + target);\r\n        }\r\n        else {\r\n            $map = $(target);\r\n        }\r\n\r\n        $map.append(\r\n            '<div class=\"ol-popup\">' +\r\n            '<span class=\"ol-popup-closer\">X</span>' +\r\n            '<div class=\"popup-content\"></div>' +\r\n            '</div>'\r\n        );\r\n\r\n        this._$popupContainer = $map.find('.ol-popup');\r\n        this._$popupContent = $map.find('.popup-content');\r\n        this._$popupCloser = $map.find('.ol-popup-closer');\r\n\r\n        let _ease = (n: number): number => {\r\n            return ol.easing.inAndOut(n);\r\n        };\r\n\r\n\r\n        this._popupOverlay = new ol.Overlay({\r\n            element: this._$popupContainer[0],\r\n            autoPan: true,\r\n            autoPanAnimation: {\r\n                duration: 250,\r\n                source: theMap.getView().getCenter(),\r\n                easing: _ease\r\n            }\r\n        });\r\n\r\n        this._map.addOverlay(this._popupOverlay);\r\n\r\n        this._$popupCloser.click((evt) => {\r\n            this.closePopup();\r\n        });\r\n\r\n        // display popup on click\r\n        this._map.on('singleclick', (evt: {coordinate: [number, number], pixel: ol.Pixel}) => {\r\n\r\n            this.closePopup();\r\n            this._popupCoordinate = evt['coordinate'];\r\n\r\n            // esri map service layers\r\n            if (this._esriMapServiceLayers.length > 0) {\r\n\r\n                let queryParams = {\r\n                    geometry: evt['coordinate'].join(','),\r\n                    geometryType: 'esriGeometryPoint',\r\n                    layers: 'all',\r\n                    sr: this._map.getView().getProjection().getCode().split(':')[1],\r\n                    mapExtent: (this._map.getView().calculateExtent(this._map.getSize()) as number[]).join(','),\r\n                    imageDisplay: (this._map.getSize() as number[]).join(',') + ',96',\r\n                    returnGeometry: true,\r\n                    tolerance: 15,\r\n                    f: 'pjson'\r\n                };\r\n\r\n                for (let l of this._esriMapServiceLayers) {\r\n                    l.getPopupInfo(queryParams);\r\n                }\r\n            }\r\n\r\n            let layerFeatureObjectArray = this._featuresAtPixel(evt['pixel']);\r\n\r\n            this._passThroughLayerFeatureArray = [];\r\n            this._currentPopupIndex = -1;\r\n\r\n            for (let i = 0; i < layerFeatureObjectArray.length; i++) {\r\n                let featObj = layerFeatureObjectArray[i];\r\n\r\n                let props = featObj.feature.getProperties();\r\n\r\n                let popupContentResponse = this._arrPopupContentFunction[featObj.layerIndex](props, this._$popupContent);\r\n\r\n                //skip if return was false\r\n                if (popupContentResponse === false) {\r\n                    //continue;\r\n                } else if (typeof popupContentResponse == 'string') {\r\n                    featObj.popupContent = popupContentResponse as string;\r\n                    this._passThroughLayerFeatureArray.push(featObj);\r\n                } else {\r\n                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n                }\r\n            }\r\n\r\n            this._popupContentLength = this._passThroughLayerFeatureArray.length;\r\n\r\n            this._currentPopupIndex = -1;\r\n\r\n            let popupHtml = '<div class=\"ol-popup-nav\">';\r\n            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n            popupHtml += `<span class=\"current-popup-item-number\" style=\"font-weight: bold;\"></span>`;\r\n            popupHtml += `<span>&nbsp;of&nbsp;</span>`;\r\n            popupHtml += `<span class=\"popup-content-length\" style=\"font-weight: bold;\">${this._popupContentLength}</span>`;\r\n            popupHtml += `<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>`;\r\n            popupHtml += `<span class=\"current-popup-layer-name\"></span>`;\r\n            popupHtml += '</div>';\r\n            popupHtml += '<div class=\"ol-popup-inner\">';\r\n\r\n            popupHtml += '</div>';\r\n\r\n            this._$popupContent.html(popupHtml);\r\n\r\n            this._$popupContent.find('.previous-popup').click(() => {\r\n                if (this._popupContentLength == 1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == 0) {\r\n                    this._currentPopupIndex = this._popupContentLength - 1;\r\n                } else {\r\n                    this._currentPopupIndex--;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n            let nextPopup = this._$popupContent.find('.next-popup');\r\n\r\n            nextPopup.click(() => {\r\n                if (this._popupContentLength == 1 && this._currentPopupIndex > -1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == this._popupContentLength - 1) {\r\n                    this._currentPopupIndex = 0;\r\n                } else {\r\n                    this._currentPopupIndex++;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n\r\n            if (this._popupContentLength > 0) {\r\n                nextPopup.trigger('click');\r\n                this._popupOverlay.setPosition(this._popupCoordinate);\r\n                this._$popupContent.scrollTop(0);\r\n                this._popupOpen = true;\r\n            }\r\n        });\r\n\r\n        //change mouse cursor when over marker\r\n        this._map.on('pointermove', (evt) => {\r\n\r\n            if (evt['dragging']) {\r\n                return;\r\n            }\r\n            let pixel = this.map.getEventPixel(evt['originalEvent']);\r\n\r\n            let hit = false;\r\n\r\n            this.map.forEachFeatureAtPixel(pixel, (f, l) => {\r\n                if (hit) {\r\n                    return;\r\n                }\r\n\r\n                for (let vLyr of this._arrPopupLayers){\r\n                    if (vLyr.olLayer == l){\r\n                        hit = true;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n\r\n            let mapElement = this.map.getTargetElement() as HTMLElement;\r\n            mapElement.style.cursor = hit ? 'pointer' : '';\r\n        });\r\n    }\r\n\r\n    /**\r\n     * helper to select features\r\n     * @private\r\n     */\r\n    _triggerFeatSelect() {\r\n        let $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n        let $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n        let $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n        this.clearSelection();\r\n        let lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n        $layerNameSpan.html(lyrFeatObj.layerName);\r\n        $innerPopup.html(lyrFeatObj.popupContent);\r\n        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n        for (let f of this._popupChangedFunctions) {\r\n            f(this._$popupContent);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param feature - the ol feature\r\n     * @param {LayerEsriMapServer} lyr - the map server layer\r\n     * @param {string} popupContent - popup content\r\n     * @param {string} esriName - esri layer name\r\n     */\r\n    addMapServicePopupContent(feature: ol.Feature, lyr: LayerEsriMapServer, popupContent: string, esriName: string) {\r\n\r\n        let featLayerObject = new FeatureLayerProperties(\r\n            feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName\r\n        );\r\n        featLayerObject.popupContent = popupContent;\r\n\r\n        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n        this._popupContentLength++;\r\n\r\n        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n\r\n        if (!this._popupOpen) {\r\n            this._$popupContent.find('.next-popup').trigger('click');\r\n\r\n            this._popupOverlay.setPosition(this._popupCoordinate);\r\n            this._$popupContent.scrollTop(0);\r\n            this._popupOpen = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param  pixel - the ol pixel\r\n     * @returns  feature layer properties\r\n     * @private\r\n     */\r\n    _featuresAtPixel(pixel: ol.Pixel): Array<FeatureLayerProperties> {\r\n        let layerFeatureObjectArray: FeatureLayerProperties[] = [];\r\n\r\n        this.map.forEachFeatureAtPixel(pixel, (feature: ol.Feature, layer: ol.layer.Vector) => {\r\n            let hasLyr = false;\r\n\r\n            let j;\r\n            let lyr = null;\r\n\r\n            for (j = 0; j < this._arrPopupLayers.length; j++){\r\n                lyr = this._arrPopupLayers[j];\r\n\r\n                if (lyr.olLayer === layer){\r\n                    hasLyr = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (hasLyr) {\r\n                layerFeatureObjectArray.push(\r\n                    new FeatureLayerProperties(\r\n                        feature, lyr, j, this._selectionLayers[j]));\r\n            }\r\n        });\r\n\r\n        return layerFeatureObjectArray;\r\n    }\r\n\r\n    closePopup() {\r\n        this._checkInit();\r\n        this._popupOpen = false;\r\n        this._popupOverlay.setPosition(undefined);\r\n        this._$popupCloser[0].blur();\r\n        this.clearSelection();\r\n        this._$popupContent.html('');\r\n\r\n        return false;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param chgFunction - popup change function\r\n     */\r\n    addPopupChangedFunction(chgFunction: popupChangedFunction) {\r\n        this._popupChangedFunctions.push(chgFunction);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - the layer being acted on\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns  the new selection layer\r\n     * @private\r\n     */\r\n    _addPopupLayer(lyr: LayerBaseVector|LayerEsriMapServer, selectionStyle: {color?: string, width?: number, olStyle?: ol.style.Style}): ol.layer.Vector {\r\n        this._checkInit();\r\n\r\n        selectionStyle = selectionStyle || {};\r\n        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n        selectionStyle.width = selectionStyle.width || 10;\r\n\r\n        let theStyle;\r\n\r\n        if (selectionStyle.olStyle) {\r\n            theStyle = selectionStyle.olStyle;\r\n        } else {\r\n            theStyle = new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: selectionStyle.color,\r\n                    width: selectionStyle.width\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 7,\r\n                    fill: new ol.style.Fill({color: selectionStyle.color}),\r\n                    stroke: new ol.style.Stroke({color: selectionStyle.color, width: 1})\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: selectionStyle.color\r\n                })\r\n            });\r\n        }\r\n\r\n        let selectionLayer = new ol.layer.Vector(\r\n            {\r\n                source: new ol.source.Vector(),\r\n                style: theStyle\r\n            }\r\n        );\r\n\r\n        selectionLayer.setZIndex(100);\r\n\r\n        this._selectionLayers.push(selectionLayer);\r\n        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n        this.map.addLayer(selectionLayer);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add popup to the map\r\n     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addVectorPopup(lyr: LayerBaseVector, popupContentFunction: popupCallback,\r\n                   selectionStyle?: {color?: string, width?: number, olStyle?: ol.style.Style}) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._arrPopupLayerIds.push(lyr.id);\r\n        this._arrPopupLayers.push(lyr);\r\n        // this._arrPopupOlLayers.push(lyr.olLayer);\r\n        this._arrPopupContentFunction.push(popupContentFunction);\r\n\r\n        return selectionLayer;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase} lyr - layer\r\n     */\r\n    removeVectorPopup(lyr: LayerBaseVector) {\r\n        let idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n\r\n        if (idx > -1) {\r\n            this._arrPopupLayerIds.splice(idx, 1);\r\n            this._arrPopupLayers.splice(idx, 1);\r\n            // this._arrPopupOlLayers.splice(idx, 1);\r\n            this._arrPopupContentFunction.splice(idx, 1);\r\n            this._selectionLayers.splice(idx, 1);\r\n            delete this._selectionLayerLookup[lyr.id];\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerEsriMapServer} lyr - map server layer\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addMapServicePopup(lyr: LayerEsriMapServer, selectionStyle?: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._esriMapServiceLayers.push(lyr);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n    clearSelection() {\r\n        this._checkInit();\r\n        for (let i = 0; i < this._selectionLayers.length; i++) {\r\n            this._selectionLayers[i].getSource().clear();\r\n        }\r\n        for (let f of this._mapClickFunctions) {\r\n            f();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add a function to be called when the map is clicked but before any popups are implemented\r\n     * @param {function} func - the map click function\r\n     */\r\n    addMapClickFunction(func: Function) {\r\n        this._mapClickFunctions.push(func);\r\n    }\r\n}\r\nnm.MapPopupCls = MapPopupCls;\r\nexport default MapPopupCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapPopupCls.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nimport {Geocode} from './geocode';\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface quickMapOptions {\r\n    divId?: string;\r\n    center?: {x: number, y: number};\r\n    zoom?: number;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    baseSwitcher?: boolean;\r\n    fullScreen?: boolean;\r\n    addGeocode?: boolean;\r\n}\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param [options={}] config options\r\n * @param [options.divId=map] map div id\r\n * @param [options.center={}] center config object\r\n * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param [options.center.y=5574910] center y, web mercator y or lat\r\n * @param [options.zoom=7] zoom level\r\n * @param [options.minZoom=undefined] min zoom\r\n * @param [options.maxZoom=undefined] max zoom\r\n * @param [options.baseSwitcher=true] if add base map switcher\r\n * @param [options.fullScreen=false] if add base map switcher\r\n * @returns the ol map\r\n */\r\nexport function quickMapBase(options: quickMapOptions = {}): ol.Map {\r\n    options.divId = options.divId || 'map';\r\n    options.center = options.center || {x: -10018378, y: 5574910};\r\n    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n    options.addGeocode = options.addGeocode || false;\r\n\r\n\r\n    let $mapDiv = $('#' + options.divId);\r\n    $mapDiv.css('position', 'relative');\r\n\r\n    let osmLayer = new ol.layer.Tile({source: new ol.source.OSM()});\r\n    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n\r\n    let osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n    let aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n\r\n    if (options.baseSwitcher) {\r\n        //  let switcherContent = '<div class=\"base-map-switcher\" title=\"Toggle Base Layer\" style=\"';\r\n        //  switcherContent += 'position: absolute; top: 70px; left: 4px; border: solid black 1px; ';\r\n        //  switcherContent += `height: 50px; width: 50px; z-index: 10; border-radius: 4px; background: ${aerialCss};`;\r\n        //  switcherContent += '\"></div>';\r\n        //  $mapDiv.append(switcherContent);\r\n        //\r\n        // $mapDiv.find('.base-map-switcher').click(function() {\r\n        //      \"use strict\";\r\n        //      osmLayer.setVisible(!osmLayer.getVisible());\r\n        //      satLayer.setVisible(!satLayer.getVisible());\r\n        //\r\n        //      if (osmLayer.getVisible()){\r\n        //          $(this).css('background', aerialCss);\r\n        //      } else {\r\n        //          $(this).css('background', osmCss);\r\n        //      }\r\n        //  });\r\n    }\r\n\r\n    if (options.zoom < 0 || options.zoom > 28) {\r\n        throw 'zoom out of range';\r\n    }\r\n\r\n    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n        let p = new ol.geom.Point([options.center.x, options.center.y]);\r\n        new ol.proj.Projection({code: \"EPSG:4326\"});\r\n\r\n        p.transform(new ol.proj.Projection({code: \"EPSG:4326\"}), new ol.proj.Projection({code: \"EPSG:3857\"}));\r\n        let coordinates = p.getCoordinates();\r\n        options.center.x = coordinates[0];\r\n        options.center.y = coordinates[1];\r\n    }\r\n\r\n    const controls = ol.control.defaults({\r\n            attributionOptions: {collapsible: false}\r\n        }\r\n    );\r\n\r\n    const view = new ol.View({\r\n        center: [options.center.x, options.center.y],\r\n        zoom: options.zoom,\r\n        minZoom: options.minZoom,\r\n        maxZoom: options.maxZoom\r\n    });\r\n\r\n    let map = new ol.Map({\r\n        layers: [osmLayer],\r\n        target: options.divId,\r\n        controls: controls,\r\n        view: view\r\n    });\r\n\r\n    if (options.fullScreen) {\r\n        map.addControl(new ol.control.FullScreen({}));\r\n    }\r\n\r\n    if (options.addGeocode){\r\n        new Geocode(document.getElementById(options.divId) as HTMLDivElement, map);\r\n    }\r\n\r\n    return map;\r\n}\r\n\r\nnm.quickMapBase = quickMapBase;\r\nexport default quickMapBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/quickMapBase.ts","/**\r\n * Created by gavorhes on 12/14/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nconst nm = provide('olHelpers.zoomResolutionConvert');\r\n\r\nlet _zoomResLookup = [\r\n    156543.03392804097, //0\r\n    78271.51696402048, //1\r\n    39135.75848201024, //2\r\n    19567.87924100512, //3\r\n    9783.93962050256, //4\r\n    4891.96981025128, //5\r\n    2445.98490512564, //6\r\n    1222.99245256282, //7\r\n    611.49622628141, //8\r\n    305.748113140705, //9\r\n    152.8740565703525, //10\r\n    76.43702828517625, //11\r\n    38.21851414258813, //12\r\n    19.109257071294063, //13\r\n    9.554628535647032, //14\r\n    4.777314267823516, //15\r\n    2.388657133911758, //16\r\n    1.194328566955879, //17\r\n    0.5971642834779395, //18\r\n    0.29858214173896974, //19\r\n    0.14929107086948487, //20\r\n    0.07464553543474244, //21\r\n    0.03732276771737122, //22\r\n    0.01866138385868561, //23\r\n    0.009330691929342804, //24\r\n    0.004665345964671402, //25\r\n    0.002332672982335701, //26\r\n    0.0011663364911678506, //27\r\n    0.0005831682455839253 //28\r\n];\r\n\r\n/**\r\n * Get the resolution given the zoom level\r\n * @param {number} zoomLevel - the zoom level\r\n * @returns {number|*} the map resolution\r\n */\r\nexport function zoomToResolution(zoomLevel: number): number {\r\n    \"use strict\";\r\n\r\n    if (typeof zoomLevel == 'number') {\r\n        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n            return _zoomResLookup[zoomLevel];\r\n        } else {\r\n            console.log(`invalid zoom level provided: ${zoomLevel}`);\r\n\r\n            return undefined;\r\n        }\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\nnm.zoomToResolution = zoomToResolution;\r\n\r\n\r\n/**\r\n * Get resolution from the zoom level\r\n * @param {number} resolution - the resolution\r\n * @returns {number|*} the zoom level\r\n */\r\nexport function resolutionToZoom(resolution: number): number{\r\n    for (let i = 0; i < _zoomResLookup.length; i++){\r\n        if (resolution >= _zoomResLookup[i] ){\r\n            return i;\r\n        }\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nnm.resolutionToZoom = resolutionToZoom;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/zoomResolutionConvert.ts","module.exports = ol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ol\"\n// module id = 2\n// module chunks = 2 4 5 6 7 8","/**\r\n * Created by gavorhes on 12/7/2015.\r\n */\r\nimport {LayerBase, LayerBaseOptions} from './LayerBase';\r\nimport * as esriToOl from '../olHelpers/esriToOlStyle';\r\nimport mapPopup from '../olHelpers/mapPopup';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\n\r\n/**\r\n * Helper to return the url to the service on the production server\r\n * @param {string} folder\r\n * @param {string} service\r\n * @returns {string}\r\n */\r\nexport function makeServiceUrl(folder: string, service: string): string{\r\n    return `https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/${folder}/${service}/MapServer`\r\n}\r\n\r\nexport function localCacheUrl(folder: string, service: string): string{\r\n    let loc = window.location.href;\r\n\r\n    let url = `/mapserver/${folder}/${service}`;\r\n\r\n    if (loc.indexOf('transportal.cee.wisc.edu') > -1){\r\n        if (loc.toLowerCase().indexOf('webmapsstage') > -1){\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmapsstage' + url;\r\n        } else {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmaps' + url\r\n        }\r\n    }\r\n\r\n\r\n    return url;\r\n}\r\n\r\n\r\n\r\n\r\nexport interface LayerEsriMapServerOptions extends LayerBaseOptions {\r\n    addPopup?: boolean;\r\n    showLayers?: Array<number>;\r\n    getLegend?: boolean;\r\n}\r\n\r\n/**\r\n * esri mapserver layer\r\n * @augments LayerBase\r\n */\r\nexport class LayerEsriMapServer extends LayerBase {\r\n    _esriFormat: ol.format.EsriJSON;\r\n    _popupRequest: JQueryXHR;\r\n    _showLayers: number[];\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - resource url\r\n     * @param {object} [options] - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n     */\r\n    constructor(url: string, options: LayerEsriMapServerOptions = {}) {\r\n\r\n        super(url, options);\r\n        this._source = new ol.source.TileArcGISRest(\r\n            {\r\n                url: this.url == '' ? undefined : this.url,\r\n                params: typeof options.showLayers == 'undefined' ? undefined : {layers: 'show:' + options.showLayers.join(',')}\r\n            }\r\n        );\r\n\r\n        this._showLayers = options.showLayers || [];\r\n\r\n        this._olLayer = new ol.layer.Tile({\r\n            source: this._source as ol.source.Tile,\r\n            visible: this.visible,\r\n            opacity: this.opacity,\r\n            minResolution: this._minResolution,\r\n            maxResolution: this._maxResolution\r\n        });\r\n\r\n\r\n        this._olLayer.setZIndex(this._zIndex);\r\n\r\n        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n\r\n        this._esriFormat = new ol.format.EsriJSON();\r\n        this._popupRequest = null;\r\n\r\n        options.getLegend = typeof options.getLegend === 'boolean' ? options.getLegend : true;\r\n\r\n        if (options.getLegend){\r\n            this.addLegendContent();\r\n        }\r\n\r\n        if (options.addPopup) {\r\n            mapPopup.addMapServicePopup(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=''] additional content for legend\r\n     */\r\n    addLegendContent(additionalContent?: string) {\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'legend?f=pjson&callback=?';\r\n\r\n        $.get(urlCopy, {}, (d) => {\r\n            let newHtml = esriToOl.makeMapServiceLegend(d, this._showLayers);\r\n            super.addLegendContent(newHtml);\r\n        }, 'json');\r\n    }\r\n\r\n\r\n    getPopupInfo(queryParams: {[s: string]: any}) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] != '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'identify?callback=?';\r\n\r\n        let __this = this;\r\n\r\n        if (this._popupRequest != null) {\r\n            this._popupRequest.abort();\r\n        }\r\n\r\n\r\n        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n            for (let r of d['results']) {\r\n\r\n                let popupHtml = '<table class=\"esri-popup-table\">';\r\n\r\n                for (let a in r['attributes']) {\r\n                    if (r['attributes'].hasOwnProperty(a)) {\r\n                        let attrVal = r['attributes'][a];\r\n\r\n                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n                            continue;\r\n                        }\r\n\r\n                        let attr = a;\r\n                        if (attr.length > 14) {\r\n                            attr = attr.slice(0, 11) + '...';\r\n                        }\r\n\r\n                        popupHtml += `<tr><td>${attr}</td><td>${attrVal}</td></tr>`;\r\n                    }\r\n                }\r\n\r\n                popupHtml += '</table>';\r\n\r\n                mapPopup.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n            }\r\n        }, 'json');\r\n\r\n        this._popupRequest.always(function () {\r\n            __this._popupRequest = null;\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ol.source.TileArcGISRest} the vector source\r\n     */\r\n    get source(): ol.source.TileArcGISRest {\r\n        return super.getSource() as ol.source.TileArcGISRest;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Tile {\r\n        return super.getOlLayer() as ol.layer.Tile;\r\n    }\r\n}\r\nnm.LayerEsriMapServer = LayerEsriMapServer;\r\nexport default LayerEsriMapServer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/LayerEsriMapServer.ts","/**\r\n * Created by gavorhes on 1/4/2016.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers.esriToOlStyle');\r\n\r\n\r\n/**\r\n *\r\n * @param {Array<number>} colorArray - input color array\r\n * @param {number} opacity - the opacity 0 to 1\r\n * @returns {string} rgba string\r\n * @private\r\n */\r\nfunction _colorArrayToRgba(colorArray: [number, number, number], opacity: number): string {\r\n    \"use strict\";\r\n\r\n    return `rgba(${colorArray[0]},${colorArray[1]},${colorArray[2]},${opacity})`;\r\n}\r\n\r\n/**\r\n * escape html charcters\r\n * @param {string} str - input string\r\n * @returns {string} escaped string\r\n */\r\nfunction htmlEscape(str: string): string {\r\n    return String(str)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#39;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;');\r\n}\r\n\r\nnm.htmlEscape = htmlEscape;\r\n\r\n\r\nexport interface iEsriResponse{\r\n    drawingInfo: {\r\n        renderer: iEsriRenderer;\r\n        transparency: number\r\n    },\r\n    geometryType: string\r\n}\r\n\r\n\r\nexport interface iEsriRenderer{\r\n    type: string;\r\n    symbol: iEsriSymbol;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: iEsriSymbol}>;\r\n    field1: string;\r\n    defaultSymbol: iEsriSymbol;\r\n    defaultLabel: string;\r\n}\r\n\r\nexport interface iEsriSymbol{\r\n    size: number;\r\n    type: string;\r\n    outline:{\r\n        color: [number, number, number];\r\n        width: number;\r\n    },\r\n    color: [number, number, number];\r\n    width: number;\r\n    imageData: string\r\n}\r\n\r\n\r\nclass CommonSymbol {\r\n    legendHtml: string;\r\n    opacity: number;\r\n    symbolObj: iEsriSymbol;\r\n    olStyle: ol.style.Style;\r\n\r\n    /**\r\n     *\r\n     * @param symbolObj\r\n     * @param {number} opacity\r\n     */\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        this.symbolObj = symbolObj;\r\n        this.opacity = opacity;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\ninterface ICommonSymbol{\r\n    new (symbolObj: iEsriSymbol, opacity: number): CommonSymbol\r\n}\r\n\r\n\r\nclass PointSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSMS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n                let radius = this.symbolObj.size;\r\n\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        fill: new ol.style.Fill({\r\n                            color: innerColor\r\n                        }),\r\n                        stroke: new ol.style.Stroke({color: outerColor, width: outlineWidth})\r\n                    })\r\n                });\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" style=\"color: ${innerColor}\">&#9679;</span>`;\r\n                break;\r\n            case 'esriPMS':\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Icon({src: `data:image/png;base64,${this.symbolObj['imageData']}`})\r\n                });\r\n                this.legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${this.symbolObj['imageData']}\">`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Point symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass LineSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSLS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let lineWidth = this.symbolObj.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: innerColor,\r\n                        //lineDash: [4],\r\n                        width: lineWidth\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 4px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: -1px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Line symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass PolygonSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj['type']) {\r\n            case 'esriSFS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: outerColor,\r\n                        //lineDash: [4],\r\n                        width: outlineWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: innerColor\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `border: solid ${outerColor} 1px;`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 9px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: 2px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Polygon symbol does handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nexport interface iStyleFunc{\r\n    (f: ol.Feature): ol.style.Style| ol.style.Style[]\r\n}\r\n\r\nclass SymbolGenerator {\r\n    opacity: number;\r\n    renderer: iEsriRenderer;\r\n    legendHtml: string;\r\n    olStyle: iStyleFunc | ol.style.Style;\r\n\r\n    constructor(esriResponse: iEsriResponse) {\r\n        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n        this.renderer = esriResponse.drawingInfo.renderer;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\nclass SingleSymbol extends SymbolGenerator {\r\n    symbol: iEsriSymbol;\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the symbol class to use\r\n     */\r\n    constructor(esriResponse: iEsriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.symbol = this.renderer.symbol;\r\n        let symbolObj = new SymbolClass(this.symbol, this.opacity);\r\n        this.olStyle = symbolObj.olStyle;\r\n        this.legendHtml = symbolObj.legendHtml;\r\n    }\r\n}\r\n\r\nclass UniqueValueSymbol extends SymbolGenerator {\r\n\r\n    propertyName: string;\r\n    defaultSymbol: iEsriSymbol;\r\n    defaultStyle: ol.style.Style;\r\n    defaultLabelHtml: string;\r\n    labelArray: Array<string>;\r\n    legendArray: Array<string>;\r\n    propertyStyleLookup: {[s: string]: ol.style.Style};\r\n    valueArray: Array<any>;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: iEsriSymbol}>;\r\n\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the Symbol class definition\r\n     */\r\n    constructor(esriResponse: iEsriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.uniqueValueInfos = this.renderer.uniqueValueInfos;\r\n        this.propertyName = this.renderer.field1;\r\n        this.defaultSymbol = this.renderer.defaultSymbol;\r\n\r\n\r\n        if (this.defaultSymbol) {\r\n            let symbolObj = new SymbolClass(this.defaultSymbol, this.opacity);\r\n            this.defaultStyle = symbolObj.olStyle;\r\n            this.defaultLabelHtml = `<span class=\"legend-layer-subitem\">${htmlEscape(this.renderer['defaultLabel'])}</span>` + symbolObj.legendHtml;\r\n        } else {\r\n            this.defaultStyle = undefined;\r\n            this.defaultLabelHtml = 'other';\r\n        }\r\n\r\n        this.valueArray = [];\r\n        this.labelArray = [];\r\n        this.legendArray = [];\r\n        this.propertyStyleLookup = {};\r\n\r\n        for (let uniqueVal of this.uniqueValueInfos) {\r\n            this.labelArray.push(uniqueVal['label']);\r\n            this.valueArray.push(uniqueVal['value']);\r\n            let uniqueSym = new SymbolClass(uniqueVal.symbol, this.opacity);\r\n            this.legendArray.push(`<span class=\"legend-layer-subitem\">${htmlEscape(uniqueVal['label'])}</span>` + uniqueSym.legendHtml);\r\n            this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n        }\r\n\r\n        this.olStyle = (feature: ol.Feature): ol.style.Style[] => {\r\n            let checkProperties = feature.getProperties();\r\n            let checkProperty = checkProperties[this.propertyName];\r\n\r\n            if (this.propertyStyleLookup[checkProperty] !== undefined) {\r\n                return [this.propertyStyleLookup[checkProperty]];\r\n            } else {\r\n               return [this.defaultStyle];\r\n            }\r\n        };\r\n\r\n        if (this.defaultLabelHtml !== null) {\r\n            this.legendArray.push(this.defaultLabelHtml);\r\n        }\r\n\r\n        this.legendHtml = '<ul>';\r\n        for (let h of this.legendArray) {\r\n            this.legendHtml += `<li>${h}</li>`;\r\n        }\r\n        this.legendHtml += '</ul>';\r\n    }\r\n}\r\n\r\nexport function makeFeatureServiceLegendAndSymbol(esriResponse: iEsriResponse): {style: iStyleFunc | ol.style.Style, legend: string} {\r\n    \"use strict\";\r\n    let renderer = esriResponse.drawingInfo.renderer;\r\n    let symbolLegendOut: SymbolGenerator = null;\r\n\r\n    switch (renderer.type) {\r\n        case 'simple':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse.geometryType + ' not handled');\r\n            }\r\n            break;\r\n        case 'uniqueValue':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse['geometryType'] + ' not handled');\r\n            }\r\n            break;\r\n        default:\r\n            alert('not handled renderer type: ' + renderer['type']);\r\n    }\r\n\r\n    if (symbolLegendOut == null) {\r\n        return {style: undefined, legend: ''};\r\n    } else {\r\n        return {style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml};\r\n    }\r\n}\r\n\r\nnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n\r\n\r\nexport interface iMapServiceLegend{\r\n    layerName: string;\r\n    legend: {label: string, imageData: string}[]\r\n}\r\n\r\n/**\r\n *\r\n * @param {object} lyrObject - the layer as defined in the response\r\n * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n * @returns {string} legend html\r\n */\r\nfunction mapServiceLegendItem(lyrObject: iMapServiceLegend, skipLayerNameAndExpander: boolean = false) {\r\n\r\n\r\n    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n    let layerName = lyrObject['layerName'];\r\n    let legendItems = lyrObject['legend'];\r\n    let legendHtml = '';\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml += `<span class=\"legend-layer-subitem\">${layerName}</span>`;\r\n    }\r\n\r\n    if (legendItems.length == 1) {\r\n        legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[0]['imageData']}\">`;\r\n    } else {\r\n        if (!skipLayerNameAndExpander) {\r\n            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n        }\r\n        legendHtml += '<ul>';\r\n        for (let i = 0; i < legendItems.length; i++) {\r\n            legendHtml += `<li>`;\r\n            legendHtml += `<span class=\"legend-layer-subitem\">${htmlEscape(legendItems[i]['label'])}</span>`;\r\n            legendHtml += `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[i]['imageData']}\">`;\r\n            legendHtml += `</li>`;\r\n        }\r\n        legendHtml += '</ul>';\r\n    }\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml = `<span class=\"legend-layer-subitem\">${layerName}</span>` + legendHtml;\r\n    }\r\n\r\n    return legendHtml;\r\n}\r\n\r\n/**\r\n * make map service legent\r\n * @param {object} esriResponse - layer info\r\n * @param  showLayers - limited number of layers to show in map service\r\n * @returns {string} legend content\r\n */\r\nexport function makeMapServiceLegend(esriResponse: {layers: iMapServiceLegend[]}, showLayers: number[] = []) {\r\n    \"use strict\";\r\n\r\n    let newLegendHtml = '';\r\n\r\n    let layers = esriResponse['layers'];\r\n\r\n    if (layers.length == 1) {\r\n        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n    } else {\r\n        newLegendHtml += '<ul>';\r\n        for (let i = 0; i < layers.length; i++) {\r\n            if (showLayers.length > 0 && showLayers.indexOf(i) < 0){\r\n                continue;\r\n            }\r\n            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n        }\r\n        newLegendHtml += '</ul>';\r\n    }\r\n\r\n    return newLegendHtml;\r\n}\r\n\r\nnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/esriToOlStyle.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport provide from './provide';\r\nlet nm = provide('util');\r\n\r\n\r\n/**\r\n * guids are used to uniquely identify groups and features\r\n * @returns {string} a new guid\r\n */\r\nexport function makeGuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n            .replace(/[xy]/g, function (c) {\r\n                let r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n\r\n                return v.toString(16);\r\n            });\r\n\r\n}\r\nnm.makeGuid = makeGuid;\r\nexport default makeGuid;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/makeGuid.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapPopupCls from './mapPopupCls';\r\n\r\n/**\r\n * The single popup object catch is that it is common to multimap pages\r\n * @type {MapPopupCls}\r\n */\r\nexport const mapPopup = new MapPopupCls() as MapPopupCls;\r\nexport default mapPopup;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapPopup.ts","/**\r\n * Created by gavorhes on 12/16/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nimport makeGuid from '../util/makeGuid';\r\nimport mapMove from '../olHelpers/mapMove';\r\n\r\nlet nm = provide('collections');\r\nimport $ = require('jquery');\r\nimport {LayerBase} from \"../layers\";\r\n\r\nexport interface iLegendItem{\r\n    groupName: string;\r\n    collapse?: boolean;\r\n    addCheck?: boolean;\r\n    items: Array<iLegendItem|LayerBase>\r\n}\r\n\r\nexport interface iLegendOptions{\r\n    layerDivClasses?: string[]\r\n    legendTitle?: string\r\n    scaleDependent?: boolean\r\n}\r\n\r\nclass LayerGroup {\r\n    groupLayers: any;\r\n    groupLayersLookup: any;\r\n    groupGroupsLookup: any;\r\n    groupGroups: any;\r\n    itemIdArray: any;\r\n    groupId: any;\r\n    groupName: any;\r\n    allLayerArray: any;\r\n    parent: any;\r\n    allGroupArray: any;\r\n    allGroupLookup: any;\r\n    allLayerLookup: any;\r\n    collapse: boolean;\r\n    addCheck: boolean;\r\n    layerParentLookup: any;\r\n\r\n    /**\r\n     *\r\n     * @param {object} [groupConfig={}] - group configuration object\r\n     * @param {string} groupConfig.groupName - the group name\r\n     * @param {boolean} [groupConfig.collapse=false] - if the group should be collapsed initially\r\n     * @param {boolean} [groupConfig.addCheck=true] - if the group should have a checkbox controlling visibility of all layers\r\n     * @param {LayerGroup} [parent=undefined] - the parent group\r\n     */\r\n    constructor(groupConfig?: iLegendItem, parent?: LayerGroup) {\r\n        this.groupLayers = [];\r\n        this.groupLayersLookup = {};\r\n        this.groupGroups = [];\r\n        this.groupGroupsLookup = {};\r\n        this.itemIdArray = [];\r\n\r\n        if (typeof groupConfig == 'undefined') {\r\n            this.parent = null;\r\n            this.groupId = 'root';\r\n            this.groupName = 'root';\r\n            this.allGroupLookup = {root: this};\r\n            this.allGroupArray = [this];\r\n            this.allLayerArray = [];\r\n            this.allLayerLookup = {};\r\n            this.layerParentLookup = {};\r\n            this.collapse = false;\r\n            this.addCheck = false;\r\n        } else {\r\n            this.groupId = makeGuid();\r\n            this.parent = parent;\r\n            this.groupName = groupConfig.groupName;\r\n            this.collapse = typeof  groupConfig.collapse == 'boolean' ? groupConfig.collapse : false;\r\n            this.addCheck = typeof  groupConfig.addCheck == 'boolean' ? groupConfig.addCheck : true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {object} groupConfig - configuration object\r\n     * @param {string} groupConfig.groupName - the group name\r\n     * @param {boolean} groupConfig.collapse if the group should be collapsed initially\r\n     * @param {boolean} groupConfig.addCheck if the group should have a checkbox controlling visibility of all layers\r\n     * @param {Array<LayerGroup>} parents parent groups\r\n     * @returns {LayerGroup} the layer group just added\r\n     */\r\n    addGroup(groupConfig: iLegendItem, parents: string[]) {\r\n        let parent;\r\n        if (parents.length > 0) {\r\n            parent = parents[parents.length - 1];\r\n        } else {\r\n            parent = 'root';\r\n        }\r\n\r\n\r\n        /**\r\n         * @type {LayerGroup}\r\n         */\r\n        let parentGroup = this.allGroupLookup[parent];\r\n        let newGroup = new LayerGroup(groupConfig, parentGroup);\r\n        this.allGroupLookup[newGroup.groupId] = newGroup;\r\n        this.allGroupArray.push(newGroup);\r\n\r\n        parentGroup.groupGroups.push(newGroup);\r\n        parentGroup.groupGroupsLookup[newGroup.groupId] = newGroup;\r\n\r\n        if (parentGroup.itemIdArray.indexOf(newGroup.groupId) > 0) {\r\n            console.log(newGroup.groupId);\r\n            throw 'layer and group ids must be unique';\r\n        }\r\n        parentGroup.itemIdArray.push(newGroup.groupId);\r\n\r\n        return newGroup;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase} newLayer the layer to be added\r\n     * @param {Array} parents array\r\n     */\r\n    addLegendLayer(newLayer: LayerBase, parents: string[]) {\r\n        let parent;\r\n        if (parents.length > 0) {\r\n            parent = parents[parents.length - 1];\r\n        } else {\r\n            parent = 'root';\r\n        }\r\n\r\n        this.allLayerLookup[newLayer.id] = newLayer;\r\n        this.allLayerArray.push(newLayer);\r\n\r\n        /**\r\n         * @type {LayerGroup}\r\n         */\r\n        let parentGroup = this.allGroupLookup[parent];\r\n\r\n        parentGroup.groupLayers.push(newLayer);\r\n        parentGroup.groupLayersLookup[newLayer.id] = newLayer;\r\n        if (parentGroup.itemIdArray.indexOf(newLayer.id) > 0) {\r\n            console.log(newLayer.id);\r\n            throw 'layer and group ids must be unique';\r\n        }\r\n        parentGroup.itemIdArray.push(newLayer.id);\r\n\r\n        this.layerParentLookup[newLayer.id] = parentGroup;\r\n\r\n    }\r\n\r\n\r\n\r\n    getLegendHtml(legendId: string, options: iLegendOptions) {\r\n\r\n\r\n        let legendHtml = `<ul id=\"${legendId}\" class=\"legend-container\">`;\r\n\r\n        legendHtml += `<li>${options.legendTitle}<input type=\"checkbox\" checked id=\"suppress-by-extent-${legendId}\" class=\"suppress-by-extent\">` +\r\n            `<label title=\"Suppress layers not visible at this zoom level\" for=\"suppress-by-extent-${legendId}\">` +\r\n            `<span></span>` +\r\n            `</label></li>`;\r\n\r\n        legendHtml += this._buildLegend(this.itemIdArray, this, options.layerDivClasses) + '</ul>';\r\n\r\n        return legendHtml;\r\n    }\r\n\r\n    /**\r\n     * @param {Array} itemIds the items to process\r\n     * @param {LayerGroup} theGroup new group\r\n     * @param {Array} [layerDivClasses=[]] optional classes to apply to the layer divs\r\n     * @static\r\n     * @returns {string} html string\r\n     */\r\n    _buildLegend(itemIds: string[], theGroup: LayerGroup, layerDivClasses: string[]): string {\r\n\r\n        if (itemIds.length == 0) {\r\n            return '';\r\n        }\r\n\r\n        let theHml = '';\r\n\r\n        let itemId = itemIds[0];\r\n\r\n        if (theGroup.groupLayersLookup[itemId]) {\r\n\r\n            /**\r\n             * @type {LayerBase}\r\n             */\r\n            let lyr = theGroup.groupLayersLookup[itemId];\r\n            theHml += `<li id=\"${lyr.id}-layer-li\" class=\"legend-layer-li ${layerDivClasses.join(' ')}\">` + lyr.getLegendDiv() + '</li>';\r\n\r\n\r\n        } else if (theGroup.groupGroupsLookup[itemId]) {\r\n            /**\r\n             * type {LayerGroup}\r\n             */\r\n            let otherGroup = theGroup.groupGroupsLookup[itemId];\r\n\r\n            theHml += `<li>`;\r\n            theHml += `<div id=\"${otherGroup.groupId}-legend-layer-div\" ` +\r\n                `class=\"legend-layer-group  ${layerDivClasses.join(' ')}\">`;\r\n\r\n            if (otherGroup.addCheck) {\r\n                theHml += `<input type=\"checkbox\" checked id=\"${otherGroup.groupId}-group-chck\">` +\r\n                    `<label for=\"${otherGroup.groupId}-group-chck\" title=\"Click arrow to expand or collapse\">${otherGroup.groupName}</label>`;\r\n            } else {\r\n                theHml += `<label title=\"Click arrow to expand or collapse\">${otherGroup.groupName}</label>`;\r\n            }\r\n\r\n            theHml += `<span title=\"Expand/Collapse\" class=\"layer-group-expander`;\r\n            theHml += `${otherGroup.collapse ? ' legend-layer-group-initial-collapse' : ''}\">`;\r\n            theHml += otherGroup.collapse ? '&#9654;' : '&#9660;';\r\n            theHml += '</span>';\r\n\r\n            //parents.push(groupId);\r\n            theHml += '<ul>' + this._buildLegend(otherGroup.itemIdArray, otherGroup, layerDivClasses) + '</ul>';\r\n            theHml += '</div>';\r\n            theHml += '</li>';\r\n        }\r\n\r\n        return theHml + this._buildLegend(itemIds.slice(1), theGroup, layerDivClasses);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * a wrapper to make a legend\r\n */\r\nexport class LayerLegend {\r\n\r\n    $divElement: JQuery;\r\n    _legendItems: Array<iLegendItem|LayerBase>;\r\n    layerGroup: any;\r\n    legendId: string;\r\n\r\n    /**``\r\n     *\r\n     * @param {Array} legendItems array of layers or objects with {groupName:  {string}, collapse: {boolean}, addCheck: {boolean}, items: {Array}}\r\n     * @param {string} divId the div where the legend should be added\r\n     * @param {object} options for legend\r\n     * @param {Array} [options.layerDivClasses=[]] optional array of classes to be applied to the layer legend divs for custom styling\r\n     * @param {string} [options.legendTitle=Legend] the legend title\r\n     * @param {boolean} [options.scaleDependent=true] if legend display is scale dependent\r\n     */\r\n    constructor(legendItems: Array<iLegendItem|LayerBase>, divId: string, options: iLegendOptions = {}) {\r\n        for (let i of legendItems) {\r\n            if (typeof i == 'undefined') {\r\n                throw 'undefined item passed in array to legend constructor';\r\n            }\r\n        }\r\n\r\n        options.legendTitle = typeof options.legendTitle == 'string' ? options.legendTitle : 'Legend';\r\n        options.scaleDependent = typeof options.scaleDependent == 'boolean' ? options.scaleDependent : true;\r\n        options.layerDivClasses = options.layerDivClasses || [];\r\n\r\n        // if legend display is scale dependent, make sure the mapMove object is initialized first\r\n        if (options.scaleDependent) {\r\n            mapMove.checkInit();\r\n        }\r\n\r\n        this.$divElement = $('#' + divId);\r\n\r\n        this._legendItems = legendItems;\r\n\r\n        this.layerGroup = new LayerGroup();\r\n\r\n        this._buildTree(legendItems);\r\n\r\n        this.legendId = makeGuid();\r\n\r\n        this.$divElement.append(this.layerGroup.getLegendHtml(this.legendId, options));\r\n\r\n        for (let l of this.layerGroup.allLayerArray){\r\n            l.applyCollapse();\r\n        }\r\n\r\n        let _this = this;\r\n        //// if legend display is scale dependent, make sure the mapMove object is initialized first\r\n        if (options.scaleDependent) {\r\n            mapMove.checkInit();\r\n\r\n            mapMove.addCallback(function (ext, zoom, evt) {\r\n\r\n                if (typeof evt == 'undefined' || evt == 'change:resolution') {\r\n                    for (let lyr of this.layerGroup.allLayerArray) {\r\n                        let $lyrLi = $('#' + lyr.id + '-layer-li');\r\n                        if (zoom > lyr.maxZoom || zoom < lyr.minZoom) {\r\n                            $lyrLi.addClass('layer-not-visible');\r\n                        } else {\r\n                            $lyrLi.removeClass('layer-not-visible');\r\n                        }\r\n                    }\r\n                }\r\n            }, this, 100, true, 'legend1');\r\n        }\r\n\r\n        // <editor-fold desc=\"add event listeners\">\r\n\r\n        this.$divElement.find(\".suppress-by-extent\").change(function () {\r\n            let legendLayerLis = $('.legend-layer-li');\r\n            if (this.checked) {\r\n                legendLayerLis.removeClass('layer-force-show');\r\n            } else {\r\n                legendLayerLis.addClass('layer-force-show');\r\n            }\r\n        });\r\n\r\n        this.$divElement.find('.legend-check').change(function () {\r\n            let lyrId = this.id.replace('-legend-layer-check', '');\r\n            _this.layerGroup.allLayerLookup[lyrId].visible = this.checked;\r\n        });\r\n\r\n        this.$divElement.find('.legend-layer-group > input[type=checkbox]').change(function () {\r\n            $(this).siblings('ul').find('input[type=checkbox]').prop('checked', this.checked).trigger('change');\r\n        });\r\n\r\n        this.$divElement.find('.layer-group-expander').click(function () {\r\n            let $this = $(this);\r\n            $this.removeClass('legend-layer-group-initial-collapse');\r\n\r\n            $this.siblings('ul').slideToggle();\r\n\r\n            if ($this.hasClass('legend-layer-group-collapsed')){\r\n                $this.removeClass('legend-layer-group-collapsed');\r\n                $this.html('&#9660;');\r\n            } else {\r\n                $this.addClass('legend-layer-group-collapsed');\r\n                $this.html('&#9654;');\r\n            }\r\n        });\r\n\r\n        this.$divElement.find('.legend-layer-group-initial-collapse').trigger('click');\r\n        // </editor-fold>\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {Array} [legendItems=this._layerConfig] the legend items\r\n     * @param {Array} [parents=[]] the ordered list of groups in which this item is a member\r\n     * @private\r\n     */\r\n    _buildTree(legendItems: Array<iLegendItem|LayerBase>, parents?: string[]) {\r\n\r\n        if (legendItems.length == 0) {\r\n            return;\r\n        }\r\n\r\n        let oneItem = legendItems[0];\r\n\r\n        //reset the parent if the item is in the base array\r\n        if ((this._legendItems as Array<any>).indexOf(oneItem) > -1 || typeof parents == 'undefined') {\r\n            parents = [];\r\n        }\r\n\r\n        if (typeof (oneItem as iLegendItem).groupName !== 'undefined') {\r\n            let groupItem = legendItems[0];\r\n            let newGroup = this.layerGroup.addGroup(groupItem, parents);\r\n            parents.push(newGroup.groupId);\r\n            this._buildTree((oneItem as iLegendItem).items, parents);\r\n        } else {\r\n            /**\r\n             * @type {LayerBase}\r\n             */\r\n            let layerItem: LayerBase = legendItems[0] as LayerBase;\r\n\r\n            this.layerGroup.addLegendLayer(layerItem, parents);\r\n        }\r\n\r\n        this._buildTree(legendItems.slice(1), parents);\r\n    }\r\n}\r\n\r\nnm.LayerLegend = LayerLegend;\r\nexport default LayerLegend;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/LayerLegend.ts","/**\r\n * Created by gavorhes on 12/8/2015.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\n\r\n/**\r\n * base interaction\r\n */\r\nexport class MapInteractionBase {\r\n    _map: ol.Map;\r\n    _initialized: boolean;\r\n    _subtype: string;\r\n\r\n    /**\r\n     * map interaction base\r\n     * @param subtype - the interaction subtype\r\n     */\r\n    constructor(subtype: string) {\r\n        this._map = null;\r\n        this._initialized = false;\r\n        this._subtype = subtype;\r\n    }\r\n\r\n    /**\r\n     * base initializer, returns true for already initialized\r\n     * @param theMap - the ol Map\r\n     * @returns true for already initialized\r\n     */\r\n    init(theMap: ol.Map){\r\n        if (!this._initialized){\r\n            this._map = theMap;\r\n            this._initialized = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get reference to the ol map object\r\n     * @returns {ol.Map} the map object\r\n     */\r\n    get map() {\r\n        return this._map;\r\n    }\r\n\r\n    /**\r\n     * get if is initialized\r\n     * @returns {boolean} is initialized\r\n     */\r\n    get initialized() {\r\n        return this._initialized;\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     * @protected\r\n     */\r\n    _checkInit() {\r\n        if (!this.initialized) {\r\n            let msg = `${this._subtype} object not initialized`;\r\n            alert(msg);\r\n            console.log(msg);\r\n            throw msg;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     */\r\n    checkInit(){\r\n        this._checkInit();\r\n    }\r\n}\r\n\r\nnm.MapInteractionBase = MapInteractionBase;\r\nexport default MapInteractionBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapInteractionBase.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport {quickMapOptions, quickMapBase} from './quickMapBase';\r\nimport provide from '../util/provide';\r\nimport mapMove from './mapMove';\r\nimport mapPopup from './mapPopup';\r\nimport ol = require('custom-ol');\r\nlet nm = provide('olHelpers');\r\n\r\nexport {quickMapOptions} from './quickMapBase';\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param {object} [options={}] config options\r\n * @param {string} [options.divId=map] map div id\r\n * @param {object} [options.center={}] center config object\r\n * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n * @param {number} [options.zoom=7] zoom level\r\n * @param {number} [options.minZoom=undefined] min zoom\r\n * @param {number} [options.maxZoom=undefined] max zoom\r\n * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n * @returns {ol.Map} the ol map\r\n */\r\nexport function quickMap(options : quickMapOptions = {}): ol.Map {\r\n    let m = quickMapBase(options);\r\n    mapMove.init(m);\r\n    mapPopup.init(m);\r\n    return m;\r\n}\r\n\r\n\r\nnm.quickMap = quickMap;\r\nexport default quickMap;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/quickMap.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapMoveCls from './mapMoveCls';\r\n\r\n/**\r\n * The single map move object catch is that it is common to multimap pages\r\n * @type {MapMoveCls}\r\n */\r\n\r\nexport const mapMove = new MapMoveCls();\r\nexport default mapMove;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/mapMove.ts","/**\r\n * Created by gavorhes on 9/23/2016.\r\n */\r\nimport {quickMap} from '../../olHelpers/quickMap';\r\nimport {LayerEsriMapServer} from \"../../layers/LayerEsriMapServer\";\r\nimport LayerLegend from '../../collections/LayerLegend';\r\n\r\n\r\nlet map = quickMap();\r\n\r\nlet wisDotRegions = new LayerEsriMapServer(\r\n    'https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/Metamanager_regions/MapServer');\r\n\r\nlet sixYearPlan = new LayerEsriMapServer(\r\n    'https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/SixYearPlan/MapServer', {name: 'Six Year Plan', legendCollapse: true});\r\n\r\nmap.addLayer(wisDotRegions.olLayer);\r\nmap.addLayer(sixYearPlan.olLayer);\r\n\r\nlet layerArray = [\r\n    wisDotRegions,\r\n    sixYearPlan\r\n    // tipConfig.tipSegmentLayer,\r\n    // tipConfig.metamanagerSegments,\r\n    // {\r\n    //     groupName: 'ITS Inventory Layers',\r\n    //     collapse: true,\r\n    //     addCheck: false,\r\n    //     items: tipConfig.itsLayerCollection.layers\r\n    // }\r\n];\r\n\r\nlet legend = new LayerLegend(layerArray, 'legend-container', {});\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/_tests/demos/simple_map.ts","/**\r\n * Created by gavorhes on 10/3/2016.\r\n */\r\nimport ol = require('custom-ol');\r\n\r\n\r\nexport const proj4326 = new ol.proj.Projection({code: 'EPSG:4326'});\r\nexport const proj3857 = new ol.proj.Projection({code: 'EPSG:3857'});\r\nexport const proj3070 = new ol.proj.Projection({code: 'EPSG:3070'});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/olHelpers/projections.ts","import provide from './provide';\r\nlet nm = provide('util.checkDefined');\r\n\r\n/**\r\n * check if the input is undefined or null\r\n * @param input - input pointer\r\n * @returns true undefined or null\r\n */\r\nexport function undefinedOrNull (input: any): boolean{\r\n    \"use strict\";\r\n\r\n    return (typeof input === 'undefined' || input === null);\r\n}\r\n\r\nnm.undefinedOrNull = undefinedOrNull;\r\n\r\n\r\n/**\r\n * check if the input is defined and not null\r\n * @param input - input pointer\r\n * @returns true defined and not null\r\n */\r\nexport function definedAndNotNull (input: any): boolean{\r\n    \"use strict\";\r\n\r\n    return !(undefinedOrNull(input));\r\n}\r\n\r\nnm.definedAndNotNull = definedAndNotNull;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/checkDefined.ts"],"sourceRoot":""}