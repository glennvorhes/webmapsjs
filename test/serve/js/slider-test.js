!function(e){function t(l){if(i[l])return i[l].exports;var r=i[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,l){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=78)}({0:function(e,t,i){"use strict";function l(e){void 0===window.gv&&(window.gv={});for(var t=e.split("."),i=window.gv,l=0;l<t.length;l++){void 0===i[t[l]]&&(i[t[l]]={}),i=i[t[l]]}return i}Object.defineProperty(t,"__esModule",{value:!0}),l("util"),window.gv.util.provide=l,t.default=l},1:function(e,t){e.exports=$},56:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),r=i(1),o=l.default("collections"),s=function(){function e(e){this.label=e.label,this.presets=e.presets,this.domId=this.label.replace(/ /g,"").toLowerCase();for(var t=0,i=0,l=this.presets;i<l.length;i++){t+=l[i].value}if(100!=t)throw"preset sum does note equal 100"}return e}(),a=function(){function e(e){this._dropdownSelection=null,this._weight=null,this.name=e.label,this.domId=this.name.toLowerCase().replace(/ /g,"-"),this._locked=!1,this._min=0,this._max=100,this.labelLow=null,this.labelHigh=null,this.labelVal=null,this.slider=null,this.chk=null,this.atMin=!1,this.atMax=!1;for(var t='<select class="'+(1==e.yearOptions.length?"hidden-select":"show-select")+'" id="'+this.domId+'_chg">',i=0;i<e.yearOptions.length;i++){var l=e.yearOptions[i];t+='<option value="'+l.column+'">'+l.label+"</option>"}t+="</select>",this.selectedParamDefault=this.selectedParam,this.html='<div class="slider-div"><label for="'+this.domId+'_chk" class="slider-label">'+this.name+"</label>"+t+'<br><input id="'+this.domId+'_chk" type="checkbox" title="Lock/Unlock Slider"><label id="'+this.domId+'_low" class="low-high"></label><input id="'+this.domId+'" type="range" value="50" min="0" max="100" step="0.1"><label id="'+this.domId+'_high" class="low-high"></label><label id="'+this.domId+'_lbl" for="'+this.domId+'" class="percent-label"></label></div>'}return e.prototype.addToDom=function(e){e.append(this.html),this.labelLow=r("#"+this.domId+"_low"),this.labelHigh=r("#"+this.domId+"_high"),this.labelVal=r("#"+this.domId+"_lbl"),this.slider=r("#"+this.domId),this.selectionBox=r("#"+this.domId+"_chg"),this.chk=r("#"+this.domId+"_chk")},e.prototype.increment=function(e){var t=0;return e=Number(e.toFixed(1)),this._weight+=e,this._weight<this._min?(t=this._min-this._weight,this._weight=this._min,this.atMin=!0):this._weight>this._max?(t=this._max-this._weight,this._weight=this._max,this.atMax=!0):(this.atMin=!1,this.atMax=!1),this.slider.val(this._weight.toFixed(1)),this.labelVal.html(this._weight.toFixed(1)+"%"),t},e.prototype.setValAndDropDown=function(e,t){this.min=0,this.max=100,this.weight=e,this.slider.val(e.toFixed(1)),this.selectionBox.val(t),this.selectedParam=t,this.locked=!0},Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},set:function(e){this._locked=e,this.slider.prop("disabled",this._locked),this.selectionBox.prop("disabled",this._locked),this.chk.prop("checked",!this._locked)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this._min=Number(e.toFixed(1)),this._min<0&&(this._min=0),this.labelLow.html(this._min.toFixed(1)),this.slider.attr("min",this._min.toFixed(1)),this.atMin=this._weight==this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this._max=Number(e.toFixed(1)),this._max>100&&(this._max=100),this.labelHigh.html(this._max.toFixed(1)),this.slider.attr("max",this._max.toFixed(1)),this.atMax=this._weight==this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},set:function(e){this._weight=Number(e.toFixed(1)),this.labelVal.html(this._weight.toFixed(1)+"%"),this._weight<=this._min?(this.atMin=!0,this.atMax=!1):this._weight>=this._max?(this.atMin=!1,this.atMax=!0):(this.atMin=!1,this.atMax=!1)},enumerable:!0,configurable:!0}),e}();o._Slider=a;var n=function(){function e(e,t,i,l,o,n,h){var u=this;this.resetting=!1,this.reservedPercent=0,this.$container=r("#"+i),this.$container.addClass("slider-container"),this._changedCallback="function"==typeof h?h:function(){},this._$presetSelector=l,this._$regionSelector=o,this._$versionSelector=n,this._sliderList=[],this._sliderLookup={};for(var c=0;c<e.length;c++){var d=new a(e[c]);this._sliderList.push(d),this._sliderLookup[d.domId]=d,d.addToDom(this.$container)}this._presetArray=[],this._presetLookup={};for(var c=0;c<t.length;c++){var _=new s(t[c]),m=(c+1).toFixed();this._presetLookup[m]=_,this._presetArray.push(_),this._$presetSelector.append('<option value="'+m+'">'+_.label+"</option>")}this._lockedList=[],this._inRangeList=[],this._atMinList=[],this._atMaxList=[],this.lockedCount=10,this.notLockedCount=0,this._splitSliderArray(),this._$presetSelector.change(function(){u.setPresetValues(),u._runChangedCallback()}),this._$regionSelector.change(function(){u._runChangedCallback()}),this._$versionSelector.change(function(){u._runChangedCallback()}),this._$presetSelector.trigger("change"),this._addEventListeners()}return e.prototype._runChangedCallback=function(){this._changedCallback(this.paramWeightsRegionVersion)},Object.defineProperty(e.prototype,"changedCallback",{get:function(){return this._changedCallback},set:function(e){this._changedCallback=e,this._runChangedCallback()},enumerable:!0,configurable:!0}),e.prototype.setPresetValues=function(){for(var e=this._$presetSelector.val()||"1",t=this._presetLookup[e],i=0;i<t.presets.length;i++){var l=t.presets[i],r=this._sliderList[i];r.locked=!0,r.setValAndDropDown(l.value,l.column)}},e.prototype._splitSliderArray=function(){this._lockedList=[],this._inRangeList=[],this._atMinList=[],this._atMaxList=[];for(var e=0;e<this._sliderList.length;e++){var t=this._sliderList[e];t.locked?this._lockedList.push(t):t.atMin?this._atMinList.push(t):t.atMax?this._atMaxList.push(t):this._inRangeList.push(t)}this.lockedCount=this._lockedList.length,this.notLockedCount=this._sliderList.length-this.lockedCount},e.prototype._handleRemainder=function(e,t){if(0!=(e=Number(e.toFixed(1)))){this._splitSliderArray();for(var i=[],l=0;l<this._inRangeList.length;l++){var r=this._inRangeList[l];r.domId!=t&&i.push(r)}if(e>0)for(var l=0;l<this._atMaxList.length;l++){var r=this._atMaxList[l];r.domId!=t&&i.push(r)}else for(var l=0;l<this._atMinList.length;l++){var r=this._atMinList[l];r.domId!=t&&i.push(r)}if(0!=i.length){for(var o=-1*Number((e/i.length).toFixed(1)),s=0,l=0;l<i.length;l++)s+=i[l].increment(o);this._handleRemainder(s,t)}}},e.prototype.setValues=function(e){this.resetting=!0;for(var t in e)e.hasOwnProperty(t)&&this._sliderLookup[t].setValAndDropDown(e[t][0],e[t][1]);this.resetting=!1},e.prototype.getSum=function(){for(var e=0,t=0;t<this._sliderList.length;t++){var i=this._sliderList[t];e+=Number(i.weight.toFixed(1))}return e},e.prototype.getParams=function(){for(var e={},t=0;t<this._sliderList.length;t++){var i=this._sliderList[t];e[i.selectedParam]=Number(i.weight.toFixed(1))}return e},e.prototype._addEventListeners=function(){var e=this;this.$container.find('input[type="range"]').change(function(){if(!e.resetting){var t=r(this),i=this.id,l=e._sliderLookup[i],o=parseFloat(t.val()),s=l.weight,a=o-s;a=Number(a.toFixed(1)),l.weight=Number(o.toFixed(1)),e._handleRemainder(a,i);var n=Number(e.getSum().toFixed(1));if(n>100)e:for(;;)for(var h=0;h<e._sliderList.length;h++){var u=e._sliderList[h];if(u.domId!=i&&!u.locked&&!u.atMin&&(u.increment(-.1),n-=.1,"100.0"==n.toFixed(1)))break e}else if(n<100)e:for(;;)for(var h=0;h<e._sliderList.length;h++){var u=e._sliderList[h];if(u.domId!=i&&!u.locked&&!u.atMax&&(u.increment(.1),n+=.1,"100.0"==n.toFixed(1)))break e}e._$presetSelector.val("0"),e._runChangedCallback()}}),r(".show-select").change(function(){e.resetting||(e._sliderLookup[this.id.replace("_chg","")].selectedParam=r(this).val(),e._$presetSelector.val("0"),e._runChangedCallback())}),this.$container.find('input[type="checkbox"]').change(function(){var t=this;e._sliderLookup[t.id.replace("_chk","")].locked=!t.checked,e.reservedPercent=0,e.notLockedCount=0;for(var i=[],l=0;l<e._sliderList.length;l++){var r=e._sliderList[l];r.locked?e.reservedPercent+=r.weight:(i.push(r),e.notLockedCount++)}for(var l=0;l<e._sliderList.length;l++){var r=e._sliderList[l];r.locked||(r.max=100-e.reservedPercent)}if(1==i.length)i[0].min=i[0].weight;else for(var l=0;l<i.length;l++)i[l].min=0})},Object.defineProperty(e.prototype,"paramWeightsRegionVersion",{get:function(){return{paramWeights:this.getParams(),region:this._$regionSelector.val(),mmVersion:this._$versionSelector.val()}},enumerable:!0,configurable:!0}),e}();t.TipSliders=n,o.Sliders=n,t.default=n},78:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(56),r=i(1);i(1),t.tipConfig={$loadingGif:r("#loading-gif"),$presetSelector:r("#preset-selector"),$regionSelector:r("#region-selector"),$versionSelector:r("#version-selector"),tipSegmentLayerMinZoom:10,slidersConfig:[{label:"AADT",yearOptions:[{label:"1",column:"aadtyr_1"}]},{label:"AADT Future",yearOptions:[{label:"5",column:"aadtyr_5"},{label:"10",column:"aadtyr_10"},{label:"15",column:"aadtyr_15"},{label:"20",column:"aadtyr_20"}]},{label:"Growth",yearOptions:[{label:"5",column:"growth_5"},{label:"10",column:"growth_10"},{label:"15",column:"growth_15"},{label:"20",column:"growth_20"}]},{label:"Truck",yearOptions:[{label:"1",column:"trkdyr_1"},{label:"20",column:"trkdyr_20"}]},{label:"LOS",yearOptions:[{label:"1",column:"losyr_1"}]},{label:"LOS Future",yearOptions:[{label:"5",column:"losyr_5"},{label:"10",column:"losyr_10"},{label:"15",column:"losyr_15"},{label:"20",column:"losyr_20"}]},{label:"Crash Rate",yearOptions:[{label:1,column:"crash_rate"}]},{label:"Severity",yearOptions:[{label:1,column:"crash_severity"}]},{label:"Weather",yearOptions:[{label:1,column:"weather"}]},{label:"Event",yearOptions:[{label:1,column:"event"}]}],presetConfig:[{label:"Default TIP",presets:[{column:"aadtyr_1",value:10},{column:"aadtyr_20",value:7},{column:"growth_20",value:7},{column:"trkdyr_1",value:4},{column:"losyr_1",value:12},{column:"losyr_20",value:12},{column:"crash_rate",value:15},{column:"crash_severity",value:13},{column:"weather",value:9},{column:"event",value:11}]},{label:"Safety",presets:[{column:"aadtyr_1",value:20},{column:"aadtyr_20",value:0},{column:"growth_20",value:0},{column:"trkdyr_1",value:0},{column:"losyr_1",value:0},{column:"losyr_20",value:0},{column:"crash_rate",value:40},{column:"crash_severity",value:40},{column:"weather",value:0},{column:"event",value:0}]},{label:"Mobility Present",presets:[{column:"aadtyr_1",value:25},{column:"aadtyr_20",value:25},{column:"growth_20",value:0},{column:"trkdyr_1",value:25},{column:"losyr_1",value:25},{column:"losyr_20",value:0},{column:"crash_rate",value:0},{column:"crash_severity",value:0},{column:"weather",value:0},{column:"event",value:0}]},{label:"Mobility Future",presets:[{column:"aadtyr_1",value:0},{column:"aadtyr_20",value:25},{column:"growth_20",value:25},{column:"trkdyr_1",value:25},{column:"losyr_1",value:0},{column:"losyr_20",value:25},{column:"crash_rate",value:0},{column:"crash_severity",value:0},{column:"weather",value:0},{column:"event",value:0}]},{label:"Service",presets:[{column:"aadtyr_1",value:30},{column:"aadtyr_20",value:0},{column:"growth_20",value:10},{column:"trkdyr_1",value:0},{column:"losyr_1",value:30},{column:"losyr_20",value:30},{column:"crash_rate",value:0},{column:"crash_severity",value:0},{column:"weather",value:0},{column:"event",value:0}]},{label:"Freight Performance",presets:[{column:"aadtyr_1",value:20},{column:"aadtyr_20",value:0},{column:"growth_20",value:0},{column:"trkdyr_1",value:60},{column:"losyr_1",value:20},{column:"losyr_20",value:0},{column:"crash_rate",value:0},{column:"crash_severity",value:0},{column:"weather",value:0},{column:"event",value:0}]}]},t.tipConfig.$presetSelector.append('<option value="0" disabled=>Custom</option>');var o=new l.TipSliders(t.tipConfig.slidersConfig,t.tipConfig.presetConfig,"slider-container",t.tipConfig.$presetSelector,t.tipConfig.$regionSelector,t.tipConfig.$regionSelector,function(e){console.log(e)});window.glob=o,window.hat=o,window.bird=o}});
//# sourceMappingURL=slider-test.js.map