!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=34)}([function(e,t,o){"use strict";function n(e){void 0===window.gv&&(window.gv={});for(var t=e.split("."),o=window.gv,n=0;n<t.length;n++){void 0===o[t[n]]&&(o[t[n]]={}),o=o[t[n]]}return o}Object.defineProperty(t,"__esModule",{value:!0}),n("util"),window.gv.util.provide=n,t.default=n},function(e,t){e.exports=$},function(e,t){e.exports=ol},function(e,t,o){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),o(0).default("util").makeGuid=n,t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(12);t.mapPopup=new n.default,t.default=t.mapPopup},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=n.default("olHelpers"),a=function(){function e(e){this._map=null,this._initialized=!1,this._subtype=e}return e.prototype.init=function(e){this._initialized||(this._map=e,this._initialized=!0)},Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),e.prototype._checkInit=function(){if(!this.initialized){var e=this._subtype+" object not initialized";throw alert(e),console.log(e),e}},e.prototype.checkInit=function(){this._checkInit()},e}();t.MapInteractionBase=a,r.MapInteractionBase=a,t.default=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(11);t.mapMove=new n.default,t.default=t.mapMove},function(e,t,o){"use strict";function n(e){var t=r.quickMapBase(e);return i.default.init(t),l.default.init(t),t}Object.defineProperty(t,"__esModule",{value:!0});var r=o(13),a=o(0),i=o(6),l=o(4),s=a.default("olHelpers");t.quickMap=n,s.quickMap=n,t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(14),r=o(0),a=o(3),i=o(1),l=r.default("layers"),s=function(){function e(e,t){if(void 0===t&&(t={}),t=t||{},"string"!=typeof e)throw"Invalid URL";this._url=e,this._params="object"==typeof t.params?t.params:{},this._legendCollapse="boolean"==typeof t.legendCollapse&&t.legendCollapse,this._legendCheckbox="boolean"!=typeof t.legendCheckbox||t.legendCheckbox,this.id=t.id||a.default(),this._name=t.name||"Unnamed Layer",this.animate=!1,this._opacity="number"==typeof t.opacity?t.opacity:1,this._opacity>1?this._opacity=1:this._opacity<0&&(this._opacity=0),this._visible="boolean"!=typeof t.visible||t.visible,this._source=void 0,this._olLayer=void 0,this._loaded=!1,this._maxResolution=n.zoomToResolution(t.minZoom),void 0!==this._maxResolution&&(this._maxResolution+=1e-5),this._minResolution=n.zoomToResolution(t.maxZoom),this._minZoom="number"==typeof t.minZoom?t.minZoom:void 0,this._maxZoom="number"==typeof t.maxZoom?t.maxZoom:void 0,this._zIndex="number"==typeof t.zIndex?t.zIndex:0,this.loadCallback="function"==typeof t.loadCallback?t.loadCallback:function(){},this._legendContent="",this._legendCheckbox?(this._legendContent+='<input type="checkbox" '+(this.visible?"checked":"")+' class="legend-check" id="'+this.id+'-legend-layer-check"><span></span>',this._legendContent+='<label for="'+this.id+'-legend-layer-check" class="legend-layer-name">'+this.name+"</label>"):this._legendContent+='<label class="legend-layer-name">'+this.name+"</label>",this._$legendDiv=null,this._applyCollapseCalled=!1,this._addLegendContent("string"==typeof t.legendContent?t.legendContent:void 0)}return e.prototype._load=function(){return 1==this.loaded||(this._loaded=!0,!1)},e.prototype.getLegendDiv=function(){return'<div class="legend-layer-div" id="'+this.id+'-legend-layer-div">'+this._legendContent+"</div>"},e.prototype._addLegendContent=function(e){void 0===e&&(e=""),e.indexOf("<ul>")>-1&&(e='<span class="legend-items-expander" title="Expand/Collapse">&#9660;</span>'+e),this._legendContent+=e,this._$legendDiv=i("#"+this.id+"-legend-layer-div"),this._$legendDiv.length>0&&(this._$legendDiv.append(e),this.applyCollapse())},e.prototype.addLegendContent=function(e){this._addLegendContent(e)},e.prototype.applyCollapse=function(){if(this._applyCollapseCalled)return void console.log("collapse already applied");if(this._$legendDiv=i("#"+this.id+"-legend-layer-div"),this._$legendDiv.length>0){var e=this._$legendDiv.find(".legend-items-expander");e.length>0&&(this._applyCollapseCalled=!0,e.click(function(){var e=i(this);e.siblings("ul").slideToggle(),e.hasClass("legend-layer-group-collapsed")?(e.removeClass("legend-layer-group-collapsed"),e.html("&#9660;")):(e.addClass("legend-layer-group-collapsed"),e.html("&#9654;"))}),this._legendCollapse&&e.trigger("click"))}},e.prototype.refresh=function(){this.source&&this.source.refresh()},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animate",{get:function(){return this._animate},set:function(e){this._animate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendContent",{get:function(){return this._legendContent},set:function(e){this._legendContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minResolution",{get:function(){return this._minResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResolution",{get:function(){return this._maxResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minZoom",{get:function(){return this._minZoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoom",{get:function(){return this._maxZoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this.setVisible(e)},enumerable:!0,configurable:!0}),e.prototype.setVisible=function(e){this._visible=e,this.olLayer&&(this.olLayer.setVisible(this._visible),e&&!this._loaded&&this._load())},Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity=e,this.olLayer&&this.olLayer.setOpacity(this._opacity)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this.getSource()},enumerable:!0,configurable:!0}),e.prototype.getSource=function(){return this._source},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e},enumerable:!0,configurable:!0}),e.prototype.setZIndex=function(e){},Object.defineProperty(e.prototype,"olLayer",{get:function(){return this.getOlLayer()},enumerable:!0,configurable:!0}),e.prototype.getOlLayer=function(){return this._olLayer},e}();t.LayerBase=s,l.LayerBase=s,t.default=s},function(e,t,o){"use strict";function n(e){return void 0===e||null===e}function r(e){return!n(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),i=a.default("util.checkDefined");t.undefinedOrNull=n,i.undefinedOrNull=n,t.definedAndNotNull=r,i.definedAndNotNull=r},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(8),a=o(16),i=o(4),l=o(0),s=o(2),p=o(1),u=l.default("layers"),c=function(e){function t(t,o){void 0===o&&(o={});var n=e.call(this,t,o)||this;return n._source=new s.source.TileArcGISRest({url:""==n.url?void 0:n.url,params:void 0===o.showLayers?void 0:{layers:"show:"+o.showLayers.join(",")}}),n._olLayer=new s.layer.Tile({source:n._source,visible:n.visible,opacity:n.opacity,minResolution:n._minResolution,maxResolution:n._maxResolution}),n._olLayer.setZIndex(n._zIndex),o.addPopup="boolean"==typeof o.addPopup&&o.addPopup,n._esriFormat=new s.format.EsriJSON,n._popupRequest=null,n.addLegendContent(),o.addPopup&&i.default.addMapServicePopup(n),n}return n(t,e),t.prototype.addLegendContent=function(t){var o=this,n=this.url;"/"!==n[n.length-1]&&(n+="/"),n+="legend?f=pjson&callback=?",p.get(n,{},function(t){var n=a.makeMapServiceLegend(t);e.prototype.addLegendContent.call(o,n)},"json")},t.prototype.getPopupInfo=function(e){if(this.visible){var t=this.url;"/"!=t[t.length-1]&&(t+="/"),t+="identify?callback=?";var o=this;null!=this._popupRequest&&this._popupRequest.abort(),this._popupRequest=p.get(t,e,function(e){for(var t=0,n=e.results;t<n.length;t++){var r=n[t],a='<table class="esri-popup-table">';for(var l in r.attributes)if(r.attributes.hasOwnProperty(l)){var s=r.attributes[l];if(null==s||"null"==s.toString().toLowerCase())continue;var p=l;p.length>14&&(p=p.slice(0,11)+"..."),a+="<tr><td>"+p+"</td><td>"+s+"</td></tr>"}a+="</table>",i.default.addMapServicePopupContent(o._esriFormat.readFeature(r),o,a,r.layerName)}},"json"),this._popupRequest.always(function(){o._popupRequest=null})}},Object.defineProperty(t.prototype,"source",{get:function(){return e.prototype.getSource.call(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"olLayer",{get:function(){return e.prototype.getOlLayer.call(this)},enumerable:!0,configurable:!0}),t}(r.LayerBase);t.LayerEsriMapServer=c,u.LayerEsriMapServer=c,t.default=c},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(5),a=o(9),i=o(0),l=o(3),s=o(1),p=i.default("olHelpers"),u=function(e){function t(){var t=e.call(this,"map move")||this;return t._arrLyrRequest=[],t._arrLyrTimeout=[],t._arrLayer=[],t._lookupLayer={},t._mapMoveCallbacks=[],t._mapMoveCallbacksLookup={},t._mapMoveCallbackDelays=[],t._mapMoveCallbackContext=[],t._mapMoveCallbackTimeout=[],t._mapExtent=void 0,t._zoomLevel=void 0,t}return n(t,e),t.prototype.init=function(t){var o=this;e.prototype.init.call(this,t),this.map.getView().on(["change:center","change:resolution"],function(e){o._updateMapExtent();for(var t=0;t<o._arrLayer.length;t++)o.triggerLyrLoad(o._arrLayer[t],t,e.type);for(var t=0;t<o._mapMoveCallbacks.length;t++)o.triggerMoveCallback(t,e.type)})},t.prototype._updateMapExtent=function(){var e=this.map.getView();this._zoomLevel=e.getZoom();var t=e.calculateExtent(this.map.getSize());this._mapExtent={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},Object.defineProperty(t.prototype,"mapExtent",{get:function(){return this._mapExtent||this._updateMapExtent(),this._mapExtent},enumerable:!0,configurable:!0}),t.prototype.triggerLyrLoad=function(e,t,o){if(a.undefinedOrNull(e)&&a.undefinedOrNull(t))throw"need to define lyr or index";a.definedAndNotNull(e)&&a.undefinedOrNull(t)?t=this._arrLayer.indexOf(e):a.undefinedOrNull(e)&&a.definedAndNotNull(t)&&(e=this._arrLayer[t]),null!=this._arrLyrTimeout[t]&&(clearTimeout(this._arrLyrTimeout[t]),this._arrLyrTimeout[t]=null),null!=this._arrLyrRequest[t]&&4!=this._arrLyrRequest[t]&&(this._arrLyrRequest[t].abort(),this._arrLyrRequest[t]=null);var n=function(){};if(e.mapMoveBefore(this._zoomLevel,o)){e.mapMoveMakeGetParams(this._mapExtent,this._zoomLevel);var r=this;n=function(){function o(e,t){var o=this;this._arrLyrRequest[t]=s.get(e.url,e.mapMoveParams,function(t){e.mapMoveCallback(t),e.loadCallback()},"json").fail(function(t){"abort"!=t.statusText&&(console.log("failed"),console.log(e.url),console.log(e.mapMoveParams))}).always(function(){o._arrLyrTimeout[t]=null,o._arrLyrRequest[t]=null})}o.call(r,e,t)}}else e.clear();this._arrLyrTimeout[t]=setTimeout(n,e.onDemandDelay)},t.prototype.triggerMoveCallback=function(e,t,o){if(void 0===e&&void 0===o)throw"either the function index or the id must be defined";if("number"!=typeof e&&(e=this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[o])),e<0)return void console.log("function not found");null!=this._mapMoveCallbackTimeout[e]&&(clearTimeout(this._mapMoveCallbackTimeout[e]),this._mapMoveCallbackTimeout[e]=null);var n=this._mapMoveCallbackContext[e],r=this._mapMoveCallbacks[e],a=this,i=function(){null!==n?r.call(n,a._mapExtent,a._zoomLevel,t):r(a._mapExtent,a._zoomLevel,t)};this._mapMoveCallbackTimeout[e]=setTimeout(i,this._mapMoveCallbackDelays[e])},t.prototype.addVectorLayer=function(e,t){if(void 0===t&&(t=!0),this._arrLayer.indexOf(e)>-1)return void console.log("already added "+e.name+" to map move");this._checkInit(),this._arrLyrRequest.push(null),this._arrLyrTimeout.push(null),this._arrLayer.push(e),this._lookupLayer[e.id]=e,(t="boolean"!=typeof t||t)&&(void 0===this._mapExtent&&this._updateMapExtent(),this.triggerLyrLoad(e,this._arrLayer.length-1))},t.prototype.addCallback=function(e,t,o,n,r){if(this._mapMoveCallbacks.indexOf(e)>-1)return void console.log("this function already added to map move");this._checkInit(),r||(r=l.default()),this._mapMoveCallbacks.push(e),this._mapMoveCallbacksLookup[r]=r,this._mapMoveCallbackDelays.push("number"==typeof o?o:50),this._mapMoveCallbackContext.push(a.definedAndNotNull(t)?t:null),this._mapMoveCallbackTimeout.push(null),(n="boolean"!=typeof n||n)&&(void 0===this._mapExtent&&this._updateMapExtent(),this.triggerMoveCallback(this._mapMoveCallbacks.length-1))},t}(r.default);t.MapMoveCls=u,p.MapMoveCls=u,t.default=u},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(5),a=o(0),i=o(2),l=o(1),s=a.default("olHelpers"),p=function(){function e(e,t,o,n,r){this.feature=e,this.layer=t,this.layerIndex=o,this.selectionLayer=n,this.popupContent="",this.esriLayerName="string"==typeof r?r:void 0}return Object.defineProperty(e.prototype,"layerName",{get:function(){return"string"==typeof this.esriLayerName?this.esriLayerName:this.layer.name},enumerable:!0,configurable:!0}),e}();t.FeatureLayerProperties=p;var u=function(e){function t(){var t=e.call(this,"map popup")||this;return t._arrPopupLayerIds=[],t._arrPopupLayerNames=[],t._arrPopupLayers=[],t._arrPopupOlLayers=[],t._arrPopupContentFunction=[],t._$popupContainer=void 0,t._$popupContent=void 0,t._$popupCloser=void 0,t._popupOverlay=void 0,t._selectionLayers=[],t._selectionLayerLookup={},t._mapClickFunctions=[],t._popupChangedFunctions=[],t._esriMapServiceLayers=[],t._popupOpen=!1,t._popupCoordinate=null,t._passThroughLayerFeatureArray=[],t._currentPopupIndex=-1,t._popupContentLength=0,t}return n(t,e),t.prototype.init=function(t){var o=this;e.prototype.init.call(this,t);var n,r=this.map.getTarget();n=l("string"==typeof r?"#"+r:r),n.append('<div class="ol-popup"><span class="ol-popup-closer">X</span><div class="popup-content"></div></div>'),this._$popupContainer=n.find(".ol-popup"),this._$popupContent=n.find(".popup-content"),this._$popupCloser=n.find(".ol-popup-closer");var a=function(e){return i.easing.inAndOut(e)};return this._popupOverlay=new i.Overlay({element:this._$popupContainer[0],autoPan:!0,autoPanAnimation:{duration:250,source:t.getView().getCenter(),easing:a}}),this._map.addOverlay(this._popupOverlay),this._$popupCloser.click(function(e){o.closePopup()}),this._map.on("singleclick",function(e){if(o.closePopup(),o._popupCoordinate=e.coordinate,o._esriMapServiceLayers.length>0)for(var t={geometry:e.coordinate.join(","),geometryType:"esriGeometryPoint",layers:"all",sr:o._map.getView().getProjection().getCode().split(":")[1],mapExtent:o._map.getView().calculateExtent(o._map.getSize()).join(","),imageDisplay:o._map.getSize().join(",")+",96",returnGeometry:!0,tolerance:15,f:"pjson"},n=0,r=o._esriMapServiceLayers;n<r.length;n++){var a=r[n];a.getPopupInfo(t)}var i=o._featuresAtPixel(e.pixel);o._passThroughLayerFeatureArray=[],o._currentPopupIndex=-1;for(var l=0;l<i.length;l++){var s=i[l],p=s.feature.getProperties(),u=o._arrPopupContentFunction[s.layerIndex](p,o._$popupContent);u===!1||("string"==typeof u?(s.popupContent=u,o._passThroughLayerFeatureArray.push(s)):s.selectionLayer.getSource().addFeature(s.feature))}o._popupContentLength=o._passThroughLayerFeatureArray.length,o._currentPopupIndex=-1;var c='<div class="ol-popup-nav">';c+='<span class="previous-popup ol-popup-nav-arrow">&#9664;</span>',c+='<span class="next-popup ol-popup-nav-arrow">&#9654;</span>',c+='<span class="current-popup-item-number" style="font-weight: bold;"></span>',c+="<span>&nbsp;of&nbsp;</span>",c+='<span class="popup-content-length" style="font-weight: bold;">'+o._popupContentLength+"</span>",c+="<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>",c+='<span class="current-popup-layer-name"></span>',c+="</div>",c+='<div class="ol-popup-inner">',c+="</div>",o._$popupContent.html(c),o._$popupContent.find(".previous-popup").click(function(){1!=o._popupContentLength&&(0==o._currentPopupIndex?o._currentPopupIndex=o._popupContentLength-1:o._currentPopupIndex--,o._triggerFeatSelect())});var d=o._$popupContent.find(".next-popup");d.click(function(){1==o._popupContentLength&&o._currentPopupIndex>-1||(o._currentPopupIndex==o._popupContentLength-1?o._currentPopupIndex=0:o._currentPopupIndex++,o._triggerFeatSelect())}),o._popupContentLength>0&&(d.trigger("click"),o._popupOverlay.setPosition(o._popupCoordinate),o._$popupContent.scrollTop(0),o._popupOpen=!0)}),this._map.on("pointermove",function(e){if(!e.dragging){var t=o.map.getEventPixel(e.originalEvent),n=o.map.hasFeatureAtPixel(t,function(e){for(var t=0,n=o._arrPopupOlLayers;t<n.length;t++){if(e==n[t])return!0}return!1});o.map.getTargetElement().style.cursor=n?"pointer":""}}),!0},t.prototype._triggerFeatSelect=function(){var e=this._$popupContent.find(".current-popup-item-number"),t=this._$popupContent.find(".ol-popup-inner"),o=this._$popupContent.find(".current-popup-layer-name");this.clearSelection();var n=this._passThroughLayerFeatureArray[this._currentPopupIndex];e.html((this._currentPopupIndex+1).toFixed()),o.html(n.layerName),t.html(n.popupContent),n.selectionLayer.getSource().addFeature(n.feature);for(var r=0,a=this._popupChangedFunctions;r<a.length;r++){(0,a[r])(this._$popupContent)}},t.prototype.addMapServicePopupContent=function(e,t,o,n){var r=new p(e,t,this._popupContentLength,this._selectionLayerLookup[t.id],n);r.popupContent=o,this._passThroughLayerFeatureArray.push(r),this._popupContentLength++,l(".popup-content-length").html(this._popupContentLength.toFixed()),this._popupOpen||(this._$popupContent.find(".next-popup").trigger("click"),this._popupOverlay.setPosition(this._popupCoordinate),this._$popupContent.scrollTop(0),this._popupOpen=!0)},t.prototype._featuresAtPixel=function(e){var t=this,o=[];return this.map.forEachFeatureAtPixel(e,function(e,n){var r=t._arrPopupOlLayers.indexOf(n);r>-1&&o.push(new p(e,t._arrPopupLayers[r],r,t._selectionLayers[r]))}),o},t.prototype.closePopup=function(){return this._checkInit(),this._popupOpen=!1,this._popupOverlay.setPosition(void 0),this._$popupCloser[0].blur(),this.clearSelection(),this._$popupContent.html(""),!1},t.prototype.addPopupChangedFunction=function(e){this._popupChangedFunctions.push(e)},t.prototype._addPopupLayer=function(e,t){this._checkInit(),t=t||{},t.color=t.color||"rgba(255,170,0,0.5)",t.width=t.width||10;var o;o=t.olStyle?t.olStyle:new i.style.Style({stroke:new i.style.Stroke({color:t.color,width:t.width}),image:new i.style.Circle({radius:7,fill:new i.style.Fill({color:t.color}),stroke:new i.style.Stroke({color:t.color,width:1})}),fill:new i.style.Fill({color:t.color})});var n=new i.layer.Vector({source:new i.source.Vector,style:o});return n.setZIndex(100),this._selectionLayers.push(n),this._selectionLayerLookup[e.id]=n,this.map.addLayer(n),n},t.prototype.addVectorPopup=function(e,t,o){var n=this._addPopupLayer(e,o);return this._arrPopupLayerIds.push(e.id),this._arrPopupLayerNames.push(e.name),this._arrPopupLayers.push(e),this._arrPopupOlLayers.push(e.olLayer),this._arrPopupContentFunction.push(t),n},t.prototype.removeVectorPopup=function(e){var t=this._arrPopupLayerIds.indexOf(e.id);t>-1&&(this._arrPopupLayerIds.splice(t,1),this._arrPopupLayerNames.splice(t,1),this._arrPopupLayers.splice(t,1),this._arrPopupOlLayers.splice(t,1),this._arrPopupContentFunction.splice(t,1),this._selectionLayers.splice(t,1),delete this._selectionLayerLookup[e.id])},t.prototype.addMapServicePopup=function(e,t){var o=this._addPopupLayer(e,t);return this._esriMapServiceLayers.push(e),o},t.prototype.clearSelection=function(){this._checkInit();for(var e=0;e<this._selectionLayers.length;e++)this._selectionLayers[e].getSource().clear();for(var t=0,o=this._mapClickFunctions;t<o.length;t++){(0,o[t])()}},t.prototype.addMapClickFunction=function(e){this._mapClickFunctions.push(e)},t}(r.default);t.MapPopupCls=u,s.MapPopupCls=u,t.default=u},function(e,t,o){"use strict";function n(e){e=e||{},e.divId=e.divId||"map",e.center=e.center||{x:-10018378,y:5574910},e.zoom="number"==typeof e.zoom?e.zoom:7,e.baseSwitcher="boolean"!=typeof e.baseSwitcher||e.baseSwitcher,e.fullScreen="boolean"==typeof e.fullScreen&&e.fullScreen,i("#"+e.divId).css("position","relative");var t=new a.layer.Tile({source:new a.source.OSM});if(e.baseSwitcher,e.zoom<0||e.zoom>28)throw"zoom out of range";if(e.center.x>=-180&&e.center.x<=180&&e.center.y>=-90&&e.center.y<=90){var o=new a.geom.Point([e.center.x,e.center.y]);new a.proj.Projection({code:"EPSG:4326"}),o.transform(new a.proj.Projection({code:"EPSG:4326"}),new a.proj.Projection({code:"EPSG:3857"}));var n=o.getCoordinates();e.center.x=n[0],e.center.y=n[1]}var r=a.control.defaults({attributionOptions:{collapsible:!1}}),l=new a.View({center:[e.center.x,e.center.y],zoom:e.zoom,minZoom:e.minZoom,maxZoom:e.maxZoom}),s=new a.Map({layers:[t],target:e.divId,controls:r,view:l});return e.fullScreen&&s.addControl(new a.control.FullScreen({})),s}Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),a=o(2),i=o(1),l=r.default("olHelpers");t.quickMapBase=n,l.quickMapBase=n,t.default=n},function(e,t,o){"use strict";function n(e){return"number"==typeof e?e%1==0&&e>=0&&e<=28?l[e]:void console.log("invalid zoom level provided: "+e):void 0}function r(e){for(var t=0;t<l.length;t++)if(e>=l[t])return t;return 0}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),i=a.default("olHelpers.zoomResolutionConvert"),l=[156543.03392804097,78271.51696402048,39135.75848201024,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.29858214173896974,.14929107086948487,.07464553543474244,.03732276771737122,.01866138385868561,.009330691929342804,.004665345964671402,.002332672982335701,.0011663364911678506,.0005831682455839253];t.zoomToResolution=n,i.zoomToResolution=n,t.resolutionToZoom=r,i.resolutionToZoom=r},function(e,t){e.exports=jquery-ui},function(e,t,o){"use strict";function n(e,t){return"rgba("+e[0]+","+e[1]+","+e[2]+","+t+")"}function r(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e){var t=e.drawingInfo.renderer,o=null;switch(t.type){case"simple":switch(e.geometryType){case"esriGeometryPoint":o=new _(e,y);break;case"esriGeometryPolyline":o=new _(e,h);break;case"esriGeometryPolygon":o=new _(e,f);break;default:console.log(e),alert(e.geometryType+" not handled")}break;case"uniqueValue":switch(e.geometryType){case"esriGeometryPoint":o=new v(e,y);break;case"esriGeometryPolyline":o=new v(e,h);break;case"esriGeometryPolygon":o=new v(e,f);break;default:console.log(e),alert(e.geometryType+" not handled")}break;default:alert("not handled renderer type: "+t.type)}return null==o?{style:void 0,legend:""}:{style:o.olStyle,legend:o.legendHtml}}function i(e,t){void 0===t&&(t=!1),t="boolean"==typeof t&&t;var o=e.layerName,n=e.legend,a="";if(t||(a+='<span class="legend-layer-subitem">'+o+"</span>"),1==n.length)a='<img class="legend-layer-icon" height="17" src="data:image/png;base64,'+n[0].imageData+'">';else{t||(a+='<span class="legend-items-expander" title="Expand/Collapse">&#9660;</span>'),a+="<ul>";for(var i=0;i<n.length;i++)a+="<li>",a+='<span class="legend-layer-subitem">'+r(n[i].label)+"</span>",a+='<img class="legend-layer-icon" height="17" src="data:image/png;base64,'+n[i].imageData+'">',a+="</li>";a+="</ul>"}return t||(a='<span class="legend-layer-subitem">'+o+"</span>"+a),a}function l(e){var t="",o=e.layers;if(1==o.length)t+=i(o[0],!0);else{t+="<ul>";for(var n=0;n<o.length;n++)t+="<li>"+i(o[n])+"</li>";t+="</ul>"}return t}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var p=o(0),u=o(2),c=p.default("olHelpers.esriToOlStyle");c.htmlEscape=r;var d=function(){function e(e,t){this.symbolObj=e,this.opacity=t,this.olStyle=void 0,this.legendHtml=""}return e}(),y=function(e){function t(t,o){var r=e.call(this,t,o)||this;switch(r.symbolObj.type){case"esriSMS":var a=n(r.symbolObj.color,r.opacity),i=n(r.symbolObj.outline.color,r.opacity),l=r.symbolObj.outline.width,s=r.symbolObj.size;r.olStyle=new u.style.Style({image:new u.style.Circle({radius:s,fill:new u.style.Fill({color:a}),stroke:new u.style.Stroke({color:i,width:l})})}),r.legendHtml='<span class="legend-layer-icon" style="color: '+a+'">&#9679;</span>';break;case"esriPMS":r.olStyle=new u.style.Style({image:new u.style.Icon({src:"data:image/png;base64,"+r.symbolObj.imageData})}),r.legendHtml='<img class="legend-layer-icon" height="17" src="data:image/png;base64,'+r.symbolObj.imageData+'">';break;default:console.log(r.symbolObj),alert("Point symbol does not handle symbol type: "+r.symbolObj.type)}return r}return s(t,e),t}(d),h=function(e){function t(t,o){var r=e.call(this,t,o)||this;switch(r.symbolObj.type){case"esriSLS":var a=n(r.symbolObj.color,r.opacity),i=r.symbolObj.width;r.olStyle=new u.style.Style({stroke:new u.style.Stroke({color:a,width:i})}),r.legendHtml='<span class="legend-layer-icon" ',r.legendHtml+='style="',r.legendHtml+="background-color: "+a+";",r.legendHtml+="width: 40px;",r.legendHtml+="height: 4px;",r.legendHtml+="position: relative;",r.legendHtml+="display: inline-block;",r.legendHtml+="top: -1px;",r.legendHtml+='"></span>';break;default:console.log(r.symbolObj),alert("Line symbol does not handle symbol type: "+r.symbolObj.type)}return r}return s(t,e),t}(d),f=function(e){function t(t,o){var r=e.call(this,t,o)||this;switch(r.symbolObj.type){case"esriSFS":var a=n(r.symbolObj.color,r.opacity),i=n(r.symbolObj.outline.color,r.opacity),l=r.symbolObj.outline.width;r.olStyle=new u.style.Style({stroke:new u.style.Stroke({color:i,width:l}),fill:new u.style.Fill({color:a})}),r.legendHtml='<span class="legend-layer-icon" ',r.legendHtml+='style="',r.legendHtml+="background-color: "+a+";",r.legendHtml+="border: solid "+i+" 1px;",r.legendHtml+="width: 40px;",r.legendHtml+="height: 9px;",r.legendHtml+="position: relative;",r.legendHtml+="display: inline-block;",r.legendHtml+="top: 2px;",r.legendHtml+='"></span>';break;default:console.log(r.symbolObj),alert("Polygon symbol does handle symbol type: "+r.symbolObj.type)}return r}return s(t,e),t}(d),m=function(){function e(e){this.opacity=(100-(e.drawingInfo.transparency||0))/100,this.renderer=e.drawingInfo.renderer,this.olStyle=void 0,this.legendHtml=""}return e}(),_=function(e){function t(t,o){var n=e.call(this,t)||this;n.symbol=n.renderer.symbol;var r=new o(n.symbol,n.opacity);return n.olStyle=r.olStyle,n.legendHtml=r.legendHtml,n}return s(t,e),t}(m),v=function(e){function t(t,o){var n=e.call(this,t)||this;if(n.uniqueValueInfos=n.renderer.uniqueValueInfos,n.propertyName=n.renderer.field1,n.defaultSymbol=n.renderer.defaultSymbol,n.defaultSymbol){var a=new o(n.defaultSymbol,n.opacity);n.defaultStyle=a.olStyle,n.defaultLabelHtml='<span class="legend-layer-subitem">'+r(n.renderer.defaultLabel)+"</span>"+a.legendHtml}else n.defaultStyle=void 0,n.defaultLabelHtml="other";n.valueArray=[],n.labelArray=[],n.legendArray=[],n.propertyStyleLookup={};for(var i=0,l=n.uniqueValueInfos;i<l.length;i++){var s=l[i];n.labelArray.push(s.label),n.valueArray.push(s.value);var p=new o(s.symbol,n.opacity);n.legendArray.push('<span class="legend-layer-subitem">'+r(s.label)+"</span>"+p.legendHtml),n.propertyStyleLookup[s.value]=p.olStyle}n.olStyle=function(e){var t=e.getProperties(),o=t[n.propertyName];return void 0!==n.propertyStyleLookup[o]?[n.propertyStyleLookup[o]]:[n.defaultStyle]},null!==n.defaultLabelHtml&&n.legendArray.push(n.defaultLabelHtml),n.legendHtml="<ul>";for(var u=0,c=n.legendArray;u<c.length;u++){var d=c[u];n.legendHtml+="<li>"+d+"</li>"}return n.legendHtml+="</ul>",n}return s(t,e),t}(m);t.makeFeatureServiceLegendAndSymbol=a,c.makeFeatureServiceLegendAndSymbol=a,t.makeMapServiceLegend=l,c.makeMapServiceLegend=l},,function(e,t,o){"use strict";function n(e){var t=new Date(e),o=t.toLocaleTimeString().split(" "),n=o[0].split(":");return n=n.slice(0,2),t.toLocaleDateString()+"<br>"+n.join(":")+" "+o[1]}Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),a=o(19),i=o(1),l=r.default("domUtil"),s=function(){function e(e,t,o){void 0===t&&(t=function(){}),void 0===o&&(o={});var n=this;o.min="number"==typeof o.min?o.min:0,o.max="number"==typeof o.max?o.max:100,o.val="number"==typeof o.val?o.val:0,o.step="number"==typeof o.step?o.step:5,o.playInterval="number"==typeof o.playInterval?o.playInterval:500,o.showAsDate="boolean"==typeof o.showAsDate&&o.showAsDate,"string"==typeof e?this._container=i("#"+e):void 0!==e.style?this._container=i(e):this._container=e,this._container.addClass("media-control-container"),this._playInterval=o.playInterval,this._changeFunc=t,this._showAsDate=o.showAsDate,this._currentValue=void 0,this._min=void 0,this._max=void 0,this._step=void 0,this._playing=!1,this._container.append('<span class="media-player-button media-back"></span><span class="media-player-button media-play"></span><span class="media-player-button media-pause media-disabled"></span><span class="media-player-button media-stop media-disabled" ></span><span class="media-player-button media-ahead"></span><input type="range"><div class="media-control-value-label-container"><span class="media-control-value-label-min"></span><span class="media-control-value-label-val"></span><span class="media-control-value-label-max"></span></div>');var r=this._container.find(".media-play");this._$btnStop=this._container.find(".media-stop");var l=this._container.find(".media-ahead"),s=this._container.find(".media-back");this._$slider=this._container.find("input[type=range]"),this._$valLabelMin=this._container.find(".media-control-value-label-min"),this._$valLabelVal=this._container.find(".media-control-value-label-val"),this._$valLabelMax=this._container.find(".media-control-value-label-max"),this.setMinMaxValueStep(o.min,o.max,o.val,o.step),a.rangeChange(this._$slider,function(e){n.currentValue=e},100);var p=this;r.click(function(){i(this).addClass("media-disabled"),p._$btnStop.removeClass("media-disabled"),l.addClass("media-locked"),s.addClass("media-locked"),p._$slider.prop("disabled",!0),p._playing=!0,p._interval=setInterval(function(){p.currentValue+=p._step},p._playInterval)}),this._$btnStop.click(function(){clearInterval(p._interval),i(this).addClass("media-disabled"),r.removeClass("media-disabled"),l.removeClass("media-locked"),s.removeClass("media-locked"),p._$slider.prop("disabled",!1),p._playing=!1}),l.click(function(){p.currentValue=p.currentValue+p._step}),s.click(function(){p.currentValue=p.currentValue-p._step})}return e.prototype.stopPlaying=function(){this._playing&&this._$btnStop.trigger("click")},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentValue",{get:function(){return this._currentValue},set:function(e){e>this._max?e=this._min:e<this._min&&(e=this._max),this._currentValue=e,this._$slider.val(this._currentValue.toFixed(2)),this._showAsDate?this._$valLabelVal.html(n(this.currentValue)):this._$valLabelVal.html(this.currentValue.toString()),this._changeFunc(e)},enumerable:!0,configurable:!0}),e.prototype.setMinMaxValueStep=function(e,t,o,r){this._min=e,this._max=t,o="number"==typeof o?o:e,r="number"==typeof r?r:(t-e)/20,this._currentValue=o,this._step=r,this._$slider.prop("min",this.min.toString()),this._$slider.prop("max",this.max.toString()),this._$slider.prop("step",this.step.toString()),this._$slider.val(this.currentValue.toString()),this._showAsDate?(this._$valLabelMin.html(n(this._min)),this._$valLabelVal.html(n(this.currentValue)),this._$valLabelMax.html(n(this._max))):(this._$valLabelMin.html(this._min.toString()),this._$valLabelVal.html(this.currentValue.toString()),this._$valLabelMax.html(this._max.toString()))},Object.defineProperty(e.prototype,"changeFunction",{set:function(e){this._changeFunc=e},enumerable:!0,configurable:!0}),e}();t.MediaControl=s,l.MediaControl=s},function(e,t,o){"use strict";function n(e,t){var o=parseFloat(this.value),n=parseFloat(this.min),r=parseFloat(this.max);r-o<parseFloat(this.step)&&(o=r);var i=(o-n)/(r-n);"number"==typeof a&&o==a||(a=o,e(o,i,t))}function r(e,t,o){return o="number"==typeof o?o:75,e.mouseenter(function(){s=!0}),e.mouseleave(function(){s=!1,p=!1}),e.mousedown(function(){p=!0}),e.mouseup(function(){p=!1}),e.mousemove(function(e){if(s&&p&&(c=!0,a!=this.value)){a=this.value,null!=u&&clearTimeout(u);var r=this;u=setTimeout(function(){n.call(r,t,e),u=null},o)}}),e.keyup(function(e){37!=e.keyCode&&39!=e.keyCode||n.call(this,t,e)}),e.change(function(e){if(c)return void(c=!1);n.call(this,t,e)}),this}Object.defineProperty(t,"__esModule",{value:!0});var a,i=o(0),l=i.default("domUtil"),s=!1,p=!1,u=null,c=!1;t.rangeChange=r,l.rangeChange=r},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(8),a=o(6),i=o(0),l=o(2),s=o(1),p=i.default("layers"),u=function(e){function t(t,o){void 0===o&&(o={});var n=e.call(this,t,o)||this;return o=o,""==n.url.trim()&&(n._loaded=!0),n._style=void 0===o.style?void 0:o.style,n.visible?n._autoLoad=!0:n._autoLoad="boolean"==typeof o.autoLoad&&o.autoLoad,n._onDemand="boolean"==typeof o.onDemand&&o.onDemand,n._onDemandDelay="number"==typeof o.onDemandDelay?o.onDemandDelay:300,o.mapMoveObj?n._mapMove=o.mapMoveObj:n._mapMove=n._onDemand?a.default:void 0,n._mapMoveMakeGetParams="function"==typeof o.mapMoveMakeGetParams?o.mapMoveMakeGetParams:function(){return{}},n._onDemand&&(n._loaded=!0,n._mapMoveParams={},n._mapMove.checkInit(),n._mapMove.addVectorLayer(n)),n._source=new l.source.Vector,n._olLayer=new l.layer.Vector({source:n._source,visible:n.visible,style:n.style,minResolution:n._minResolution,maxResolution:n._maxResolution,renderOrder:o.renderOrder}),n.olLayer.setZIndex(n._zIndex),n._projectionMap=null,n._projection4326=new l.proj.Projection({code:"EPSG:4326"}),n}return n(t,e),t.prototype.addFeatures=function(e){console.log("Layer vector base addFeatures is a placeholder and does nothing")},t.prototype.mapMoveBefore=function(e,t){return!(void 0!==this.minZoom&&e<this.minZoom)&&(!(void 0!==this.maxZoom&&e>this.maxZoom)&&this.visible)},t.prototype.mapMoveMakeGetParams=function(e,t){this._mapMoveParams={},s.extend(this._mapMoveParams,this.params),s.extend(this._mapMoveParams,this._mapMoveMakeGetParams(this,e,t))},t.prototype.mapMoveCallback=function(e){this.source&&this._source.clear()},t.prototype.clear=function(){this._source&&this._source.clear()},Object.defineProperty(t.prototype,"onDemandDelay",{get:function(){return this._onDemandDelay},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLoad",{get:function(){return this._autoLoad},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){this._style=e,this.olLayer.setStyle(this._style)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapCrs",{get:function(){return null==this.mapProj?null:this.mapProj.getCode()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapProj",{get:function(){return null!=this._projectionMap?this._projectionMap:this._mapMove?(this._projectionMap=this._mapMove.map.getView().getProjection(),this._projectionMap):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapMove",{get:function(){return this._mapMove},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapMoveParams",{get:function(){return this._mapMoveParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){e.prototype.setVisible.call(this,t),this._onDemand&&this.mapMove.triggerLyrLoad(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this.getSource()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this.source.getFeatures()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"olLayer",{get:function(){return e.prototype.getOlLayer.call(this)},enumerable:!0,configurable:!0}),t.prototype.setZIndex=function(e){this.olLayer.setZIndex(e)},t}(r.LayerBase);t.LayerBaseVector=u,p.LayerBaseVector=u,t.default=u},,,,,function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(20),a=o(16),i=o(0),l=o(2),s=o(1),p=i.default("layers"),u=function(e){function t(t,o){var n=this;return"object"!=typeof o.params&&(o.params={}),o.params.where=o.where||"1=1",o.params.outFields=o.outFields||"*",o.params.f=o.format||"pjson",o.params.outSR=o.outSR||3857,n=e.call(this,t,o)||this,n._outSR=n.params.outSR,n._esriFormat=new l.format.EsriJSON,"/"!==n._url[n._url.length-1]&&(n._url+="/"),n._urlCopy=n.url,n._url+="query?callback=?",(n.autoLoad||n.visible)&&n._load(),n._useEsriStyle="boolean"==typeof o.useEsriStyle&&o.useEsriStyle,n._useEsriStyle&&n.addLegendContent(),n}return n(t,e),t.prototype.addLegendContent=function(t){var o=this;this._useEsriStyle?s.get(this._urlCopy+"?f=pjson&callback=?",{},function(t){if(t.subLayers.length>0)return void alert("should only use single feature layers, not groups");var n=a.makeFeatureServiceLegendAndSymbol(t);o.style=n.style,e.prototype.addLegendContent.call(o,n.legend)},"json"):e.prototype.addLegendContent.call(this,t)},t.prototype.addFeatures=function(e){var t=this._esriFormat.readFeatures(e);this.source.addFeatures(t)},t.prototype._load=function(){var t=this;return!!e.prototype._load.call(this)||(s.get(this._url,this.params,function(e){t.addFeatures(e),t.loadCallback(t)},"json").fail(function(){t._loaded=!1}),!1)},t.prototype.mapMoveMakeGetParams=function(t,o){e.prototype.mapMoveMakeGetParams.call(this,t,o),this.mapMoveParams.geometry=t.minX+","+t.minY+","+t.maxX+","+t.maxY,this.mapMoveParams.geometryType="esriGeometryEnvelope",this.mapMoveParams.spatialRel="esriSpatialRelIntersects",this.mapMoveParams.spatialRel="esriSpatialRelIntersects",this.mapMoveParams.inSR=3857,3857==this._outSR&&(this.mapMoveParams.geometryPrecision=1)},t.prototype.mapMoveBefore=function(t,o){return e.prototype.mapMoveBefore.call(this,t,o)},t.prototype.mapMoveCallback=function(t){e.prototype.mapMoveCallback.call(this,t),this.source.addFeatures(this._esriFormat.readFeatures(t))},t}(r.LayerBaseVector);t.LayerBaseVectorEsri=u,p.LayerBaseVectorEsri=u,t.default=u},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(29),a=o(32),i=o(0),l=i.default("layers"),s=function(e){function t(t){var o=this;return t.animate="boolean"==typeof t.animate&&t.animate,t.animate?(o=e.call(this,"",t)||this,o._products=t.products,o.animator=new a.default(o,t.timeLoadCallback),o.animator.timeInit()):(o=e.call(this,"http://realearth.ssec.wisc.edu/api/image?products="+t.products+"&x={x}&y={y}&z={z}",t)||this,o._products=t.products),o}return n(t,e),t.prototype.setLayerTime=function(e){return!!this.animator&&this.animator.setLayerTime(e)},t.prototype._load=function(){return!this.animator&&e.prototype._load.call(this)},t}(r.LayerBaseXyzTile);t.LayerRealEarthTile=s,l.LayerRealEarthTile=s,t.default=s},,,function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(8),a=o(0),i=o(2),l=a.default("layers"),s=function(e){function t(t,o){void 0===o&&(o={});var n=e.call(this,t,o)||this;return n._source=new i.source.XYZ({url:""==n.url?void 0:n.url}),n._olLayer=new i.layer.Tile({source:n._source,visible:n.visible,opacity:n.opacity,minResolution:n._minResolution,maxResolution:n._maxResolution}),n._olLayer.setZIndex(n._zIndex),n}return n(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"olLayer",{get:function(){return this._olLayer},enumerable:!0,configurable:!0}),t}(r.LayerBase);t.LayerBaseXyzTile=s,l.LayerBaseXyzTile=s,t.default=s},,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(4),a=o(1),i=n.default("mixin"),l=(new Date).getTimezoneOffset(),s=function(){function e(e,t){this.lyr=e,this._products=e._products,this.loadCallback=t?t:function(){}}return e.prototype.timeInit=function(){var e=this;this._rawDateStrings=[],this._localDates=[],this.localTimes=[],this._animateEnabled=!0,this._currentTime=void 0,this._currentIndex=void 0,a.get("http://realearth.ssec.wisc.edu/api/products",{products:this._products},function(t){if(0==t.length)return void console.log(e._products+" layer not available or does not have times");t=t[0];for(var o=0;o<t.times.length;o++)e._loadDates.call(e,t.times[o]);e.loadCallback.call(e.lyr,e.lyr),e._loadLatest.call(e)},"json")},e.prototype._loadDates=function(e){var t=e.slice(0,4),o=e.slice(4,6),n=e.slice(6,8),r=e.slice(9,11),a=e.slice(11,13),i=e.slice(13,15),s=e.replace(".","_");this._rawDateStrings.push(s);var p=o+"/"+n+"/"+t+" "+r+":"+a+":"+i,u=new Date(p);return u.setMinutes(u.getMinutes()-l),this._localDates.push(u),this.localTimes.push(u.getTime()),s},e.prototype._loadLatest=function(){return r.default.closePopup(),this.localTimes.length>0&&(this._currentIndex=this.localTimes.length-1,!0)},e.prototype.setLayerTime=function(e){this._currentTime=e;var t;if(e<this.localTimes[0])return!1;e>this.localTimes[this.localTimes.length-1]&&(t=this.localTimes.length-1);for(var o=0;o<this.localTimes.length;o++)if(this.localTimes[o]>=e){t=o;break}return t!=this._currentIndex&&(this._currentIndex=t,r.default.closePopup(),!0)},e}();t.RealEarthAnimate=s,i.RealEarthAnimate=s,t.default=s},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=o(31),a=o(0),i=a.default("mixin"),l=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n._source=t.source,n._olLayer=t.olLayer,n}return n(t,e),t.prototype.timeInit=function(){e.prototype.timeInit.call(this),this._sourceUrls=[]},t.prototype._loadDates=function(t){var o=e.prototype._loadDates.call(this,t),n="http://realearth.ssec.wisc.edu/api/image?products="+this._products+"_"+o+"&x={x}&y={y}&z={z}";return this._sourceUrls.push(n),""},t.prototype._loadLatest=function(){return e.prototype._loadLatest.call(this)&&this._source.setUrl(this._sourceUrls[this._sourceUrls.length-1]),!0},t.prototype.setLayerTime=function(t){return e.prototype.setLayerTime.call(this,t)?(this._olLayer.getZIndex()<0&&this._olLayer.setZIndex(0),this._source.setUrl(this._sourceUrls[this._currentIndex])):this._olLayer.setZIndex(-1),!0},t}(r.default);i.RealEarthAnimateTile=l,t.default=l},,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(7),r=o(26),a=o(18),i=o(1),l=o(25),s=o(10);o(15);var p=new r.default({products:"nexrhres",id:"nexrhres-static",opacity:.6,animate:!0,name:"Hybrid Reflectivity",timeLoadCallback:function(e){console.log(e)}}),u=new Date,c=u.getTime();u.setHours(u.getHours()-4);var d=u.getTime(),y=Math.round((c-d)/8),h=(new a.MediaControl(i("#control"),function(e){p.setLayerTime(e)},{min:d,max:c,val:c,step:y,playInterval:750,showAsDate:!0}),n.quickMap());h.addLayer(p.olLayer);var f=new l.LayerBaseVectorEsri("http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/GLRTOC/GlrtocCoordination/MapServer/0",{visible:!0,autoLoad:!0,name:"Coordination",useEsriStyle:!0});h.addLayer(f.olLayer);for(var m=[["Cameras","cameras33"],["HAR","HAR33"],["DMS","MessageSigns33"],["Traffic Control","TrafficControl33"],["Traffic Detection","TrafficDetectionMulti"],["Weather","Weather33"]],_=0;_<m.length;_++){var v=new s.LayerEsriMapServer("http://itsdpro.ornl.gov/arcgis/rest/services/ITSPublic/"+m[_][1]+"/MapServer",{id:m[_][1],name:m[_][0],visible:!0,minZoom:7,zIndex:20,addPopup:!0,legendCollapse:!0});h.addLayer(v.olLayer)}}]);
//# sourceMappingURL=animate.js.map